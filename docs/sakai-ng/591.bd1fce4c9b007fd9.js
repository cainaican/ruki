(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[591],{6591:(hc,rs,Q)=>{"use strict";Q.r(rs),Q.d(rs,{DashboardModule:()=>FM});var Me=Q(6814),me=Q(95),h=Q(5849);function qe(){}const Zi=function(){let n=0;return function(){return n++}}();function ee(n){return null===n||typeof n>"u"}function Te(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function ne(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}const ke=n=>("number"==typeof n||n instanceof Number)&&isFinite(+n);function Ye(n,e){return ke(n)?n:e}function Z(n,e){return typeof n>"u"?e:n}const ii=(n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*e:+n;function be(n,e,t){if(n&&"function"==typeof n.call)return n.apply(t,e)}function I(n,e,t,i){let s,r,o;if(Te(n))if(r=n.length,i)for(s=r-1;s>=0;s--)e.call(t,n[s],s);else for(s=0;s<r;s++)e.call(t,n[s],s);else if(ne(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)e.call(t,n[o[s]],o[s])}function M(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function O(n){if(Te(n))return n.map(O);if(ne(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=O(n[t[s]]);return e}return n}function N(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function V(n,e,t,i){if(!N(n))return;const s=e[n],r=t[n];ne(s)&&ne(r)?H(s,r,i):e[n]=O(r)}function H(n,e,t){const i=Te(e)?e:[e],s=i.length;if(!ne(n))return n;const r=(t=t||{}).merger||V;for(let o=0;o<s;++o){if(!ne(e=i[o]))continue;const a=Object.keys(e);for(let l=0,c=a.length;l<c;++l)r(a[l],n,e,t)}return n}function B(n,e){return H(n,e,{merger:se})}function se(n,e,t){if(!N(n))return;const i=e[n],s=t[n];ne(i)&&ne(s)?B(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=O(s))}const ae={"":n=>n,x:n=>n.x,y:n=>n.y};function _e(n,e){return(ae[e]||(ae[e]=function Ce(n){const e=function ze(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}(n);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e)))(n)}function ni(n){return n.charAt(0).toUpperCase()+n.slice(1)}const He=n=>typeof n<"u",ot=n=>"function"==typeof n,si=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0},we=Math.PI,le=2*we,_t=le+we,hr=Number.POSITIVE_INFINITY,mp=we/180,Le=we/2,os=we/4,dc=2*we/3,Ct=Math.log10,Wt=Math.sign;function uc(n){const e=Math.round(n);n=as(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Ct(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function bn(n){return!isNaN(parseFloat(n))&&isFinite(n)}function as(n,e,t){return Math.abs(n-e)<t}function fc(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Lt(n){return n*(we/180)}function Vo(n){return n*(180/we)}function pc(n){if(!ke(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function gc(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*we&&(r+=le),{angle:r,distance:s}}function No(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function xp(n,e){return(n-e+_t)%le-we}function yt(n){return(n%le+le)%le}function ls(n,e,t,i){const s=yt(n),r=yt(e),o=yt(t),a=yt(r-s),l=yt(o-s),c=yt(s-r),d=yt(s-o);return s===r||s===o||i&&r===o||a>l&&c<d}function Ke(n,e,t){return Math.max(e,Math.min(t,n))}function ri(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Bo(n,e,t){t=t||(o=>n[o]<e);let r,i=n.length-1,s=0;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const oi=(n,e,t,i)=>Bo(n,t,i?s=>n[s][e]<=t:s=>n[s][e]<t),bp=(n,e,t)=>Bo(n,t,i=>n[i][e]>=t),mc=["push","pop","shift","splice","unshift"];function _c(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);-1!==s&&i.splice(s,1),!(i.length>0)&&(mc.forEach(r=>{delete n[r]}),delete n._chartjs)}function yc(n){const e=new Set;let t,i;for(t=0,i=n.length;t<i;++t)e.add(n[t]);return e.size===i?n:Array.from(e)}const xc=typeof window>"u"?function(n){return n()}:window.requestAnimationFrame;function vc(n,e,t){const i=t||(o=>Array.prototype.slice.call(o));let s=!1,r=[];return function(...o){r=i(o),s||(s=!0,xc.call(window,()=>{s=!1,n.apply(e,r)}))}}const Ko=n=>"start"===n?"left":"end"===n?"right":"center",Je=(n,e,t)=>"start"===n?e:"end"===n?t:(e+t)/2;function bc(n,e,t){const i=e.length;let s=0,r=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:d,minDefined:u,maxDefined:f}=o.getUserBounds();u&&(s=Ke(Math.min(oi(a,o.axis,c).lo,t?i:oi(e,l,o.getPixelForValue(c)).lo),0,i-1)),r=f?Ke(Math.max(oi(a,o.axis,d,!0).hi+1,t?0:oi(e,l,o.getPixelForValue(d),!0).hi+1),s,i)-s:i-s}return{start:s,count:r}}function Cc(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),r}const dr=n=>0===n||1===n,wc=(n,e,t)=>-Math.pow(2,10*(n-=1))*Math.sin((n-e)*le/t),Ic=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*le/t)+1,cs={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*Le),easeOutSine:n=>Math.sin(n*Le),easeInOutSine:n=>-.5*(Math.cos(we*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>dr(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>dr(n)?n:wc(n,.075,.3),easeOutElastic:n=>dr(n)?n:Ic(n,.075,.3),easeInOutElastic:n=>dr(n)?n:n<.5?.5*wc(2*n,.1125,.45):.5+.5*Ic(2*n-1,.1125,.45),easeInBack:n=>n*n*(2.70158*n-1.70158),easeOutBack:n=>(n-=1)*n*(2.70158*n+1.70158)+1,easeInOutBack(n){let e=1.70158;return(n/=.5)<1?n*n*((1+(e*=1.525))*n-e)*.5:.5*((n-=2)*n*((1+(e*=1.525))*n+e)+2)},easeInBounce:n=>1-cs.easeOutBounce(1-n),easeOutBounce:n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,easeInOutBounce:n=>n<.5?.5*cs.easeInBounce(2*n):.5*cs.easeOutBounce(2*n-1)+.5};function hs(n){return n+.5|0}const Ei=(n,e,t)=>Math.max(Math.min(n,t),e);function ds(n){return Ei(hs(2.55*n),0,255)}function Mi(n){return Ei(hs(255*n),0,255)}function ai(n){return Ei(hs(n/2.55)/100,0,1)}function Tc(n){return Ei(hs(100*n),0,100)}const wt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Wo=[..."0123456789ABCDEF"],Sp=n=>Wo[15&n],Ep=n=>Wo[(240&n)>>4]+Wo[15&n],ur=n=>(240&n)>>4==(15&n);const Op=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sc(n,e,t){const i=e*Math.min(t,1-t),s=(r,o=(r+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Lp(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Pp(n,e,t){const i=Sc(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function Go(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=(r+o)/2;let l,c,d;return r!==o&&(d=r-o,c=a>.5?d/(2-r-o):d/(r+o),l=function Fp(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}(t,i,s,d,r),l=60*l+.5),[0|l,c||0,a]}function jo(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Mi)}function Yo(n,e,t){return jo(Sc,n,e,t)}function Ec(n){return(n%360+360)%360}const Mc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},kc={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let fr;const Wp=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Uo=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,Cn=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function pr(n,e,t){if(n){let i=Go(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,0===e?360:1)),i=Yo(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Rc(n,e){return n&&Object.assign(e||{},n)}function Dc(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Mi(n[3]))):(e=Rc(n,{r:0,g:0,b:0,a:1})).a=Mi(e.a),e}function Up(n){return"r"===n.charAt(0)?function Gp(n){const e=Wp.exec(n);let i,s,r,t=255;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?ds(o):Ei(255*o,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?ds(i):Ei(i,0,255)),s=255&(e[4]?ds(s):Ei(s,0,255)),r=255&(e[6]?ds(r):Ei(r,0,255)),{r:i,g:s,b:r,a:t}}}(n):function Hp(n){const e=Op.exec(n);let i,t=255;if(!e)return;e[5]!==i&&(t=e[6]?ds(+e[5]):Mi(+e[5]));const s=Ec(+e[2]),r=+e[3]/100,o=+e[4]/100;return i="hwb"===e[1]?function Ap(n,e,t){return jo(Pp,n,e,t)}(s,r,o):"hsv"===e[1]?function zp(n,e,t){return jo(Lp,n,e,t)}(s,r,o):Yo(s,r,o),{r:i[0],g:i[1],b:i[2],a:t}}(n)}class gr{constructor(e){if(e instanceof gr)return e;const t=typeof e;let i;"object"===t?i=Dc(e):"string"===t&&(i=function kp(n){var t,e=n.length;return"#"===n[0]&&(4===e||5===e?t={r:255&17*wt[n[1]],g:255&17*wt[n[2]],b:255&17*wt[n[3]],a:5===e?17*wt[n[4]]:255}:(7===e||9===e)&&(t={r:wt[n[1]]<<4|wt[n[2]],g:wt[n[3]]<<4|wt[n[4]],b:wt[n[5]]<<4|wt[n[6]],a:9===e?wt[n[7]]<<4|wt[n[8]]:255})),t}(e)||function Kp(n){fr||(fr=function Bp(){const n={},e=Object.keys(kc),t=Object.keys(Mc);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<t.length;s++)r=t[s],a=a.replace(r,Mc[r]);r=parseInt(kc[o],16),n[a]=[r>>16&255,r>>8&255,255&r]}return n}(),fr.transparent=[0,0,0,0]);const e=fr[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||Up(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Rc(this._rgb);return e&&(e.a=ai(e.a)),e}set rgb(e){this._rgb=Dc(e)}rgbString(){return this._valid?function jp(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ai(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}(this._rgb):void 0}hexString(){return this._valid?function Dp(n){var e=(n=>ur(n.r)&&ur(n.g)&&ur(n.b)&&ur(n.a))(n)?Sp:Ep;return n?"#"+e(n.r)+e(n.g)+e(n.b)+((n,e)=>n<255?e(n):"")(n.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function Np(n){if(!n)return;const e=Go(n),t=e[0],i=Tc(e[1]),s=Tc(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${ai(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=i.a-s.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=function Yp(n,e,t){const i=Cn(ai(n.r)),s=Cn(ai(n.g)),r=Cn(ai(n.b));return{r:Mi(Uo(i+t*(Cn(ai(e.r))-i))),g:Mi(Uo(s+t*(Cn(ai(e.g))-s))),b:Mi(Uo(r+t*(Cn(ai(e.b))-r))),a:n.a+t*(e.a-n.a)}}(this._rgb,e._rgb,t)),this}clone(){return new gr(this.rgb)}alpha(e){return this._rgb.a=Mi(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=hs(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return pr(this._rgb,2,e),this}darken(e){return pr(this._rgb,2,-e),this}saturate(e){return pr(this._rgb,1,e),this}desaturate(e){return pr(this._rgb,1,-e),this}rotate(e){return function Vp(n,e){var t=Go(n);t[0]=Ec(t[0]+e),t=Yo(t),n.r=t[0],n.g=t[1],n.b=t[2]}(this._rgb,e),this}}function Oc(n){return new gr(n)}function Lc(n){if(n&&"object"==typeof n){const e=n.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Pc(n){return Lc(n)?n:Oc(n)}function Zo(n){return Lc(n)?n:Oc(n).saturate(.5).darken(.1).hexString()}const Xi=Object.create(null),Xo=Object.create(null);function us(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function $o(n,e,t){return"string"==typeof e?H(us(n,e),t):H(us(n,""),e)}var oe=new class Zp{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,i)=>Zo(i.backgroundColor),this.hoverBorderColor=(t,i)=>Zo(i.borderColor),this.hoverColor=(t,i)=>Zo(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return $o(this,e,t)}get(e){return us(this,e)}describe(e,t){return $o(Xo,e,t)}override(e,t){return $o(Xi,e,t)}route(e,t,i,s){const r=us(this,e),o=us(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[s];return ne(l)?Object.assign({},c,l):Z(l,c)},set(l){this[a]=l}}})}}({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function mr(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function $p(n,e,t,i){let s=(i=i||{}).data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,d,u,f;for(l=0;l<a;l++)if(u=t[l],null!=u&&!0!==Te(u))o=mr(n,s,r,o,u);else if(Te(u))for(c=0,d=u.length;c<d;c++)f=u[c],null!=f&&!Te(f)&&(o=mr(n,s,r,o,f));n.restore();const p=r.length/2;if(p>t.length){for(l=0;l<p;l++)delete s[r[l]];r.splice(0,p)}return o}function $i(n,e,t){const i=n.currentDevicePixelRatio,s=0!==t?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function Fc(n,e){(e=e||n.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function qo(n,e,t,i){Ac(n,e,t,i,null)}function Ac(n,e,t,i,s){let r,o,a,l,c,d;const u=e.pointStyle,f=e.rotation,p=e.radius;let g=(f||0)*mp;if(u&&"object"==typeof u&&(r=u.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return n.save(),n.translate(t,i),n.rotate(g),n.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),void n.restore();if(!(isNaN(p)||p<=0)){switch(n.beginPath(),u){default:s?n.ellipse(t,i,s/2,p,0,0,le):n.arc(t,i,p,0,le),n.closePath();break;case"triangle":n.moveTo(t+Math.sin(g)*p,i-Math.cos(g)*p),g+=dc,n.lineTo(t+Math.sin(g)*p,i-Math.cos(g)*p),g+=dc,n.lineTo(t+Math.sin(g)*p,i-Math.cos(g)*p),n.closePath();break;case"rectRounded":c=.516*p,l=p-c,o=Math.cos(g+os)*l,a=Math.sin(g+os)*l,n.arc(t-o,i-a,c,g-we,g-Le),n.arc(t+a,i-o,c,g-Le,g),n.arc(t+o,i+a,c,g,g+Le),n.arc(t-a,i+o,c,g+Le,g+we),n.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*p,d=s?s/2:l,n.rect(t-d,i-l,2*d,2*l);break}g+=os;case"rectRot":o=Math.cos(g)*p,a=Math.sin(g)*p,n.moveTo(t-o,i-a),n.lineTo(t+a,i-o),n.lineTo(t+o,i+a),n.lineTo(t-a,i+o),n.closePath();break;case"crossRot":g+=os;case"cross":o=Math.cos(g)*p,a=Math.sin(g)*p,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a),n.moveTo(t+a,i-o),n.lineTo(t-a,i+o);break;case"star":o=Math.cos(g)*p,a=Math.sin(g)*p,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a),n.moveTo(t+a,i-o),n.lineTo(t-a,i+o),g+=os,o=Math.cos(g)*p,a=Math.sin(g)*p,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a),n.moveTo(t+a,i-o),n.lineTo(t-a,i+o);break;case"line":o=s?s/2:Math.cos(g)*p,a=Math.sin(g)*p,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(g)*p,i+Math.sin(g)*p)}n.fill(),e.borderWidth>0&&n.stroke()}}function fs(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function _r(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function yr(n){n.restore()}function qp(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if("middle"===s){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else"after"===s!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Jp(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function qi(n,e,t,i,s,r={}){const o=Te(e)?e:[e],a=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(n.save(),n.font=s.string,function Qp(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),ee(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}(n,r),l=0;l<o.length;++l)c=o[l],a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),ee(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),eg(n,t,i,c,r),i+=s.lineHeight;n.restore()}function eg(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,c=t+r.actualBoundingBoxDescent,d=s.strikethrough?(t-r.actualBoundingBoxAscent+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,d),n.lineTo(a,d),n.stroke()}}function ps(n,e){const{x:t,y:i,w:s,h:r,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,-Le,we,!0),n.lineTo(t,i+r-o.bottomLeft),n.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,we,Le,!0),n.lineTo(t+s-o.bottomRight,i+r),n.arc(t+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Le,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-Le,!0),n.lineTo(t+o.topLeft,i)}const tg=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),ig=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function ng(n,e){const t=(""+n).match(tg);if(!t||"normal"===t[1])return 1.2*e;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100}return e*n}const sg=n=>+n||0;function Jo(n,e){const t={},i=ne(e),s=i?Object.keys(e):e,r=ne(n)?i?o=>Z(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=sg(r(o));return t}function zc(n){return Jo(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ji(n){return Jo(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Qe(n){const e=zc(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ne(n,e){let t=Z((n=n||{}).size,(e=e||oe.font).size);"string"==typeof t&&(t=parseInt(t,10));let i=Z(n.style,e.style);i&&!(""+i).match(ig)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const s={family:Z(n.family,e.family),lineHeight:ng(Z(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Z(n.weight,e.weight),string:""};return s.string=function Xp(n){return!n||ee(n.size)||ee(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}(s),s}function gs(n,e,t,i){let r,o,a,s=!0;for(r=0,o=n.length;r<o;++r)if(a=n[r],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==t&&Te(a)&&(a=a[t%a.length],s=!1),void 0!==a))return i&&!s&&(i.cacheable=!1),a}function ki(n,e){return Object.assign(Object.create(n),e)}function Qo(n,e=[""],t=n,i,s=(()=>n[0])){He(i)||(i=Kc("_fallback",n));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:t,_fallback:i,_getTarget:s,override:o=>Qo([o,...n],e,t,i)};return new Proxy(r,{deleteProperty:(o,a)=>(delete o[a],delete o._keys,delete n[0][a],!0),get:(o,a)=>Vc(o,a,()=>function fg(n,e,t,i){let s;for(const r of e)if(s=Kc(og(r,n),t),He(s))return ea(n,s)?ta(t,i,n,s):s}(a,e,n,o)),getOwnPropertyDescriptor:(o,a)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],a),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(o,a)=>Wc(o).includes(a),ownKeys:o=>Wc(o),set(o,a,l){const c=o._storage||(o._storage=s());return o[a]=c[a]=l,delete o._keys,!0}})}function wn(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:Hc(n,i),setContext:r=>wn(n,r,t,i),override:r=>wn(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty:(r,o)=>(delete r[o],delete n[o],!0),get:(r,o,a)=>Vc(r,o,()=>function ag(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[e];return ot(a)&&o.isScriptable(e)&&(a=function lg(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);return a.add(n),e=e(r,o||i),a.delete(n),ea(n,e)&&(e=ta(s._scopes,s,n,e)),e}(e,a,n,t)),Te(a)&&a.length&&(a=function cg(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=t;if(He(r.index)&&i(n))e=e[r.index%e.length];else if(ne(e[0])){const l=e,c=s._scopes.filter(d=>d!==l);e=[];for(const d of l){const u=ta(c,s,n,d);e.push(wn(u,r,o&&o[n],a))}}return e}(e,a,n,o.isIndexable)),ea(e,a)&&(a=wn(a,s,r&&r[e],o)),a}(r,o,a)),getOwnPropertyDescriptor:(r,o)=>r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(r,o)=>Reflect.has(n,o),ownKeys:()=>Reflect.ownKeys(n),set:(r,o,a)=>(n[o]=a,delete r[o],!0)})}function Hc(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:ot(t)?t:()=>t,isIndexable:ot(i)?i:()=>i}}const og=(n,e)=>n?n+ni(e):e,ea=(n,e)=>ne(e)&&"adapters"!==n&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Vc(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const i=t();return n[e]=i,i}function Nc(n,e,t){return ot(n)?n(e,t):n}const hg=(n,e)=>!0===n?e:"string"==typeof n?_e(e,n):void 0;function dg(n,e,t,i,s){for(const r of e){const o=hg(t,r);if(o){n.add(o);const a=Nc(o._fallback,t,s);if(He(a)&&a!==t&&a!==i)return a}else if(!1===o&&He(i)&&t!==i)return null}return!1}function ta(n,e,t,i){const s=e._rootScopes,r=Nc(e._fallback,t,i),o=[...n,...s],a=new Set;a.add(i);let l=Bc(a,o,t,r||t,i);return!(null===l||He(r)&&r!==t&&(l=Bc(a,o,r,l,i),null===l))&&Qo(Array.from(a),[""],s,r,()=>function ug(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return Te(s)&&ne(t)?t:s}(e,t,i))}function Bc(n,e,t,i,s){for(;t;)t=dg(n,e,t,i,s);return t}function Kc(n,e){for(const t of e){if(!t)continue;const i=t[n];if(He(i))return i}}function Wc(n){let e=n._keys;return e||(e=n._keys=function pg(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}(n._scopes)),e}function Gc(n,e,t,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,d;for(a=0,l=i;a<l;++a)c=a+t,d=e[c],o[a]={r:s.parse(_e(d,r),c)};return o}const gg=Number.EPSILON||1e-14,In=(n,e)=>e<n.length&&!n[e].skip&&n[e],jc=n=>"x"===n?"y":"x";function mg(n,e,t,i){const s=n.skip?e:n,r=e,o=t.skip?e:t,a=No(r,s),l=No(o,r);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=i*c,f=i*d;return{previous:{x:r.x-u*(o.x-s.x),y:r.y-u*(o.y-s.y)},next:{x:r.x+f*(o.x-s.x),y:r.y+f*(o.y-s.y)}}}function xr(n,e,t){return Math.max(Math.min(n,t),e)}function bg(n,e,t,i,s){let r,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),"monotone"===e.cubicInterpolationMode)!function xg(n,e="x"){const t=jc(e),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=In(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=In(n,o+1),l){if(c){const d=c[e]-l[e];s[o]=0!==d?(c[t]-l[t])/d:0}r[o]=a?c?Wt(s[o-1])!==Wt(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}(function _g(n,e,t){const i=n.length;let s,r,o,a,l,c=In(n,0);for(let d=0;d<i-1;++d)if(l=c,c=In(n,d+1),l&&c){if(as(e[d],0,gg)){t[d]=t[d+1]=0;continue}s=t[d]/e[d],r=t[d+1]/e[d],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[d]=s*o*e[d],t[d+1]=r*o*e[d])}})(n,s,r),function yg(n,e,t="x"){const i=jc(t),s=n.length;let r,o,a,l=In(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=In(n,c+1),!a)continue;const d=a[t],u=a[i];o&&(r=(d-o[t])/3,a[`cp1${t}`]=d-r,a[`cp1${i}`]=u-r*e[c]),l&&(r=(l[t]-d)/3,a[`cp2${t}`]=d+r,a[`cp2${i}`]=u+r*e[c])}}(n,r,e)}(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=mg(c,a,n[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&function vg(n,e){let t,i,s,r,o,a=fs(n[0],e);for(t=0,i=n.length;t<i;++t)o=r,r=a,a=t<i-1&&fs(n[t+1],e),r&&(s=n[t],o&&(s.cp1x=xr(s.cp1x,e.left,e.right),s.cp1y=xr(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=xr(s.cp2x,e.left,e.right),s.cp2y=xr(s.cp2y,e.top,e.bottom)))}(n,t)}function Yc(){return typeof window<"u"&&typeof document<"u"}function ia(n){let e=n.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function vr(n,e,t){let i;return"string"==typeof n?(i=parseInt(n,10),-1!==n.indexOf("%")&&(i=i/100*e.parentNode[t])):i=n,i}const br=n=>window.getComputedStyle(n,null),wg=["top","right","bottom","left"];function Qi(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=wg[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Ig=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function en(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=br(t),r="border-box"===s.boxSizing,o=Qi(s,"padding"),a=Qi(s,"border","width"),{x:l,y:c,box:d}=function Tg(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let a,l,o=!1;if(Ig(s,r,n.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}(n,t),u=o.left+(d&&a.left),f=o.top+(d&&a.top);let{width:p,height:g}=e;return r&&(p-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-u)/p*t.width/i),y:Math.round((c-f)/g*t.height/i)}}const na=n=>Math.round(10*n)/10;function Uc(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=s/i,n.width=r/i;const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r)&&(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0)}const Mg=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function Zc(n,e){const t=function Cg(n,e){return br(n).getPropertyValue(e)}(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function tn(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function kg(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:"middle"===i?t<.5?n.y:e.y:"after"===i?t<1?n.y:e.y:t>0?e.y:n.y}}function Rg(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=tn(n,s,t),a=tn(s,r,t),l=tn(r,e,t),c=tn(o,a,t),d=tn(a,l,t);return tn(c,d,t)}const Xc=new Map;function ms(n,e,t){return function Dg(n,e){e=e||{};const t=n+JSON.stringify(e);let i=Xc.get(t);return i||(i=new Intl.NumberFormat(n,e),Xc.set(t,i)),i}(e,t).format(n)}function Tn(n,e,t){return n?function(n,e){return{x:t=>n+n+e-t,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,i)=>t-i,leftForLtr:(t,i)=>t-i}}(e,t):{x:n=>n,setWidth(n){},textAlign:n=>n,xPlus:(n,e)=>n+e,leftForLtr:(n,e)=>n}}function $c(n,e){let t,i;("ltr"===e||"rtl"===e)&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function qc(n,e){void 0!==e&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Jc(n){return"angle"===n?{between:ls,compare:xp,normalize:yt}:{between:ri,compare:(e,t)=>e-t,normalize:e=>e}}function Qc({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t==0,style:s}}function eh(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=Jc(i),{start:d,end:u,loop:f,style:p}=function Pg(n,e,t){const{property:i,start:s,end:r}=t,{between:o,normalize:a}=Jc(i),l=e.length;let f,p,{start:c,end:d,loop:u}=n;if(u){for(c+=l,d+=l,f=0,p=l;f<p&&o(a(e[c%l][i]),s,r);++f)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:u,style:n.style}}(n,e,t),g=[];let y,x,C,m=!1,_=null;for(let S=d,E=d;S<=u;++S)x=e[S%o],!x.skip&&(y=c(x[i]),y!==C&&(m=l(y,s,r),null===_&&(m||l(s,C,y)&&0!==a(s,C))&&(_=0===a(y,s)?S:E),null!==_&&(!m||0===a(r,y)||l(r,C,y))&&(g.push(Qc({start:_,end:S,loop:f,count:o,style:p})),_=null),E=S,C=y));return null!==_&&g.push(Qc({start:_,end:u,loop:f,count:o,style:p})),g}function th(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=eh(i[s],n.points,e);r.length&&t.push(...r)}return t}function nh(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Vg(n,e){return e&&JSON.stringify(n)!==JSON.stringify(e)}var li=new class Ng{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const o=t.duration;t.listeners[s].forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=xc.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let l,o=r.length-1,a=!1;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const sh="transparent",Bg={boolean:(n,e,t)=>t>.5?e:n,color(n,e,t){const i=Pc(n||sh),s=i.valid&&Pc(e||sh);return s&&s.valid?s.mix(i,t).hexString():e},number:(n,e,t)=>n+(e-n)*t};class Kg{constructor(e,t,i,s){const r=t[i];s=gs([e.to,s,r,e.from]);const o=gs([e.from,r,s]);this._active=!0,this._fn=e.fn||Bg[e.type||typeof o],this._easing=cs[e.easing]||cs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=gs([e.to,t,s,e.from]),this._from=gs([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<i),!this._active)return this._target[s]=a,void this._notify(!0);t<0?this._target[s]=r:(l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}oe.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const jg=Object.keys(oe.animation);oe.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>"onProgress"!==n&&"onComplete"!==n&&"fn"!==n}),oe.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),oe.describe("animations",{_fallback:"animation"}),oe.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>0|n}}}});class rh{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ne(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ne(s))return;const r={};for(const o of jg)r[o]=s[o];(Te(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!t.has(o))&&t.set(o,r)})})}_animateOptions(e,t){const i=t.options,s=function Ug(n,e){if(!e)return;let t=n.options;if(t)return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;n.options=e}(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&function Yg(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if("$"===c.charAt(0))continue;if("options"===c){s.push(...this._animateOptions(e,t));continue}const d=t[c];let u=r[c];const f=i.get(c);if(u){if(f&&u.active()){u.update(f,d,a);continue}u.cancel()}f&&f.duration?(r[c]=u=new Kg(f,e,c,d),s.push(u)):e[c]=d}return s}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(li.add(this._chart,i),!0):void 0}}function oh(n,e){const t=n&&n.options||{},i=t.reverse,s=void 0===t.min?e:0,r=void 0===t.max?e:0;return{start:i?r:s,end:i?s:r}}function ah(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function lh(n,e,t,i={}){const s=n.keys,r="single"===i.mode;let o,a,l,c;if(null!==e){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===t){if(i.all)continue;break}c=n.values[l],ke(c)&&(r||0===e||Wt(e)===Wt(c))&&(e+=c)}return e}}function ch(n,e){const t=n&&n.options.stacked;return t||void 0===t&&void 0!==e.stack}function Qg(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function hh(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function dh(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,d=function qg(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}(r,o,i),u=e.length;let f;for(let p=0;p<u;++p){const g=e[p],{[l]:m,[c]:_}=g;f=(g._stacks||(g._stacks={}))[c]=Qg(s,d,m),f[a]=_,f._top=hh(f,o,!0,i.type),f._bottom=hh(f,o,!1,i.type)}}function sa(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function _s(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||void 0===r[i]||void 0===r[i][t])return;delete r[i][t]}}}const ra=n=>"reset"===n||"none"===n,uh=(n,e)=>e?n:Object.assign({},n);let Gt=(()=>{class n{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ch(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&_s(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,s=this.getDataset(),r=(f,p,g,m)=>"x"===f?p:"r"===f?m:g,o=i.xAxisID=Z(s.xAxisID,sa(t,"x")),a=i.yAxisID=Z(s.yAxisID,sa(t,"y")),l=i.rAxisID=Z(s.rAxisID,sa(t,"r")),c=i.indexAxis,d=i.iAxisID=r(c,o,a,l),u=i.vAxisID=r(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(d),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&_c(this._data,this),t._stacked&&_s(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),s=this._data;if(ne(i))this._data=function $g(n){const e=Object.keys(n),t=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],t[i]={x:r,y:n[r]};return t}(i);else if(s!==i){if(s){_c(s,this);const r=this._cachedMeta;_s(r),r._parsed=[]}i&&Object.isExtensible(i)&&function wp(n,e){n._chartjs?n._chartjs.listeners.push(e):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),mc.forEach(t=>{const i="_onData"+ni(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{"function"==typeof a[i]&&a[i](...r)}),o}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const o=i._stacked;i._stacked=ch(i.vScale,i),i.stack!==s.stack&&(r=!0,_s(i),i.stack=s.stack),this._resyncElements(t),(r||o!==i._stacked)&&dh(this,i._parsed)}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:s,_data:r}=this,{iScale:o,_stacked:a}=s,l=o.axis;let u,f,p,c=0===t&&i===r.length||s._sorted,d=t>0&&s._parsed[t-1];if(!1===this._parsing)s._parsed=r,s._sorted=!0,p=r;else{p=Te(r[t])?this.parseArrayData(s,r,t,i):ne(r[t])?this.parseObjectData(s,r,t,i):this.parsePrimitiveData(s,r,t,i);const g=()=>null===f[l]||d&&f[l]<d[l];for(u=0;u<i;++u)s._parsed[u+t]=f=p[u],c&&(g()&&(c=!1),d=f);s._sorted=c}a&&dh(this,p)}parsePrimitiveData(t,i,s,r){const{iScale:o,vScale:a}=t,l=o.axis,c=a.axis,d=o.getLabels(),u=o===a,f=new Array(r);let p,g,m;for(p=0,g=r;p<g;++p)m=p+s,f[p]={[l]:u||o.parse(d[m],m),[c]:a.parse(i[m],m)};return f}parseArrayData(t,i,s,r){const{xScale:o,yScale:a}=t,l=new Array(r);let c,d,u,f;for(c=0,d=r;c<d;++c)u=c+s,f=i[u],l[c]={x:o.parse(f[0],u),y:a.parse(f[1],u)};return l}parseObjectData(t,i,s,r){const{xScale:o,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,f,p,g;for(u=0,f=r;u<f;++u)p=u+s,g=i[p],d[u]={x:o.parse(_e(g,l),p),y:a.parse(_e(g,c),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,s){const o=this._cachedMeta,a=i[t.axis];return lh({keys:ah(this.chart,!0),values:i._stacks[t.axis]},a,o.index,{mode:s})}updateRangeFromParsed(t,i,s,r){const o=s[i.axis];let a=null===o?NaN:o;const l=r&&s._stacks[i.axis];r&&l&&(r.values=l,a=lh(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){const s=this._cachedMeta,r=s._parsed,o=s._sorted&&t===s.iScale,a=r.length,l=this._getOtherScale(t),c=((n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:ah(this.chart,!0),values:null})(i,s),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=function Jg(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}(l);let p,g;function m(){g=r[p];const _=g[l.axis];return!ke(g[t.axis])||u>_||f<_}for(p=0;p<a&&(m()||(this.updateRangeFromParsed(d,t,g,c),!o));++p);if(o)for(p=a-1;p>=0;--p)if(!m()){this.updateRangeFromParsed(d,t,g,c);break}return d}getAllParsedValues(t){const i=this._cachedMeta._parsed,s=[];let r,o,a;for(r=0,o=i.length;r<o;++r)a=i[r][t.axis],ke(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,s=i.iScale,r=i.vScale,o=this.getParsed(t);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=function Xg(n){let e,t,i,s;return ne(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:!1===n}}(Z(this.options.clip,function Zg(n,e,t){if(!1===t)return!1;const i=oh(n,t),s=oh(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,s=this._cachedMeta,r=s.data||[],o=this.chart.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,o,l,c),u=l;u<l+c;++u){const f=r[u];f.hidden||(f.active&&d?a.push(f):f.draw(t,o))}for(u=0;u<a.length;++u)a[u].draw(t,o)}getStyle(t,i){const s=i?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,i,s){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];o=a.$context||(a.$context=function tm(n,e,t){return ki(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function em(n,e){return ki(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=s,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",s){const r="active"===i,o=this._cachedDataOpts,a=t+"-"+i,l=o[a],c=this.enableOptionSharing&&He(s);if(l)return uh(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),u),g=Object.keys(oe.elements[t]),_=d.resolveNamedOptions(p,g,()=>this.getContext(s,r),f);return _.$shared&&(_.$shared=c,o[a]=Object.freeze(uh(_,c))),_}_resolveAnimations(t,i,s){const r=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(!1!==r.options.animation){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,i),p=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(p,this.getContext(t,s,i))}const d=new rh(r,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||ra(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const s=this.resolveDataElementOptions(t,i),r=this._sharedOptions,o=this.getSharedOptions(s),a=this.includeOptions(i,o)||o!==r;return this.updateSharedOptions(o,i,s),{sharedOptions:o,includeOptions:a}}updateElement(t,i,s,r){ra(r)?Object.assign(t,s):this._resolveAnimations(i,r).update(t,s)}updateSharedOptions(t,i,s){t&&!ra(i)&&this._resolveAnimations(void 0,i).update(t,s)}_setStyle(t,i,s,r){t.active=r;const o=this.getStyle(i,r);this._resolveAnimations(i,s,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,i,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=s.length,o=i.length,a=Math.min(o,r);a&&this.parse(0,a),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,i,s=!0){const r=this._cachedMeta,o=r.data,a=t+i;let l;const c=d=>{for(d.length+=i,l=d.length-1;l>=a;l--)d[l]=d[l-i]};for(c(o),l=t;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,i),s&&this.updateElements(o,t,i,"reset")}updateElements(t,i,s,r){}_removeElements(t,i){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,i);s._stacked&&_s(s,r)}s.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,s,r]=t;this[i](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n.defaults={},n})();function sm(n){const e=n.iScale,t=function nm(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=t.length;s<r;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=yc(i.sort((s,r)=>s-r))}return n._cache.$bar}(e,n.type);let s,r,o,a,i=e._length;const l=()=>{32767===o||-32768===o||(He(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=t.length;s<r;++s)o=e.getPixelForValue(t[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function fh(n,e,t,i){return Te(n)?function am(n,e,t,i){const s=t.parse(n[0],i),r=t.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}(n,e,t,i):e[t.axis]=t.parse(n,i),e}function ph(n,e,t,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let c,d,u,f;for(c=t,d=t+i;c<d;++c)f=e[c],u={},u[s.axis]=a||s.parse(o[c],c),l.push(fh(f,u,r,c));return l}function oa(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function hm(n,e,t,i){let s=e.borderSkipped;const r={};if(!s)return void(n.borderSkipped=r);if(!0===s)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:d}=function cm(n){let e,t,i,s,r;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:i,reverse:e,top:s,bottom:r}}(n);"middle"===s&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=d:(r[gh(d,o,a,l)]=!0,s=c)),r[gh(s,o,a,l)]=!0,n.borderSkipped=r}function gh(n,e,t,i){return i?(n=function dm(n,e,t){return n===e?t:n===t?e:n}(n,e,t),n=mh(n,t,e)):n=mh(n,e,t),n}function mh(n,e,t){return"start"===n?e:"end"===n?t:n}function um(n,{inflateAmount:e},t){n.inflateAmount="auto"===e?1===t?.33:0:e}Gt.prototype.datasetElementType=null,Gt.prototype.dataElementType=null;let fm=(()=>{class n extends Gt{parsePrimitiveData(t,i,s,r){return ph(t,i,s,r)}parseArrayData(t,i,s,r){return ph(t,i,s,r)}parseObjectData(t,i,s,r){const{iScale:o,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d="x"===o.axis?l:c,u="x"===a.axis?l:c,f=[];let p,g,m,_;for(p=s,g=s+r;p<g;++p)_=i[p],m={},m[o.axis]=o.parse(_e(_,d),p),f.push(fh(_e(_,u),m,a,p));return f}updateRangeFromParsed(t,i,s,r){super.updateRangeFromParsed(t,i,s,r);const o=s._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:s,vScale:r}=i,o=this.getParsed(t),a=o._custom,l=oa(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,s,r){const o="reset"===r,{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(i,r);for(let g=i;g<i+s;g++){const m=this.getParsed(g),_=o||ee(m[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),y=this._calculateBarIndexPixels(g,u),x=(m._stacks||{})[l.axis],C={horizontal:d,base:_.base,enableBorderRadius:!x||oa(m._custom)||a===x._top||a===x._bottom,x:d?_.head:y.center,y:d?y.center:_.head,height:d?y.size:Math.abs(_.size),width:d?Math.abs(_.size):y.size};p&&(C.options=f||this.resolveDataElementOptions(g,t[g].active?"active":r));const v=C.options||t[g].options;hm(C,v,x,a),um(C,v,u.ratio),this.updateElement(t[g],g,C,r)}}_getStacks(t,i){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=s.options.stacked,a=[],l=c=>{const d=c.controller.getParsed(i),u=d&&d[c.vScale.axis];if(ee(u)||isNaN(u))return!0};for(const c of r)if((void 0===i||!l(c))&&((!1===o||-1===a.indexOf(c.stack)||void 0===o&&void 0===c.stack)&&a.push(c.stack),c.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,s){const r=this._getStacks(t,s),o=void 0!==i?r.indexOf(i):-1;return-1===o?r.length-1:o}_getRuler(){const t=this.options,i=this._cachedMeta,s=i.iScale,r=[];let o,a;for(o=0,a=i.data.length;o<a;++o)r.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const l=t.barThickness;return{min:l||sm(i),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,d=oa(c);let g,m,u=l[i.axis],f=0,p=s?this.applyStack(i,l,s):u;p!==u&&(f=p-u,p=u),d&&(u=c.barStart,p=c.barEnd-c.barStart,0!==u&&Wt(u)!==Wt(c.barEnd)&&(f=0),f+=u);const _=ee(r)||d?f:r;let y=i.getPixelForValue(_);if(g=this.chart.getDataVisibility(t)?i.getPixelForValue(f+p):y,m=g-y,Math.abs(m)<o){m=function lm(n,e,t){return 0!==n?Wt(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}(m,i,a)*o,u===a&&(y-=m/2);const x=i.getPixelForDecimal(0),C=i.getPixelForDecimal(1),v=Math.min(x,C),b=Math.max(x,C);y=Math.max(Math.min(y,b),v),g=y+m}if(y===i.getPixelForValue(a)){const x=Wt(m)*i.getLineWidthForValue(a)/2;y+=x,m-=x}return{size:m,base:y,head:g,center:g+m/2}}_calculateBarIndexPixels(t,i){const s=i.scale,r=this.options,o=r.skipNull,a=Z(r.maxBarThickness,1/0);let l,c;if(i.grouped){const d=o?this._getStackCount(t):i.stackCount,u="flex"===r.barThickness?function om(n,e,t,i){const s=e.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=t.categoryPercentage;null===o&&(o=r-(null===a?e.end-e.start:a-r)),null===a&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}(t,i,r,d):function rm(n,e,t,i){const s=t.barThickness;let r,o;return ee(s)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[n]-r/2}}(t,i,r,d),f=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);l=u.start+u.chunk*f+u.chunk/2,c=Math.min(a,u.chunk*u.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,i=t.vScale,s=t.data,r=s.length;let o=0;for(;o<r;++o)null!==this.getParsed(o)[i.axis]&&s[o].draw(this._ctx)}}return n.id="bar",n.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},n.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},n})(),pm=(()=>{class n extends Gt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,s,r){const o=super.parsePrimitiveData(t,i,s,r);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+s).radius;return o}parseArrayData(t,i,s,r){const o=super.parseArrayData(t,i,s,r);for(let a=0;a<o.length;a++)o[a]._custom=Z(i[s+a][2],this.resolveDataElementOptions(a+s).radius);return o}parseObjectData(t,i,s,r){const o=super.parseObjectData(t,i,s,r);for(let a=0;a<o.length;a++){const l=i[s+a];o[a]._custom=Z(l&&l.r&&+l.r,this.resolveDataElementOptions(a+s).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let i=0;for(let s=t.length-1;s>=0;--s)i=Math.max(i,t[s].size(this.resolveDataElementOptions(s))/2);return i>0&&i}getLabelAndValue(t){const i=this._cachedMeta,{xScale:s,yScale:r}=i,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i.label,value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,s,r){const o="reset"===r,{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(i,r),u=a.axis,f=l.axis;for(let p=i;p<i+s;p++){const g=t[p],m=!o&&this.getParsed(p),_={},y=_[u]=o?a.getPixelForDecimal(.5):a.getPixelForValue(m[u]),x=_[f]=o?l.getBasePixel():l.getPixelForValue(m[f]);_.skip=isNaN(y)||isNaN(x),d&&(_.options=c||this.resolveDataElementOptions(p,g.active?"active":r),o&&(_.options.radius=0)),this.updateElement(g,p,_,r)}}resolveDataElementOptions(t,i){const s=this.getParsed(t);let r=super.resolveDataElementOptions(t,i);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const o=r.radius;return"active"!==i&&(r.radius=0),r.radius+=Z(s&&s._custom,o),r}}return n.id="bubble",n.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},n.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},n})(),_h=(()=>{class n extends Gt{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const s=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=s;else{let a,l,o=c=>+s[c];if(ne(s[t])){const{key:c="value"}=this._parsing;o=d=>+_e(s[d],c)}for(a=t,l=t+i;a<l;++a)r._parsed[a]=o(a)}}_getRotation(){return Lt(this.options.rotation-90)}_getCircumference(){return Lt(this.options.circumference)}_getRotationExtents(){let t=le,i=-le;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)){const r=this.chart.getDatasetMeta(s).controller,o=r._getRotation(),a=r._getCircumference();t=Math.min(t,o),i=Math.max(i,o+a)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:s}=i,r=this._cachedMeta,o=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(((n,e)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:n/e)(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:m,offsetY:_}=function gm(n,e,t){let i=1,s=1,r=0,o=0;if(e<le){const a=n,l=a+e,c=Math.cos(a),d=Math.sin(a),u=Math.cos(l),f=Math.sin(l),p=(C,v,b)=>ls(C,a,l,!0)?1:Math.max(v,v*t,b,b*t),g=(C,v,b)=>ls(C,a,l,!0)?-1:Math.min(v,v*t,b,b*t),m=p(0,c,u),_=p(Le,d,f),y=g(we,c,u),x=g(we+Le,d,f);i=(m-y)/2,s=(_-x)/2,r=-(m+y)/2,o=-(_+x)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}(f,u,c),C=Math.max(Math.min((s.width-a)/p,(s.height-a)/g)/2,0),v=ii(this.options.radius,C),w=(v-Math.max(v*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*v,this.offsetY=_*v,r.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*d,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){const s=this.options,r=this._cachedMeta,o=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/le)}updateElements(t,i,s,r){const o="reset"===r,a=this.chart,l=a.chartArea,u=(l.left+l.right)/2,f=(l.top+l.bottom)/2,p=o&&a.options.animation.animateScale,g=p?0:this.innerRadius,m=p?0:this.outerRadius,{sharedOptions:_,includeOptions:y}=this._getSharedOptions(i,r);let C,x=this._getRotation();for(C=0;C<i;++C)x+=this._circumference(C,o);for(C=i;C<i+s;++C){const v=this._circumference(C,o),b=t[C],w={x:u+this.offsetX,y:f+this.offsetY,startAngle:x,endAngle:x+v,circumference:v,outerRadius:m,innerRadius:g};y&&(w.options=_||this.resolveDataElementOptions(C,b.active?"active":r)),x+=v,this.updateElement(b,C,w,r)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let r,s=0;for(r=0;r<i.length;r++){const o=t._parsed[r];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!i[r].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?le*(Math.abs(t)/i):0}getLabelAndValue(t){const s=this.chart,r=s.data.labels||[],o=ms(this._cachedMeta._parsed[t],s.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let i=0;const s=this.chart;let r,o,a,l,c;if(!t)for(r=0,o=s.data.datasets.length;r<o;++r)if(s.isDatasetVisible(r)){a=s.getDatasetMeta(r),t=a.data,l=a.controller;break}if(!t)return 0;for(r=0,o=t.length;r<o;++r)c=l.resolveDataElementOptions(r),"inner"!==c.borderAlign&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let s=0,r=t.length;s<r;++s){const o=this.resolveDataElementOptions(s);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(t){return Math.max(Z(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n.id="doughnut",n.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},n.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return t.labels.map((s,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const i=": "+e.formattedValue;return Te(t)?(t=t.slice(),t[0]+=i):t+=i,t}}}}},n})(),mm=(()=>{class n extends Gt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:s,data:r=[],_dataset:o}=i,a=this.chart._animationsDisabled;let{start:l,count:c}=bc(i,r,a);this._drawStart=l,this._drawCount=c,Cc(i)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:d},t),this.updateElements(r,l,c,t)}updateElements(t,i,s,r){const o="reset"===r,{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(i,r),p=a.axis,g=l.axis,{spanGaps:m,segment:_}=this.options,y=bn(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||o||"none"===r;let C=i>0&&this.getParsed(i-1);for(let v=i;v<i+s;++v){const b=t[v],w=this.getParsed(v),T=x?b:{},S=ee(w[g]),E=T[p]=a.getPixelForValue(w[p],v),P=T[g]=o||S?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,w,c):w[g],v);T.skip=isNaN(E)||isNaN(P)||S,T.stop=v>0&&Math.abs(w[p]-C[p])>y,_&&(T.parsed=w,T.raw=d.data[v]),f&&(T.options=u||this.resolveDataElementOptions(v,b.active?"active":r)),x||this.updateElement(b,v,T,r),C=w}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,s=i.options&&i.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n.id="line",n.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},n.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},n})(),_m=(()=>{class n extends Gt{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const s=this.chart,r=s.data.labels||[],o=ms(this._cachedMeta._parsed[t].r,s.options.locale);return{label:r[t]||"",value:o}}parseObjectData(t,i,s,r){return Gc.bind(this)(t,i,s,r)}update(t){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((s,r)=>{const o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const t=this.chart,i=t.chartArea,s=t.options,r=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(r/2,0),l=(o-Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,i,s,r){const o="reset"===r,a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,f=d.yCenter,p=d.getIndexAngle(0)-.5*we;let m,g=p;const _=360/this.countVisibleElements();for(m=0;m<i;++m)g+=this._computeAngle(m,r,_);for(m=i;m<i+s;m++){const y=t[m];let x=g,C=g+this._computeAngle(m,r,_),v=a.getDataVisibility(m)?d.getDistanceFromCenterForValue(this.getParsed(m).r):0;g=C,o&&(c.animateScale&&(v=0),c.animateRotate&&(x=C=p));const b={x:u,y:f,innerRadius:0,outerRadius:v,startAngle:x,endAngle:C,options:this.resolveDataElementOptions(m,y.active?"active":r)};this.updateElement(y,m,b,r)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((s,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&i++}),i}_computeAngle(t,i,s){return this.chart.getDataVisibility(t)?Lt(this.resolveDataElementOptions(t,i).angle||s):0}}return n.id="polarArea",n.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},n.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return t.labels.map((s,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},n})(),ym=(()=>{class n extends _h{}return n.id="pie",n.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},n})(),xm=(()=>{class n extends Gt{getLabelAndValue(t){const i=this._cachedMeta.vScale,s=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(s[i.axis])}}parseObjectData(t,i,s,r){return Gc.bind(this)(t,i,s,r)}update(t){const i=this._cachedMeta,s=i.dataset,r=i.data||[],o=i.iScale.getLabels();if(s.points=r,"resize"!==t){const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0),this.updateElement(s,void 0,{_loop:!0,_fullLoop:o.length===r.length,options:a},t)}this.updateElements(r,0,r.length,t)}updateElements(t,i,s,r){const o=this._cachedMeta.rScale,a="reset"===r;for(let l=i;l<i+s;l++){const c=t[l],d=this.resolveDataElementOptions(l,c.active?"active":r),u=o.getPointPositionForValue(l,this.getParsed(l).r),f=a?o.xCenter:u.x,p=a?o.yCenter:u.y,g={x:f,y:p,angle:u.angle,skip:isNaN(f)||isNaN(p),options:d};this.updateElement(c,l,g,r)}}}return n.id="radar",n.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},n.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},n})();class Pt{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return bn(this.x)&&bn(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}Pt.defaults={},Pt.defaultRoutes=void 0;const yh={values:n=>Te(n)?n:""+n,numeric(n,e,t){if(0===n)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=function vm(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}(n,t)}const o=Ct(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ms(n,i,l)},logarithmic(n,e,t){if(0===n)return"0";const i=n/Math.pow(10,Math.floor(Ct(n)));return 1===i||2===i||5===i?yh.numeric.call(this,n,e,t):""}};var Cr={formatters:yh};function wr(n,e,t,i,s){const r=Z(i,0),o=Math.min(Z(s,n.length),n.length);let l,c,d,a=0;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),d=r;d<0;)a++,d=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===d&&(e.push(n[c]),a++,d=Math.round(r+a*t))}oe.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,e)=>e.lineWidth,tickColor:(n,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Cr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),oe.route("scale.ticks","color","","color"),oe.route("scale.grid","color","","borderColor"),oe.route("scale.grid","borderColor","","borderColor"),oe.route("scale.title","color","","color"),oe.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&"callback"!==n&&"parser"!==n,_indexable:n=>"borderDash"!==n&&"tickBorderDash"!==n}),oe.describe("scales",{_fallback:"scale"}),oe.describe("scale.ticks",{_scriptable:n=>"backdropPadding"!==n&&"callback"!==n,_indexable:n=>"backdropPadding"!==n});const xh=(n,e,t)=>"top"===e||"left"===e?n[e]+t:n[e]-t;function vh(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function Mm(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let c,l=n.getPixelForTick(s);if(!(t&&(c=1===i?Math.max(l-r,o-l):0===e?(n.getPixelForTick(1)-l)/2:(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function ys(n){return n.drawTicks?n.tickLength:0}function bh(n,e){if(!n.display)return 0;const t=Ne(n.font,e),i=Qe(n.padding);return(Te(n.text)?n.text.length:1)*t.lineHeight+i.height}function Om(n,e,t){let i=Ko(n);return(t&&"right"!==e||!t&&"right"===e)&&(i=(n=>"left"===n?"right":"right"===n?"left":n)(i)),i}class nn extends Pt{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=Ye(e,Number.POSITIVE_INFINITY),t=Ye(t,Number.NEGATIVE_INFINITY),i=Ye(i,Number.POSITIVE_INFINITY),s=Ye(s,Number.NEGATIVE_INFINITY),{min:Ye(e,i),max:Ye(t,s),minDefined:ke(e),maxDefined:ke(t)}}getMinMax(e){let o,{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds();if(s&&r)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:Ye(t,Ye(i,t)),max:Ye(i,Ye(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){be(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function rg(n,e,t){const{min:i,max:s}=n,r=ii(e,(s-i)/2),o=(a,l)=>t&&0===a?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?vh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function bm(n,e){const t=n.options.ticks,i=t.maxTicksLimit||function Cm(n){const e=n.options.offset,t=n._tickSize();return Math.floor(Math.min(n._length/t+(e?0:1),n._maxLength/t))}(n),s=t.major.enabled?function Im(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}(e):[],r=s.length,o=s[0],a=s[r-1],l=[];if(r>i)return function Tm(n,e,t,i){let o,s=0,r=t[0];for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(e.push(n[o]),s++,r=t[s*i])}(e,l,s,r/i),l;const c=function wm(n,e,t){const i=function Sm(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}(n),s=e.length/t;if(!i)return Math.max(s,1);const r=function _p(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i==0&&(e.push(i),e.push(n/i));return t===(0|t)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}(s,e,i);if(r>0){let d,u;const f=r>1?Math.round((a-o)/(r-1)):null;for(wr(e,l,c,ee(f)?0:o-f,o),d=0,u=r-1;d<u;d++)wr(e,l,c,s[d],s[d+1]);return wr(e,l,c,a,ee(f)?e.length:a+f),l}return wr(e,l,c),l}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,i,e=this.options.reverse;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){be(this.options.afterUpdate,[this])}beforeSetDimensions(){be(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){be(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),be(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){be(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=be(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){be(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){be(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=this.ticks.length,s=t.minRotation||0,r=t.maxRotation;let a,l,c,o=s;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const d=this._getLabelSizes(),u=d.widest.width,f=d.highest.height,p=Ke(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),u+6>a&&(a=p/(i-(e.offset?.5:1)),l=this.maxHeight-ys(e.grid)-t.padding-bh(e.title,this.chart.options.font),c=Math.sqrt(u*u+f*f),o=Vo(Math.min(Math.asin(Ke((d.highest.height+6)/a,-1,1)),Math.asin(Ke(l/c,-1,1))-Math.asin(Ke(f/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){be(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){be(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=bh(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=ys(r)+l):(e.height=this.maxHeight,e.width=ys(r)+l),i.display&&this.ticks.length){const{first:c,last:d,widest:u,highest:f}=this._getLabelSizes(),p=2*i.padding,g=Lt(this.labelRotation),m=Math.cos(g),_=Math.sin(g);a?e.height=Math.min(this.maxHeight,e.height+(i.mirror?0:_*u.width+m*f.height)+p):e.width=Math.min(this.maxWidth,e.width+(i.mirror?0:m*u.width+_*f.height)+p),this._calculatePadding(c,d,_,m)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=0!==this.labelRotation,c="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=s*e.width,p=i*t.height):(f=i*e.height,p=s*t.width):"start"===r?p=t.width:"end"===r?f=e.width:"inner"!==r&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-u+o)*this.width/(this.width-u),0)}else{let d=t.height/2,u=e.height/2;"start"===r?(d=0,u=e.height):"end"===r&&(d=t.height,u=0),this.paddingTop=d+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){be(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)ee(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=vh(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,t){const{ctx:i,_longestTextCache:s}=this,r=[],o=[];let c,d,u,f,p,g,m,_,y,x,C,a=0,l=0;for(c=0;c<t;++c){if(f=e[c].label,p=this._resolveTickFontOptions(c),i.font=g=p.string,m=s[g]=s[g]||{data:{},gc:[]},_=p.lineHeight,y=x=0,ee(f)||Te(f)){if(Te(f))for(d=0,u=f.length;d<u;++d)C=f[d],!ee(C)&&!Te(C)&&(y=mr(i,m.data,m.gc,y,C),x+=_)}else y=mr(i,m.data,m.gc,y,f),x=_;r.push(y),o.push(x),a=Math.max(y,a),l=Math.max(x,l)}!function km(n,e){I(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}(s,t);const v=r.indexOf(a),b=o.indexOf(l),w=T=>({width:r[T]||0,height:o[T]||0});return{first:w(0),last:w(t-1),widest:w(v),highest:w(b),widths:r,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function vp(n){return Ke(n,-32768,32767)}(this._alignToPixels?$i(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function Dm(n,e,t){return ki(n,{tick:t,index:e,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=function Rm(n,e){return ki(n,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Lt(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:o}=s,a=r.offset,l=this.isHorizontal(),d=this.ticks.length+(a?1:0),u=ys(r),f=[],p=r.setContext(this.getContext()),g=p.drawBorder?p.borderWidth:0,m=g/2,_=function(R){return $i(i,R,g)};let y,x,C,v,b,w,T,S,E,P,A,F;if("top"===o)y=_(this.bottom),w=this.bottom-u,S=y-m,P=_(e.top)+m,F=e.bottom;else if("bottom"===o)y=_(this.top),P=e.top,F=_(e.bottom)-m,w=y+m,S=this.top+u;else if("left"===o)y=_(this.right),b=this.right-u,T=y-m,E=_(e.left)+m,A=e.right;else if("right"===o)y=_(this.left),E=e.left,A=_(e.right)-m,b=y+m,T=this.left+u;else if("x"===t){if("center"===o)y=_((e.top+e.bottom)/2+.5);else if(ne(o)){const R=Object.keys(o)[0];y=_(this.chart.scales[R].getPixelForValue(o[R]))}P=e.top,F=e.bottom,w=y+m,S=w+u}else if("y"===t){if("center"===o)y=_((e.left+e.right)/2);else if(ne(o)){const R=Object.keys(o)[0];y=_(this.chart.scales[R].getPixelForValue(o[R]))}b=y-m,T=b-u,E=e.left,A=e.right}const W=Z(s.ticks.maxTicksLimit,d),re=Math.max(1,Math.ceil(d/W));for(x=0;x<d;x+=re){const R=r.setContext(this.getContext(x)),z=R.lineWidth,L=R.color,j=R.borderDash||[],ge=R.borderDashOffset,q=R.tickWidth,ce=R.tickColor,ie=R.tickBorderDash||[],Se=R.tickBorderDashOffset;C=Mm(this,x,a),void 0!==C&&(v=$i(i,C,z),l?b=T=E=A=v:w=S=P=F=v,f.push({tx1:b,ty1:w,tx2:T,ty2:S,x1:E,y1:P,x2:A,y2:F,width:z,color:L,borderDash:j,borderDashOffset:ge,tickWidth:q,tickColor:ce,tickBorderDash:ie,tickBorderDashOffset:Se}))}return this._ticksLength=d,this._borderValue=y,f}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:u}=r,f=ys(i.grid),p=f+d,g=u?-d:p,m=-Lt(this.labelRotation),_=[];let y,x,C,v,b,w,T,S,E,P,A,F,W="middle";if("top"===s)w=this.bottom-g,T=this._getXAxisLabelAlignment();else if("bottom"===s)w=this.top+g,T=this._getXAxisLabelAlignment();else if("left"===s){const R=this._getYAxisLabelAlignment(f);T=R.textAlign,b=R.x}else if("right"===s){const R=this._getYAxisLabelAlignment(f);T=R.textAlign,b=R.x}else if("x"===t){if("center"===s)w=(e.top+e.bottom)/2+p;else if(ne(s)){const R=Object.keys(s)[0];w=this.chart.scales[R].getPixelForValue(s[R])+p}T=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===s)b=(e.left+e.right)/2-p;else if(ne(s)){const R=Object.keys(s)[0];b=this.chart.scales[R].getPixelForValue(s[R])}T=this._getYAxisLabelAlignment(f).textAlign}"y"===t&&("start"===l?W="top":"end"===l&&(W="bottom"));const re=this._getLabelSizes();for(y=0,x=a.length;y<x;++y){C=a[y],v=C.label;const R=r.setContext(this.getContext(y));S=this.getPixelForTick(y)+r.labelOffset,E=this._resolveTickFontOptions(y),P=E.lineHeight,A=Te(v)?v.length:1;const z=A/2,L=R.color,j=R.textStrokeColor,ge=R.textStrokeWidth;let ce,q=T;if(o?(b=S,"inner"===T&&(q=y===x-1?this.options.reverse?"left":"right":0===y?this.options.reverse?"right":"left":"center"),F="top"===s?"near"===c||0!==m?-A*P+P/2:"center"===c?-re.highest.height/2-z*P+P:P/2-re.highest.height:"near"===c||0!==m?P/2:"center"===c?re.highest.height/2-z*P:re.highest.height-A*P,u&&(F*=-1)):(w=S,F=(1-A)*P/2),R.showLabelBackdrop){const ie=Qe(R.backdropPadding),Se=re.heights[y],D=re.widths[y];let Ee=w+F-ie.top,$e=b-ie.left;switch(W){case"middle":Ee-=Se/2;break;case"bottom":Ee-=Se}switch(T){case"center":$e-=D/2;break;case"right":$e-=D}ce={left:$e,top:Ee,width:D+ie.width,height:Se+ie.height,color:R.backdropColor}}_.push({rotation:m,label:v,font:E,color:L,strokeColor:j,strokeWidth:ge,textOffset:F,textAlign:q,textBaseline:W,translation:[b,w],backdrop:ce})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Lt(this.labelRotation))return"top"===e?"left":"right";let s="center";return"start"===t.align?s="left":"end"===t.align?s="right":"inner"===t.align&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,a=e+r,l=this._getLabelSizes().widest.width;let c,d;return"left"===t?s?(d=this.right+r,"near"===i?c="left":"center"===i?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,"near"===i?c="right":"center"===i?(c="center",d-=l/2):(c="left",d=this.left)):"right"===t?s?(d=this.left+r,"near"===i?c="right":"center"===i?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,"near"===i?c="left":"center"===i?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const l=s[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:i}}=this,s=i.setContext(this.getContext()),r=i.drawBorder?s.borderWidth:0;if(!r)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=$i(e,this.left,r)-r/2,c=$i(e,this.right,o)+o/2,d=u=a):(d=$i(e,this.top,r)-r/2,u=$i(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=s.borderWidth,t.strokeStyle=s.borderColor,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&_r(i,s);const r=this._labelItems||(this._labelItems=this._computeLabelItems(e));let o,a;for(o=0,a=r.length;o<a;++o){const l=r[o],c=l.font,d=l.label;l.backdrop&&(i.fillStyle=l.backdrop.color,i.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height)),qi(i,d,0,l.textOffset,c,l)}s&&yr(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=Ne(i.font),o=Qe(i.padding),a=i.align;let l=r.lineHeight/2;"bottom"===t||"center"===t||ne(t)?(l+=o.bottom,Te(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:u,rotation:f}=function Lm(n,e,t,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:d}=l;let f,p,g,u=0;const m=o-s,_=a-r;if(n.isHorizontal()){if(p=Je(i,r,a),ne(t)){const y=Object.keys(t)[0];g=d[y].getPixelForValue(t[y])+m-e}else g="center"===t?(c.bottom+c.top)/2+m-e:xh(n,t,e);f=a-r}else{if(ne(t)){const y=Object.keys(t)[0];p=d[y].getPixelForValue(t[y])-_+e}else p="center"===t?(c.left+c.right)/2-_+e:xh(n,t,e);g=Je(i,o,s),u="left"===t?-Le:Le}return{titleX:p,titleY:g,maxWidth:f,rotation:u}}(this,l,t,a);qi(e,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:f,textAlign:Om(a,t,s),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Z(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===nn.prototype.draw?[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]:[{z:t,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){return Ne(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ir{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function Am(n){return"id"in n&&"defaults"in n})(t)&&(i=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,function Pm(n,e,t){const i=H(Object.create(null),[t?oe.get(t):{},oe.get(e),n.defaults]);oe.set(e,i),n.defaultRoutes&&function Fm(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");oe.route(r,s,l,a)})}(e,n.defaultRoutes),n.descriptors&&oe.describe(e,n.descriptors)}(e,o,i),this.override&&oe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in oe[s]&&(delete oe[s][i],this.override&&delete Xi[i])}}var jt=new class zm{constructor(){this.controllers=new Ir(Gt,"datasets",!0),this.elements=new Ir(Pt,"elements"),this.plugins=new Ir(Object,"plugins"),this.scales=new Ir(nn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):I(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const s=ni(e);be(i["before"+s],[],i),t[e](i),be(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(void 0===s)throw new Error('"'+e+'" is not a registered '+i+".");return s}},Hm=Object.freeze({__proto__:null,BarController:fm,BubbleController:pm,DoughnutController:_h,LineController:mm,PolarAreaController:_m,PieController:ym,RadarController:xm,ScatterController:(()=>{class n extends Gt{update(t){const i=this._cachedMeta,{data:s=[]}=i,r=this.chart._animationsDisabled;let{start:o,count:a}=bc(i,s,r);if(this._drawStart=o,this._drawCount=a,Cc(i)&&(o=0,a=s.length),this.options.showLine){const{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=s;const d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:d},t)}this.updateElements(s,o,a,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=jt.getElement("line")),super.addElements()}updateElements(t,i,s,r){const o="reset"===r,{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(i,r),f=this.getSharedOptions(u),p=this.includeOptions(r,f),g=a.axis,m=l.axis,{spanGaps:_,segment:y}=this.options,x=bn(_)?_:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||o||"none"===r;let v=i>0&&this.getParsed(i-1);for(let b=i;b<i+s;++b){const w=t[b],T=this.getParsed(b),S=C?w:{},E=ee(T[m]),P=S[g]=a.getPixelForValue(T[g],b),A=S[m]=o||E?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,T,c):T[m],b);S.skip=isNaN(P)||isNaN(A)||E,S.stop=b>0&&Math.abs(T[g]-v[g])>x,y&&(S.parsed=T,S.raw=d.data[b]),p&&(S.options=f||this.resolveDataElementOptions(b,w.active?"active":r)),C||this.updateElement(w,b,S,r),v=T}this.updateSharedOptions(f,r,u)}getMaxOverflow(){const t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const s=t.dataset,r=s.options&&s.options.borderWidth||0;if(!i.length)return r;const o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,o,a)/2}}return n.id="scatter",n.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},n.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},n})()});function sn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Vm={_date:(()=>{class n{constructor(t){this.options=t||{}}init(t){}formats(){return sn()}parse(t,i){return sn()}format(t,i){return sn()}add(t,i,s){return sn()}diff(t,i,s){return sn()}startOf(t,i,s){return sn()}endOf(t,i){return sn()}}return n.override=function(e){Object.assign(n.prototype,e)},n})()};function Nm(n,e,t,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&r.length){const l=a._reversePixels?bp:oi;if(!i)return l(r,e,t);if(s._sharedOptions){const c=r[0],d="function"==typeof c.getRange&&c.getRange(e);if(d){const u=l(r,e,t-d),f=l(r,e,t+d);return{lo:u.lo,hi:f.hi}}}}return{lo:0,hi:r.length-1}}function xs(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:d}=r[a],{lo:u,hi:f}=Nm(r[a],e,o,s);for(let p=u;p<=f;++p){const g=d[p];g.skip||i(g,c,p)}}}function aa(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||xs(n,t,e,function(a,l,c){!s&&!fs(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function la(n,e,t,i,s,r){return r||n.isPointInArea(e)?"r"!==t||i?function Wm(n,e,t,i,s,r){let o=[];const a=function Bm(n){const e=-1!==n.indexOf("x"),t=-1!==n.indexOf("y");return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(t);let l=Number.POSITIVE_INFINITY;return xs(n,t,e,function c(d,u,f){const p=d.inRange(e.x,e.y,s);if(i&&!p)return;const g=d.getCenterPoint(s);if(!r&&!n.isPointInArea(g)&&!p)return;const _=a(e,g);_<l?(o=[{element:d,datasetIndex:u,index:f}],l=_):_===l&&o.push({element:d,datasetIndex:u,index:f})}),o}(n,e,t,i,s,r):function Km(n,e,t,i){let s=[];return xs(n,t,e,function r(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:u}=gc(o,{x:e.x,y:e.y});ls(u,c,d)&&s.push({element:o,datasetIndex:a,index:l})}),s}(n,e,t,s):[]}function Ch(n,e,t,i,s){const r=[],o="x"===t?"inXRange":"inYRange";let a=!1;return xs(n,t,e,(l,c,d)=>{l[o](e[t],s)&&(r.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var Gm={evaluateInteractionItems:xs,modes:{index(n,e,t,i){const s=en(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?aa(n,s,r,i,o):la(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,u=c.data[d];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:d})}),l):[]},dataset(n,e,t,i){const s=en(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?aa(n,s,r,i,o):la(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point:(n,e,t,i)=>aa(n,en(e,n),t.axis||"xy",i,t.includeInvisible||!1),nearest:(n,e,t,i)=>la(n,en(e,n),t.axis||"xy",t.intersect,i,t.includeInvisible||!1),x:(n,e,t,i)=>Ch(n,en(e,n),"x",t.intersect,i),y:(n,e,t,i)=>Ch(n,en(e,n),"y",t.intersect,i)}};const wh=["left","top","right","bottom"];function vs(n,e){return n.filter(t=>t.pos===e)}function Ih(n,e){return n.filter(t=>-1===wh.indexOf(t.pos)&&t.box.axis===e)}function bs(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Th(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function Sh(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Xm(n,e,t,i){const{pos:s,box:r}=t,o=n.maxPadding;if(!ne(s)){t.size&&(n[s]-=t.size);const u=i[t.stack]||{size:0,count:1};u.size=Math.max(u.size,t.horizontal?r.height:r.width),t.size=u.size/u.count,n[s]+=t.size}r.getPadding&&Sh(o,r.getPadding());const a=Math.max(0,e.outerWidth-Th(o,n,"left","right")),l=Math.max(0,e.outerHeight-Th(o,n,"top","bottom")),c=a!==n.w,d=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:d}:{same:d,other:c}}function qm(n,e){const t=e.maxPadding;return function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}(n?["left","right"]:["top","bottom"])}function Cs(n,e,t,i){const s=[];let r,o,a,l,c,d;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,qm(a.horizontal,e));const{same:u,other:f}=Xm(e,t,a,i);c|=u&&s.length,d=d||f,l.fullSize||s.push(a)}return c&&Cs(s,e,t,i)||d}function Tr(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function Eh(n,e,t,i){const s=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const u=e.w*d,f=c.size||l.height;He(c.start)&&(o=c.start),l.fullSize?Tr(l,s.left,o,t.outerWidth-s.right-s.left,f):Tr(l,e.left+c.placed,o,u,f),c.start=o,c.placed+=u,o=l.bottom}else{const u=e.h*d,f=c.size||l.width;He(c.start)&&(r=c.start),l.fullSize?Tr(l,r,s.top,f,t.outerHeight-s.bottom-s.top):Tr(l,r,e.top+c.placed,f,u),c.start=r,c.placed+=u,r=l.right}}e.x=r,e.y=o}oe.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var et={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;-1!==t&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=Qe(n.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),a=function Zm(n){const e=function jm(n){const e=[];let t,i,s,r,o,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],({position:r,options:{stack:o,stackWeight:a=1}}=s),e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}(n),t=bs(e.filter(c=>c.box.fullSize),!0),i=bs(vs(e,"left"),!0),s=bs(vs(e,"right")),r=bs(vs(e,"top"),!0),o=bs(vs(e,"bottom")),a=Ih(e,"x"),l=Ih(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:vs(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}(n.boxes),l=a.vertical,c=a.horizontal;I(n.boxes,m=>{"function"==typeof m.beforeLayout&&m.beforeLayout()});const d=l.reduce((m,_)=>_.box.options&&!1===_.box.options.display?m:m+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},s);Sh(f,Qe(i));const p=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),g=function Um(n,e){const t=function Ym(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!wh.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=t[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=d?d*s:l&&e.availableHeight)}return t}(l.concat(c),u);Cs(a.fullSize,p,u,g),Cs(l,p,u,g),Cs(c,p,u,g)&&Cs(l,p,u,g),function $m(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(p),Eh(a.leftAndTop,p,u,g),p.x+=p.w,p.y+=p.h,Eh(a.rightAndBottom,p,u,g),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},I(a.chartArea,m=>{const _=m.box;Object.assign(_,n.chartArea),_.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Mh{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class Jm extends Mh{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Sr="$chartjs",Qm={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kh=n=>null===n||""===n,Rh=!!Mg&&{passive:!0};function i_(n,e,t){n.canvas.removeEventListener(e,t,Rh)}function Er(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function s_(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Er(a.addedNodes,i),o=o&&!Er(a.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function r_(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Er(a.removedNodes,i),o=o&&!Er(a.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const ws=new Map;let Dh=0;function Oh(){const n=window.devicePixelRatio;n!==Dh&&(Dh=n,ws.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function l_(n,e,t){const i=n.canvas,s=i&&ia(i);if(!s)return;const r=vc((a,l)=>{const c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;0===c&&0===d||r(c,d)});return o.observe(s),function o_(n,e){ws.size||window.addEventListener("resize",Oh),ws.set(n,e)}(n,r),o}function ca(n,e,t){t&&t.disconnect(),"resize"===e&&function a_(n){ws.delete(n),ws.size||window.removeEventListener("resize",Oh)}(n)}function c_(n,e,t){const i=n.canvas,s=vc(r=>{null!==n.ctx&&t(function n_(n,e){const t=Qm[n.type]||n.type,{x:i,y:s}=en(n,e);return{type:t,chart:e,native:n,x:void 0!==i?i:null,y:void 0!==s?s:null}}(r,n))},n,r=>{const o=r[0];return[o,o.offsetX,o.offsetY]});return function t_(n,e,t){n.addEventListener(e,t,Rh)}(i,e,s),s}class h_ extends Mh{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function e_(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Sr]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",kh(s)){const r=Zc(n,"width");void 0!==r&&(n.width=r)}if(kh(i))if(""===n.style.height)n.height=n.width/(e||2);else{const r=Zc(n,"height");void 0!==r&&(n.height=r)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Sr])return!1;const i=t[Sr].initial;["height","width"].forEach(r=>{const o=i[r];ee(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[Sr],!0}addEventListener(e,t,i){this.removeEventListener(e,t),(e.$proxies||(e.$proxies={}))[t]=({attach:s_,detach:r_,resize:l_}[t]||c_)(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];s&&(({attach:ca,detach:ca,resize:ca}[t]||i_)(e,t,s),i[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return function Eg(n,e,t,i){const s=br(n),r=Qi(s,"margin"),o=vr(s.maxWidth,n,"clientWidth")||hr,a=vr(s.maxHeight,n,"clientHeight")||hr,l=function Sg(n,e,t){let i,s;if(void 0===e||void 0===t){const r=ia(n);if(r){const o=r.getBoundingClientRect(),a=br(r),l=Qi(a,"border","width"),c=Qi(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=vr(a.maxWidth,r,"clientWidth"),s=vr(a.maxHeight,r,"clientHeight")}else e=n.clientWidth,t=n.clientHeight}return{width:e,height:t,maxWidth:i||hr,maxHeight:s||hr}}(n,e,t);let{width:c,height:d}=l;if("content-box"===s.boxSizing){const u=Qi(s,"border","width"),f=Qi(s,"padding");c-=f.width+u.width,d-=f.height+u.height}return c=Math.max(0,c-r.width),d=Math.max(0,i?Math.floor(c/i):d-r.height),c=na(Math.min(c,o,l.maxWidth)),d=na(Math.min(d,a,l.maxHeight)),c&&!d&&(d=na(c/2)),{width:c,height:d}}(e,t,i,s)}isAttached(e){const t=ia(e);return!(!t||!t.isConnected)}}class u_{constructor(){this._init=[]}notify(e,t,i,s){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,i);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,s){s=s||{};for(const r of e){const o=r.plugin;if(!1===be(o[i],[t,s,r.options],o)&&s.cancelable)return!1}return!0}invalidate(){ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=Z(i.options&&i.options.plugins,{}),r=function f_(n){const e={},t=[],i=Object.keys(jt.plugins.items);for(let r=0;r<i.length;r++)t.push(jt.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];-1===t.indexOf(o)&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}(i);return!1!==s||t?function g_(n,{plugins:e,localIds:t},i,s){const r=[],o=n.getContext();for(const a of e){const l=a.id,c=p_(i[l],s);null!==c&&r.push({plugin:a,options:m_(n.config,{plugin:a,local:t[l]},c,o)})}return r}(e,r,s,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function p_(n,e){return e||!1!==n?!0===n?{}:n:null}function m_(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ha(n,e){return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||(oe.datasets[n]||{}).indexAxis||"x"}function da(n,e){return"x"===n||"y"===n?n:e.axis||function x_(n){return"top"===n||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0}(e.position)||n.charAt(0).toLowerCase()}function Lh(n){const e=n.options||(n.options={});e.plugins=Z(e.plugins,{}),e.scales=function v_(n,e){const t=Xi[n.type]||{scales:{}},i=e.scales||{},s=ha(n.type,e),r=Object.create(null),o=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!ne(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=da(a,l),d=function y_(n,e){return n===e?"_index_":"_value_"}(c,s),u=t.scales||{};r[c]=r[c]||a,o[a]=B(Object.create(null),[{axis:c},l,u[c],u[d]])}),n.data.datasets.forEach(a=>{const l=a.type||n.type,c=a.indexAxis||ha(l,e),u=(Xi[l]||{}).scales||{};Object.keys(u).forEach(f=>{const p=function __(n,e){let t=n;return"_index_"===n?t=e:"_value_"===n&&(t="x"===e?"y":"x"),t}(f,c),g=a[p+"AxisID"]||r[p]||p;o[g]=o[g]||Object.create(null),B(o[g],[{axis:p},i[g],u[f]])})}),Object.keys(o).forEach(a=>{const l=o[a];B(l,[oe.scales[l.type],oe.scale])}),o}(n,e)}function Ph(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}const Fh=new Map,Ah=new Set;function Mr(n,e){let t=Fh.get(n);return t||(t=e(),Fh.set(n,t),Ah.add(t)),t}const Is=(n,e,t)=>{const i=_e(e,t);void 0!==i&&n.add(i)};class C_{constructor(e){this._config=function b_(n){return(n=n||{}).data=Ph(n.data),Lh(n),n}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ph(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Lh(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Mr(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Mr(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Mr(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return Mr(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(d=>{e&&(l.add(e),d.forEach(u=>Is(l,e,u))),d.forEach(u=>Is(l,s,u)),d.forEach(u=>Is(l,Xi[r]||{},u)),d.forEach(u=>Is(l,oe,u)),d.forEach(u=>Is(l,Xo,u))});const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),Ah.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Xi[t]||{},oe.datasets[t]||{},{type:t},oe,Xo]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=zh(this._resolverCache,e,s);let l=o;(function I_(n,e){const{isScriptable:t,isIndexable:i}=Hc(n);for(const s of e){const r=t(s),o=i(s),a=(o||r)&&n[s];if(r&&(ot(a)||w_(a))||o&&Te(a))return!0}return!1})(o,t)&&(r.$shared=!1,l=wn(o,i=ot(i)?i():i,this.createResolver(e,i,a)));for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=zh(this._resolverCache,e,i);return ne(t)?wn(r,t,void 0,s):r}}function zh(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:Qo(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const w_=n=>ne(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||ot(n[t]),!1),S_=["top","bottom","left","right","chartArea"];function Hh(n,e){return"top"===n||"bottom"===n||-1===S_.indexOf(n)&&"x"===e}function Vh(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function Nh(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),be(t&&t.onComplete,[n],e)}function E_(n){const e=n.chart,t=e.options.animation;be(t&&t.onProgress,[n],e)}function Bh(n){return Yc()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const kr={},Kh=n=>{const e=Bh(n);return Object.values(kr).filter(t=>t.canvas===e).pop()};function M_(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const o=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=o)}}}class ua{constructor(e,t){const i=this.config=new C_(t),s=Bh(e),r=Kh(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function d_(n){return!Yc()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Jm:h_}(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;this.id=Zi(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new u_,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Ip(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],kr[this.id]=this,a&&l?(li.listen(this,"complete",Nh),li.listen(this,"progress",E_),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return ee(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Uc(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fc(this.canvas,this.ctx),this}stop(){return li.stop(this),this}resize(e,t){li.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,o=this.platform.getMaximumSize(this.canvas,e,t,i.maintainAspectRatio&&this.aspectRatio),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Uc(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),be(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){I(this.options.scales||{},(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=da(o,a),c="r"===l,d="x"===l;return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),I(r,o=>{const a=o.options,l=a.id,c=da(l,a),d=Z(a.type,o.dtype);(void 0===a.position||Hh(a.position,c)!==Hh(o.dposition))&&(a.position=o.dposition),s[l]=!0;let u=null;l in i&&i[l].type===d?u=i[l]:(u=new(jt.getScale(d))({id:l,type:d,ctx:this.ctx,chart:this}),i[u.id]=u),u.init(a,e)}),I(s,(o,a)=>{o||delete i[a]}),I(i,o=>{et.configure(this,o,o.options),et.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Vh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{0===t.filter(r=>r===i._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||ha(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=jt.getController(a),{datasetElementType:c,dataElementType:d}=oe.datasets[a];Object.assign(l.prototype,{dataElementType:jt.getElement(d),datasetElementType:c&&jt.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){I(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:u}=this.getDatasetMeta(c),f=!s&&-1===r.indexOf(u);u.buildOrUpdateElements(f),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||I(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Vh("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){I(this.scales,e=>{et.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!si(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t)M_(e,s,"_removeElements"===i?-r:r)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!si(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;et.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],I(this.boxes,s=>{i&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,ot(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(li.has(this)?this.attached&&!li.running(this)&&li.start(this):(this.draw(),Nh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,s=!i.disabled,r=this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(s&&_r(t,{left:!1===i.left?0:r.left-i.left,right:!1===i.right?this.width:r.right+i.right,top:!1===i.top?0:r.top-i.top,bottom:!1===i.bottom?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&yr(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return fs(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=Gm.modes[t];return"function"==typeof r?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=ki(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);He(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),li.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Fc(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete kr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};I(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){I(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},I(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,o,a,l;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!M(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(d=>!c.some(u=>d.datasetIndex===u.datasetIndex&&d.index===u.index)),o=r(t,e),a=i?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,a=this._getActiveElements(e,s,i,t),l=function Ho(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}(e),c=function k_(n,e,t,i){return t&&"mouseout"!==n.type?i?e:n:null}(e,this._lastEvent,i,l);i&&(this._lastEvent=null,be(r.onHover,[e,a,this],this),l&&be(r.onClick,[e,a,this],this));const d=!M(a,s);return(d||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=c,d}_getActiveElements(e,t,i,s){if("mouseout"===e.type)return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}const Wh=()=>I(ua.instances,n=>n._plugins.invalidate()),Ri=!0;function Gh(n,e,t){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,t+c),l>s?(c=s/l,n.arc(r,o,l,t+c,i-c,!0)):n.arc(r,o,s,t+Le,i-Le),n.closePath(),n.clip()}function Sn(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function fa(n,e,t,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,u=Math.max(e.outerRadius+i+t-c,0),f=d>0?d+i+t+c:0;let p=0;const g=s-l;if(i){const L=((d>0?d-i:0)+(u>0?u-i:0))/2;p=(g-(0!==L?g*L/(L+i):g))/2}const _=(g-Math.max(.001,g*u-t/we)/u)/2,y=l+_+p,x=s-_-p,{outerStart:C,outerEnd:v,innerStart:b,innerEnd:w}=function D_(n,e,t,i){const s=function R_(n){return Jo(n,["outerStart","outerEnd","innerStart","innerEnd"])}(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(t-Math.min(r,l))*i/2;return Ke(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Ke(s.innerStart,0,o),innerEnd:Ke(s.innerEnd,0,o)}}(e,f,u,x-y),T=u-C,S=u-v,E=y+C/T,P=x-v/S,A=f+b,F=f+w,W=y+b/A,re=x-w/F;if(n.beginPath(),r){if(n.arc(o,a,u,E,P),v>0){const L=Sn(S,P,o,a);n.arc(L.x,L.y,v,P,x+Le)}const R=Sn(F,x,o,a);if(n.lineTo(R.x,R.y),w>0){const L=Sn(F,re,o,a);n.arc(L.x,L.y,w,x+Le,re+Math.PI)}if(n.arc(o,a,f,x-w/f,y+b/f,!0),b>0){const L=Sn(A,W,o,a);n.arc(L.x,L.y,b,W+Math.PI,y-Le)}const z=Sn(T,y,o,a);if(n.lineTo(z.x,z.y),C>0){const L=Sn(T,E,o,a);n.arc(L.x,L.y,C,y-Le,E)}}else{n.moveTo(o,a);const R=Math.cos(E)*u+o,z=Math.sin(E)*u+a;n.lineTo(R,z);const L=Math.cos(P)*u+o,j=Math.sin(P)*u+a;n.lineTo(L,j)}n.closePath()}Object.defineProperties(ua,{defaults:{enumerable:Ri,value:oe},instances:{enumerable:Ri,value:kr},overrides:{enumerable:Ri,value:Xi},registry:{enumerable:Ri,value:jt},version:{enumerable:Ri,value:"3.9.1"},getChart:{enumerable:Ri,value:Kh},register:{enumerable:Ri,value:(...n)=>{jt.add(...n),Wh()}},unregister:{enumerable:Ri,value:(...n)=>{jt.remove(...n),Wh()}}});class Rr extends Pt{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.getProps(["x","y"],i),{angle:r,distance:o}=gc(s,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=this.options.spacing/2,g=Z(u,l-a)>=le||ls(r,a,l),m=ri(o,c+f,d+f);return g&&m}getCenterPoint(e){const{x:t,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:c}=this.options,d=(s+r)/2,u=(o+a+c+l)/2;return{x:t+Math.cos(d)*u,y:i+Math.sin(d)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,s=(t.offset||0)/2,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>le?Math.floor(i/le):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=0;if(s){a=s/2;const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*a,Math.sin(c)*a),this.circumference>=we&&(a=s)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const l=function O_(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){fa(n,e,t,i,o+le,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+a%le,a%le==0&&(l+=le))}return fa(n,e,t,i,l,s),n.fill(),l}(e,this,a,r,o);(function P_(n,e,t,i,s,r){const{options:o}=e,{borderWidth:a,borderJoinStyle:l}=o,c="inner"===o.borderAlign;a&&(c?(n.lineWidth=2*a,n.lineJoin=l||"round"):(n.lineWidth=a,n.lineJoin=l||"bevel"),e.fullCircles&&function L_(n,e,t){const{x:i,y:s,startAngle:r,pixelMargin:o,fullCircles:a}=e,l=Math.max(e.outerRadius-o,0),c=e.innerRadius+o;let d;for(t&&Gh(n,e,r+le),n.beginPath(),n.arc(i,s,c,r+le,r,!0),d=0;d<a;++d)n.stroke();for(n.beginPath(),n.arc(i,s,l,r,r+le),d=0;d<a;++d)n.stroke()}(n,e,c),c&&Gh(n,e,s),fa(n,e,t,i,s,r),n.stroke())})(e,this,a,r,l,o),e.restore()}}function jh(n,e,t=e){n.lineCap=Z(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Z(t.borderDash,e.borderDash)),n.lineDashOffset=Z(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Z(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Z(t.borderWidth,e.borderWidth),n.strokeStyle=Z(t.borderColor,e.borderColor)}function F_(n,e,t){n.lineTo(t.x,t.y)}function Yh(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a);return{count:i,start:l,loop:e.loop,ilen:c<l&&!(s<o&&r<o||s>a&&r>a)?i+c-l:c-l}}function z_(n,e,t,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=Yh(s,t,i),d=function A_(n){return n.stepped?qp:n.tension||"monotone"===n.cubicInterpolationMode?Jp:F_}(r);let p,g,m,{move:u=!0,reverse:f}=i||{};for(p=0;p<=c;++p)g=s[(a+(f?c-p:p))%o],!g.skip&&(u?(n.moveTo(g.x,g.y),u=!1):d(n,m,g,f,r.stepped),m=g);return l&&(g=s[(a+(f?c:0))%o],d(n,m,g,f,r.stepped)),!!l}function H_(n,e,t,i){const s=e.points,{count:r,start:o,ilen:a}=Yh(s,t,i),{move:l=!0,reverse:c}=i||{};let f,p,g,m,_,y,d=0,u=0;const x=v=>(o+(c?a-v:v))%r,C=()=>{m!==_&&(n.lineTo(d,_),n.lineTo(d,m),n.lineTo(d,y))};for(l&&(p=s[x(0)],n.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=s[x(f)],p.skip)continue;const v=p.x,b=p.y,w=0|v;w===g?(b<m?m=b:b>_&&(_=b),d=(u*d+v)/++u):(C(),n.lineTo(v,b),g=w,u=0,m=_=b),y=b}C()}function pa(n){const e=n.options;return n._decimated||n._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?z_:H_}Rr.id="arc",Rr.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},Rr.defaultRoutes={backgroundColor:"backgroundColor"};const K_="function"==typeof Path2D;let Dr=(()=>{class n extends Pt{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const s=this.options;!s.tension&&"monotone"!==s.cubicInterpolationMode||s.stepped||this._pointsUpdated||(bg(this._points,s,t,s.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function zg(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=function Fg(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}(t,s,r,i);return function ih(n,e,t,i){return i&&i.setContext&&t?function Hg(n,e,t,i){const s=n._chart.getContext(),r=nh(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let d=r,u=e[0].start,f=u;function p(g,m,_,y){const x=a?-1:1;if(g!==m){for(g+=l;t[g%l].skip;)g-=x;for(;t[m%l].skip;)m+=x;g%l!=m%l&&(c.push({start:g%l,end:m%l,loop:_,style:y}),d=y,u=m%l)}}for(const g of e){u=a?u:g.start;let _,m=t[u%l];for(f=u+1;f<=g.end;f++){const y=t[f%l];_=nh(i.setContext(ki(s,{type:"segment",p0:m,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),Vg(_,d)&&p(u,f-1,g.loop,d),m=y,d=_}u<f-1&&p(u,f-1,g.loop,d)}return c}(n,e,t,i):e}(n,!0===i?[{start:o,end:a,loop:r}]:function Ag(n,e,t,i){const s=n.length,r=[];let l,o=e,a=n[e];for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?a.skip||(r.push({start:e%s,end:(l-1)%s,loop:i=!1}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return null!==o&&r.push({start:e%s,end:o%s,loop:i}),r}(t,o,a<o?a+s:a,!!n._fullLoop&&0===o&&a===s-1),t,e)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,s=t.length;return s&&this.points[t[s-1].end]}interpolate(t,i){const s=this.options,r=t[i],o=this.points,a=th(this,{property:i,start:r,end:r});if(!a.length)return;const l=[],c=function V_(n){return n.stepped?kg:n.tension||"monotone"===n.cubicInterpolationMode?Rg:tn}(s);let d,u;for(d=0,u=a.length;d<u;++d){const{start:f,end:p}=a[d],g=o[f],m=o[p];if(g===m){l.push(g);continue}const y=c(g,m,Math.abs((r-g[i])/(m[i]-g[i])),s.stepped);y[i]=t[i],l.push(y)}return 1===l.length?l[0]:l}pathSegment(t,i,s){return pa(this)(t,this,i,s)}path(t,i,s){const r=this.segments,o=pa(this);let a=this._loop;i=i||0,s=s||this.points.length-i;for(const l of r)a&=o(t,this,l,{start:i,end:i+s-1});return!!a}draw(t,i,s,r){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function W_(n,e,t,i){K_&&!e.options.segment?function N_(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),jh(n,e.options),n.stroke(s)}(n,e,t,i):function B_(n,e,t,i){const{segments:s,options:r}=e,o=pa(e);for(const a of s)jh(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}(n,e,t,i)}(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n.id="line",n.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e},n})();function Uh(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}let G_=(()=>{class n extends Pt{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,i){return Uh(this,t,"x",i)}inYRange(t,i){return Uh(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){let i=(t=t||this.options||{}).radius||0;return i=Math.max(i,i&&t.hoverRadius||0),2*(i+(i&&t.borderWidth||0))}draw(t,i){const s=this.options;this.skip||s.radius<.1||!fs(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,qo(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}return n.id="point",n.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},n.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},n})();function Zh(n,e){const{x:t,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,d,u;return n.horizontal?(u=o/2,a=Math.min(t,s),l=Math.max(t,s),c=i-u,d=i+u):(u=r/2,a=t-u,l=t+u,c=Math.min(i,s),d=Math.max(i,s)),{left:a,top:c,right:l,bottom:d}}function Di(n,e,t,i){return n?0:Ke(e,t,i)}function ga(n,e,t,i){const s=null===e,r=null===t,a=n&&!(s&&r)&&Zh(n,i);return a&&(s||ri(e,a.left,a.right))&&(r||ri(t,a.top,a.bottom))}function X_(n,e){n.rect(e.x,e.y,e.w,e.h)}function ma(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0;return{x:n.x+i,y:n.y+s,w:n.w+((n.x+n.w!==t.x+t.w?e:0)-i),h:n.h+((n.y+n.h!==t.y+t.h?e:0)-s),radius:n.radius}}class Or extends Pt{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=function U_(n){const e=Zh(n),t=e.right-e.left,i=e.bottom-e.top,s=function j_(n,e,t){const s=n.borderSkipped,r=zc(n.options.borderWidth);return{t:Di(s.top,r.top,0,t),r:Di(s.right,r.right,0,e),b:Di(s.bottom,r.bottom,0,t),l:Di(s.left,r.left,0,e)}}(n,t/2,i/2),r=function Y_(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=Ji(s),o=Math.min(e,t),a=n.borderSkipped,l=i||ne(s);return{topLeft:Di(!l||a.top||a.left,r.topLeft,0,o),topRight:Di(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Di(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Di(!l||a.bottom||a.right,r.bottomRight,0,o)}}(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}(this),a=function Z_(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}(o.radius)?ps:X_;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,ma(o,t,r)),e.clip(),a(e,ma(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,ma(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return ga(this,e,t,i)}inXRange(e,t){return ga(this,e,null,t)}inYRange(e,t){return ga(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Or.id="bar",Or.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Or.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var $_=Object.freeze({__proto__:null,ArcElement:Rr,LineElement:Dr,PointElement:G_,BarElement:Or});function Xh(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{value:e})}}function $h(n){n.data.datasets.forEach(e=>{Xh(e)})}var e0={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled)return void $h(n);const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),c=o||s.data;if("y"===gs([a,n.options.indexAxis])||!l.controller.supportsDecimation)return;const d=n.scales[l.xAxisID];if("linear"!==d.type&&"time"!==d.type||n.options.parsing)return;let g,{start:u,count:f}=function Q_(n,e){const t=e.length;let s,i=0;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Ke(oi(e,r.axis,o).lo,0,t-1)),s=c?Ke(oi(e,r.axis,a).hi+1,i,t)-i:t-i,{start:i,count:s}}(l,c);if(f<=(t.threshold||4*i))Xh(s);else{switch(ee(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}})),t.algorithm){case"lttb":g=function q_(n,e,t,i,s){const r=s.samples||i;if(r>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(r-2);let l=0;const c=e+t-1;let u,f,p,g,m,d=e;for(o[l++]=n[d],u=0;u<r-2;u++){let x,_=0,y=0;const C=Math.floor((u+1)*a)+1+e,v=Math.min(Math.floor((u+2)*a)+1,t)+e,b=v-C;for(x=C;x<v;x++)_+=n[x].x,y+=n[x].y;_/=b,y/=b;const w=Math.floor(u*a)+1+e,T=Math.min(Math.floor((u+1)*a)+1,t)+e,{x:S,y:E}=n[d];for(p=g=-1,x=w;x<T;x++)g=.5*Math.abs((S-_)*(n[x].y-E)-(S-n[x].x)*(y-E)),g>p&&(p=g,f=n[x],m=x);o[l++]=f,d=m}return o[l++]=n[c],o}(c,u,f,i,t);break;case"min-max":g=function J_(n,e,t,i){let o,a,l,c,d,u,f,p,g,m,s=0,r=0;const _=[],x=n[e].x,v=n[e+t-1].x-x;for(o=e;o<e+t;++o){a=n[o],l=(a.x-x)/v*i,c=a.y;const b=0|l;if(b===d)c<g?(g=c,u=o):c>m&&(m=c,f=o),s=(r*s+a.x)/++r;else{const w=o-1;if(!ee(u)&&!ee(f)){const T=Math.min(u,f),S=Math.max(u,f);T!==p&&T!==w&&_.push({...n[T],x:s}),S!==p&&S!==w&&_.push({...n[S],x:s})}o>0&&w!==p&&_.push(n[w]),_.push(a),d=b,r=0,g=m=c,u=f=p=o}}return _}(c,u,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=g}})},destroy(n){$h(n)}};function _a(n,e,t,i){if(i)return;let s=e[n],r=t[n];return"angle"===n&&(s=yt(s),r=yt(r)),{property:n,start:s,end:r}}function ya(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function qh(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function Jh(n,e){let t=[],i=!1;return Te(n)?(i=!0,t=n):t=function n0(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=ya(o,a,s);const l=s[o],c=s[a];null!==i?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):null!==t&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}(n,e),t.length?new Dr({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function Qh(n){return n&&!1!==n.fill}function s0(n,e,t){let s=n[e].fill;const r=[e];let o;if(!t)return s;for(;!1!==s&&-1===r.indexOf(s);){if(!ke(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function r0(n,e,t){const i=function c0(n){const e=n.options,t=e.fill;let i=Z(t&&t.target,t);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(n);if(ne(i))return!isNaN(i.value)&&i;let s=parseFloat(i);return ke(s)&&Math.floor(s)===s?function o0(n,e,t,i){return("-"===n||"+"===n)&&(t=e+t),!(t===e||t<0||t>=i)&&t}(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function u0(n,e,t){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{first:o,last:a,point:l}=f0(r,e,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(n.push(l),!a)break}n.push(...i)}function f0(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const d=r[c],u=o[d.start][t],f=o[d.end][t];if(ri(s,u,f)){a=s===u,l=s===f;break}}return{first:a,last:l,point:i}}class ed{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:r,radius:o}=this;return e.arc(s,r,o,(t=t||{start:0,end:le}).end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,r=e.angle;return{x:t+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function xa(n,e,t){const i=function p0(n){const{chart:e,fill:t,line:i}=n;if(ke(t))return function g0(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}(e,t);if("stack"===t)return function h0(n){const{scale:e,index:t,line:i}=n,s=[],r=i.segments,o=i.points,a=function d0(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}(e,t);a.push(Jh({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let d=c.start;d<=c.end;d++)u0(s,o[d],a)}return new Dr({points:s,options:{}})}(n);if("shape"===t)return!0;const s=function m0(n){return(n.scale||{}).getPointPositionForValue?function y0(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=function l0(n,e,t){let i;return i="start"===n?t:"end"===n?e.options.reverse?e.min:e.max:ne(n)?n.value:e.getBaseValue(),i}(t,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new ed({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}(n):function _0(n){const{scale:e={},fill:t}=n,i=function a0(n,e){let t=null;return"start"===n?t=e.bottom:"end"===n?t=e.top:ne(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}(t,e);if(ke(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}(n)}(n);return s instanceof ed?s:Jh(s,i)}(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:u=c}=l||{};i&&s.points.length&&(_r(n,t),function x0(n,e){const{line:t,target:i,above:s,below:r,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),"x"===l&&r!==s&&(td(n,i,o.top),id(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),td(n,i,o.bottom)),id(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore()}(n,{line:s,target:i,above:d,below:u,area:t,scale:r,axis:o}),yr(n))}function td(n,e,t){const{segments:i,points:s}=e;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,d=s[l],u=s[ya(l,c,s)];r?(n.moveTo(d.x,d.y),r=!1):(n.lineTo(d.x,t),n.lineTo(d.x,d.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(u.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function id(n,e){const{line:t,target:i,property:s,color:r,scale:o}=e,a=function t0(n,e,t){const i=n.segments,s=n.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=ya(l,c,s);const d=_a(t,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:d,start:s[l],end:s[c]});continue}const u=th(e,d);for(const f of u){const p=_a(t,r[f.start],r[f.end],f.loop),g=eh(a,s,p);for(const m of g)o.push({source:m,target:f,start:{[t]:qh(d,p,"start",Math.max)},end:{[t]:qh(d,p,"end",Math.min)}})}}return o}(t,i,s);for(const{source:l,target:c,start:d,end:u}of a){const{style:{backgroundColor:f=r}={}}=l,p=!0!==i;n.save(),n.fillStyle=f,v0(n,o,p&&_a(s,d,u)),n.beginPath();const g=!!t.pathSegment(n,l);let m;if(p){g?n.closePath():nd(n,i,u,s);const _=!!i.pathSegment(n,c,{move:g,reverse:!0});m=g&&_,m||nd(n,i,d,s)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function v0(n,e,t){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=t||{};"x"===r&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function nd(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var b0={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Dr&&(l={visible:n.isDatasetVisible(o),index:o,fill:r0(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],l&&!1!==l.fill&&(l.fill=s0(s,o,t.propagate))},beforeDraw(n,e,t){const i="beforeDraw"===t.drawTime,s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&xa(n.ctx,a,r))}},beforeDatasetsDraw(n,e,t){if("beforeDatasetsDraw"!==t.drawTime)return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;Qh(r)&&xa(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!Qh(i)||"beforeDatasetDraw"!==t.drawTime||xa(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const sd=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}};class rd extends Pt{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=be(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,s=Ne(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=sd(i,r);let c,d;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,r,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=s+a;let u=e;r.textAlign="left",r.textBaseline="middle";let f=-1,p=-d;return this.legendItems.forEach((g,m)=>{const _=i+t/2+r.measureText(g.text).width;(0===m||c[c.length-1]+_+2*a>o)&&(u+=d,c[c.length-(m>0?0:1)]=0,p+=d,f++),l[m]={left:0,top:p,row:f,width:_,height:s},c[c.length-1]+=_+a}),u}_fitCols(e,t,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let u=a,f=0,p=0,g=0,m=0;return this.legendItems.forEach((_,y)=>{const x=i+t/2+r.measureText(_.text).width;y>0&&p+s+2*a>d&&(u+=f+a,c.push({width:f,height:p}),g+=f+a,m++,f=p=0),l[y]={left:g,top:p,col:m,width:x,height:s},f=Math.max(f,x),p+=s+a}),u+=f,c.push({width:f,height:p}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Tn(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Je(i,this.left+s,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=Je(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Je(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=Je(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;_r(e,this),this._draw(),yr(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=oe.color,l=Tn(e.rtl,this.left,this.width),c=Ne(o.font),{color:d,padding:u}=o,f=c.size,p=f/2;let g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:_,itemHeight:y}=sd(o,f),v=this.isHorizontal(),b=this._computeTitleHeight();g=v?{x:Je(r,this.left+u,this.right-i[0]),y:this.top+u+b,line:0}:{x:this.left+u,y:Je(r,this.top+b+u,this.bottom-t[0].height),line:0},$c(this.ctx,e.textDirection);const w=y+u;this.legendItems.forEach((T,S)=>{s.strokeStyle=T.fontColor||d,s.fillStyle=T.fontColor||d;const E=s.measureText(T.text).width,P=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),A=m+p+E;let F=g.x,W=g.y;l.setWidth(this.width),v?S>0&&F+A+u>this.right&&(W=g.y+=w,g.line++,F=g.x=Je(r,this.left+u,this.right-i[g.line])):S>0&&W+w>this.bottom&&(F=g.x=F+t[g.line].width+u,g.line++,W=g.y=Je(r,this.top+b+u,this.bottom-t[g.line].height)),function(T,S,E){if(isNaN(m)||m<=0||isNaN(_)||_<0)return;s.save();const P=Z(E.lineWidth,1);if(s.fillStyle=Z(E.fillStyle,a),s.lineCap=Z(E.lineCap,"butt"),s.lineDashOffset=Z(E.lineDashOffset,0),s.lineJoin=Z(E.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=Z(E.strokeStyle,a),s.setLineDash(Z(E.lineDash,[])),o.usePointStyle){const A={radius:_*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:P},F=l.xPlus(T,m/2);Ac(s,A,F,S+p,o.pointStyleWidth&&m)}else{const A=S+Math.max((f-_)/2,0),F=l.leftForLtr(T,m),W=Ji(E.borderRadius);s.beginPath(),Object.values(W).some(re=>0!==re)?ps(s,{x:F,y:A,w:m,h:_,radius:W}):s.rect(F,A,m,_),s.fill(),0!==P&&s.stroke()}s.restore()}(l.x(F),W,T),F=((n,e,t,i)=>n===(i?"left":"right")?t:"center"===n?(e+t)/2:e)(P,F+m+p,v?F+A:this.right,e.rtl),function(T,S,E){qi(s,E.text,T,S+y/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})}(l.x(F),W,T),v?g.x+=A+u:g.y+=w}),qc(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Ne(t.font),s=Qe(t.padding);if(!t.display)return;const r=Tn(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=s.top+i.size/2;let d,u=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+c,u=Je(e.align,u,this.right-f);else{const g=this.columnSizes.reduce((m,_)=>Math.max(m,_.height),0);d=c+Je(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=Je(a,u,u+f);o.textAlign=r.textAlign(Ko(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,qi(o,t.text,p,d,i)}_computeTitleHeight(){const e=this.options.title,t=Ne(e.font),i=Qe(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(ri(e,this.left,this.right)&&ri(t,this.top,this.bottom))for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],ri(e,s.left,s.left+s.width)&&ri(t,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function w0(n,e){return!(("mousemove"!==n&&"mouseout"!==n||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==n&&"mouseup"!==n))}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,r=((n,e)=>null!==n&&null!==e&&n.datasetIndex===e.datasetIndex&&n.index===e.index)(s,i);s&&!r&&be(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&be(t.onHover,[e,i,this],this)}else i&&be(t.onClick,[e,i,this],this)}}var I0={id:"legend",_element:rd,start(n,e,t){const i=n.legend=new rd({ctx:n.ctx,options:t,chart:n});et.configure(n,i,t),et.addBox(n,i)},stop(n){et.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;et.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r}}=n.legend.options;return n._getSortedDatasetMetas().map(o=>{const a=o.controller.getStyle(t?0:void 0),l=Qe(a.borderWidth);return{text:e[o.index].label,fillStyle:a.backgroundColor,fontColor:r,hidden:!o.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:s||a.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class va extends Pt{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const s=Te(i.text)?i.text.length:1;this._padding=Qe(i.padding);const r=s*Ne(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:o}=this,a=o.align;let c,d,u,l=0;return this.isHorizontal()?(d=Je(a,i,r),u=t+e,c=r-i):("left"===o.position?(d=i+e,u=Je(a,s,t),l=-.5*we):(d=r-e,u=Je(a,t,s),l=.5*we),c=s-t),{titleX:d,titleY:u,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Ne(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);qi(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:Ko(t.align),textBaseline:"middle",translation:[o,a]})}}var S0={id:"title",_element:va,start(n,e,t){!function T0(n,e){const t=new va({ctx:n.ctx,options:e,chart:n});et.configure(n,t,e),et.addBox(n,t),n.titleBlock=t}(n,t)},stop(n){et.removeBox(n,n.titleBlock),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;et.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Lr=new WeakMap;var E0={id:"subtitle",start(n,e,t){const i=new va({ctx:n.ctx,options:t,chart:n});et.configure(n,i,t),et.addBox(n,i),Lr.set(n,i)},stop(n){et.removeBox(n,Lr.get(n)),Lr.delete(n)},beforeUpdate(n,e,t){const i=Lr.get(n);et.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ts={average(n){if(!n.length)return!1;let e,t,i=0,s=0,r=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(n,e){if(!n.length)return!1;let r,o,a,t=e.x,i=e.y,s=Number.POSITIVE_INFINITY;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const d=No(e,l.getCenterPoint());d<s&&(s=d,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Yt(n,e){return e&&(Te(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function ci(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function M0(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function od(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=Ne(e.bodyFont),c=Ne(e.titleFont),d=Ne(e.footerFont),u=r.length,f=s.length,p=i.length,g=Qe(e.padding);let m=g.height,_=0,y=i.reduce((v,b)=>v+b.before.length+b.lines.length+b.after.length,0);y+=n.beforeBody.length+n.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),y&&(m+=p*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-p)*l.lineHeight+(y-1)*e.bodySpacing),f&&(m+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let x=0;const C=function(v){_=Math.max(_,t.measureText(v).width+x)};return t.save(),t.font=c.string,I(n.title,C),t.font=l.string,I(n.beforeBody.concat(n.afterBody),C),x=e.displayColors?o+2+e.boxPadding:0,I(i,v=>{I(v.before,C),I(v.lines,C),I(v.after,C)}),x=0,t.font=d.string,I(n.footer,C),t.restore(),_+=g.width,{width:_,height:m}}function D0(n,e,t,i){const{x:s,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return"center"===i?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),function R0(n,e,t,i){const{x:s,width:r}=i,o=t.caretSize+t.caretPadding;if("left"===n&&s+r+o>e.width||"right"===n&&s-r-o<0)return!0}(c,n,e,t)&&(c="center"),c}function ad(n,e,t){const i=t.yAlign||e.yAlign||function k0(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}(n,t);return{xAlign:t.xAlign||e.xAlign||D0(n,e,t,i),yAlign:i}}function ld(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=s+r,{topLeft:d,topRight:u,bottomLeft:f,bottomRight:p}=Ji(o);let g=function O0(n,e){let{x:t,width:i}=n;return"right"===e?t-=i:"center"===e&&(t-=i/2),t}(e,a);const m=function L0(n,e,t){let{y:i,height:s}=n;return"top"===e?i+=t:i-="bottom"===e?s+t:s/2,i}(e,l,c);return"center"===l?"left"===a?g+=c:"right"===a&&(g-=c):"left"===a?g-=Math.max(d,f)+s:"right"===a&&(g+=Math.max(u,p)+s),{x:Ke(g,0,i.width-e.width),y:Ke(m,0,i.height-e.height)}}function Pr(n,e,t){const i=Qe(t.padding);return"center"===e?n.x+n.width/2:"right"===e?n.x+n.width-i.right:n.x+i.left}function cd(n){return Yt([],ci(n))}function hd(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}let dd=(()=>{class n extends Pt{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&i.options.animation&&s.animations,o=new rh(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function P0(n,e,t){return ki(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:s}=i,r=s.beforeTitle.apply(this,[t]),o=s.title.apply(this,[t]),a=s.afterTitle.apply(this,[t]);let l=[];return l=Yt(l,ci(r)),l=Yt(l,ci(o)),l=Yt(l,ci(a)),l}getBeforeBody(t,i){return cd(i.callbacks.beforeBody.apply(this,[t]))}getBody(t,i){const{callbacks:s}=i,r=[];return I(t,o=>{const a={before:[],lines:[],after:[]},l=hd(s,o);Yt(a.before,ci(l.beforeLabel.call(this,o))),Yt(a.lines,l.label.call(this,o)),Yt(a.after,ci(l.afterLabel.call(this,o))),r.push(a)}),r}getAfterBody(t,i){return cd(i.callbacks.afterBody.apply(this,[t]))}getFooter(t,i){const{callbacks:s}=i,r=s.beforeFooter.apply(this,[t]),o=s.footer.apply(this,[t]),a=s.afterFooter.apply(this,[t]);let l=[];return l=Yt(l,ci(r)),l=Yt(l,ci(o)),l=Yt(l,ci(a)),l}_createItems(t){const i=this._active,s=this.chart.data,r=[],o=[],a=[];let c,d,l=[];for(c=0,d=i.length;c<d;++c)l.push(M0(this.chart,i[c]));return t.filter&&(l=l.filter((u,f,p)=>t.filter(u,f,p,s))),t.itemSort&&(l=l.sort((u,f)=>t.itemSort(u,f,s))),I(l,u=>{const f=hd(t.callbacks,u);r.push(f.labelColor.call(this,u)),o.push(f.labelPointStyle.call(this,u)),a.push(f.labelTextColor.call(this,u))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(t,i){const s=this.options.setContext(this.getContext()),r=this._active;let o,a=[];if(r.length){const l=Ts[s.position].call(this,r,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=od(this,s),d=Object.assign({},l,c),u=ad(this.chart,s,d),f=ld(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,s,r){const o=this.getCaretPosition(t,s,r);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,s){const{xAlign:r,yAlign:o}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=Ji(l),{x:p,y:g}=t,{width:m,height:_}=i;let y,x,C,v,b,w;return"center"===o?(b=g+_/2,"left"===r?(y=p,x=y-a,v=b+a,w=b-a):(y=p+m,x=y+a,v=b-a,w=b+a),C=y):(x="left"===r?p+Math.max(c,u)+a:"right"===r?p+m-Math.max(d,f)-a:this.caretX,"top"===o?(v=g,b=v-a,y=x-a,C=x+a):(v=g+_,b=v+a,y=x+a,C=x-a),w=v),{x1:y,x2:x,x3:C,y1:v,y2:b,y3:w}}drawTitle(t,i,s){const r=this.title,o=r.length;let a,l,c;if(o){const d=Tn(s.rtl,this.x,this.width);for(t.x=Pr(this,s.titleAlign,s),i.textAlign=d.textAlign(s.titleAlign),i.textBaseline="middle",a=Ne(s.titleFont),l=s.titleSpacing,i.fillStyle=s.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(r[c],d.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===o&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,i,s,r,o){const a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d,boxPadding:u}=o,f=Ne(o.bodyFont),p=Pr(this,"left",o),g=r.x(p),_=i.y+(c<f.lineHeight?(f.lineHeight-c)/2:0);if(o.usePointStyle){const y={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},x=r.leftForLtr(g,d)+d/2,C=_+c/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,qo(t,y,x,C),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,qo(t,y,x,C)}else{t.lineWidth=ne(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const y=r.leftForLtr(g,d-u),x=r.leftForLtr(r.xPlus(g,1),d-u-2),C=Ji(a.borderRadius);Object.values(C).some(v=>0!==v)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ps(t,{x:y,y:_,w:d,h:c,radius:C}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ps(t,{x,y:_+1,w:d-2,h:c-2,radius:C}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(y,_,d,c),t.strokeRect(y,_,d,c),t.fillStyle=a.backgroundColor,t.fillRect(x,_+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,i,s){const{body:r}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,f=Ne(s.bodyFont);let p=f.lineHeight,g=0;const m=Tn(s.rtl,this.x,this.width),_=function(E){i.fillText(E,m.x(t.x+g),t.y+p/2),t.y+=p+o},y=m.textAlign(a);let x,C,v,b,w,T,S;for(i.textAlign=a,i.textBaseline="middle",i.font=f.string,t.x=Pr(this,y,s),i.fillStyle=s.bodyColor,I(this.beforeBody,_),g=l&&"right"!==y?"center"===a?d/2+u:d+2+u:0,b=0,T=r.length;b<T;++b){for(x=r[b],C=this.labelTextColors[b],i.fillStyle=C,I(x.before,_),v=x.lines,l&&v.length&&(this._drawColorBox(i,t,b,m,s),p=Math.max(f.lineHeight,c)),w=0,S=v.length;w<S;++w)_(v[w]),p=f.lineHeight;I(x.after,_)}g=0,p=f.lineHeight,I(this.afterBody,_),t.y-=o}drawFooter(t,i,s){const r=this.footer,o=r.length;let a,l;if(o){const c=Tn(s.rtl,this.x,this.width);for(t.x=Pr(this,s.footerAlign,s),t.y+=s.footerMarginTop,i.textAlign=c.textAlign(s.footerAlign),i.textBaseline="middle",a=Ne(s.footerFont),i.fillStyle=s.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(r[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,i,s,r){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=t,{width:d,height:u}=s,{topLeft:f,topRight:p,bottomLeft:g,bottomRight:m}=Ji(r.cornerRadius);i.fillStyle=r.backgroundColor,i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.beginPath(),i.moveTo(l+f,c),"top"===a&&this.drawCaret(t,i,s,r),i.lineTo(l+d-p,c),i.quadraticCurveTo(l+d,c,l+d,c+p),"center"===a&&"right"===o&&this.drawCaret(t,i,s,r),i.lineTo(l+d,c+u-m),i.quadraticCurveTo(l+d,c+u,l+d-m,c+u),"bottom"===a&&this.drawCaret(t,i,s,r),i.lineTo(l+g,c+u),i.quadraticCurveTo(l,c+u,l,c+u-g),"center"===a&&"left"===o&&this.drawCaret(t,i,s,r),i.lineTo(l,c+f),i.quadraticCurveTo(l,c,l+f,c),i.closePath(),i.fill(),r.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,s=this.$animations,r=s&&s.x,o=s&&s.y;if(r||o){const a=Ts[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=od(this,t),c=Object.assign({},a,this._size),d=ad(i,t,c),u=ld(t,c,d,i);(r._to!==u.x||o._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(i);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=Qe(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=s,this.drawBackground(o,t,r,i),$c(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),qc(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),o=!M(s,r),a=this._positionChanged(r,i);(o||a)&&(this._active=r,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,s),l=this._positionChanged(a,t),c=i||!M(a,o)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),c}_getActiveElements(t,i,s,r){const o=this.options;if("mouseout"===t.type)return[];if(!r)return i;const a=this.chart.getElementsAtEventForMode(t,o.mode,o,s);return o.reverse&&a.reverse(),a}_positionChanged(t,i){const{caretX:s,caretY:r,options:o}=this,a=Ts[o.position].call(this,t,i);return!1!==a&&(s!==a.x||r!==a.y)}}return n.positioners=Ts,n})();var A0=Object.freeze({__proto__:null,Decimation:e0,Filler:b0,Legend:I0,SubTitle:E0,Title:S0,Tooltip:{id:"tooltip",_element:dd,positioners:Ts,afterInit(n,e,t){t&&(n.tooltip=new dd({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(!1===n.notifyPlugins("beforeTooltipDraw",t))return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){n.tooltip&&n.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:qe,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:qe,beforeBody:qe,beforeLabel:qe,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return ee(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:qe,afterBody:qe,beforeFooter:qe,footer:qe,afterFooter:qe}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class Fr extends nn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ee(e))return null;const i=this.getLabels();return((n,e)=>null===n?null:Ke(Math.round(n),0,e))(t=isFinite(t)&&i[t]===e?t:function H0(n,e,t,i){const s=n.indexOf(e);return-1===s?((n,e,t,i)=>("string"==typeof e?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t))(n,e,t,i):s!==n.lastIndexOf(e)?t:s}(i,e,Z(t,e),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function ud(n,e,{horizontal:t,minRotation:i}){const s=Lt(i),r=(t?Math.sin(s):Math.cos(s))||.001;return Math.min(e/r,.75*e*(""+n).length)}Fr.id="category",Fr.defaults={ticks:{callback:Fr.prototype.getLabelForValue}};class Ar extends nn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ee(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=t?s:l,a=l=>r=i?r:l;if(e){const l=Wt(s),c=Wt(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=1;(r>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(.05*r)),a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let s,{maxTicksLimit:t,stepSize:i}=e;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function N0(n,e){const t=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:f}=n,p=r||1,g=d-1,{min:m,max:_}=e,y=!ee(o),x=!ee(a),C=!ee(c),v=(_-m)/(u+1);let w,T,S,E,b=uc((_-m)/g/p)*p;if(b<1e-14&&!y&&!x)return[{value:m},{value:_}];E=Math.ceil(_/b)-Math.floor(m/b),E>g&&(b=uc(E*b/g/p)*p),ee(l)||(w=Math.pow(10,l),b=Math.ceil(b*w)/w),"ticks"===s?(T=Math.floor(m/b)*b,S=Math.ceil(_/b)*b):(T=m,S=_),y&&x&&r&&function yp(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}((a-o)/r,b/1e3)?(E=Math.round(Math.min((a-o)/b,d)),b=(a-o)/E,T=o,S=a):C?(T=y?o:T,S=x?a:S,E=c-1,b=(S-T)/E):(E=(S-T)/b,E=as(E,Math.round(E),b/1e3)?Math.round(E):Math.ceil(E));const P=Math.max(pc(b),pc(T));w=Math.pow(10,ee(l)?P:l),T=Math.round(T*w)/w,S=Math.round(S*w)/w;let A=0;for(y&&(f&&T!==o?(t.push({value:o}),T<o&&A++,as(Math.round((T+A*b)*w)/w,o,ud(o,v,n))&&A++):T<o&&A++);A<E;++A)t.push({value:Math.round((T+A*b)*w)/w});return x&&f&&S!==a?t.length&&as(t[t.length-1].value,a,ud(a,v,n))?t[t.length-1].value=a:t.push({value:a}):(!x||S===a)&&t.push({value:S}),t}({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&fc(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return ms(e,this.chart.options.locale,this.options.ticks.format)}}class ba extends Ar{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ke(e)?e:0,this.max=ke(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Lt(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function fd(n){return n/Math.pow(10,Math.floor(Ct(n)))==1}ba.id="linear",ba.defaults={ticks:{callback:Cr.formatters.numeric}};class Ca extends nn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Ar.prototype.parse.apply(this,[e,t]);if(0!==i)return ke(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ke(e)?Math.max(0,e):null,this.max=ke(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const r=l=>i=e?i:l,o=l=>s=t?s:l,a=(l,c)=>Math.pow(10,Math.floor(Ct(l))+c);i===s&&(i<=0?(r(1),o(10)):(r(a(i,-1)),o(a(s,1)))),i<=0&&r(a(s,-1)),s<=0&&o(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&r(a(i,-1)),this.min=i,this.max=s}buildTicks(){const e=this.options,i=function B0(n,e){const t=Math.floor(Ct(e.max)),i=Math.ceil(e.max/Math.pow(10,t)),s=[];let r=Ye(n.min,Math.pow(10,Math.floor(Ct(e.min)))),o=Math.floor(Ct(r)),a=Math.floor(r/Math.pow(10,o)),l=o<0?Math.pow(10,Math.abs(o)):1;do{s.push({value:r,major:fd(r)}),++a,10===a&&(a=1,++o,l=o>=0?1:l),r=Math.round(a*Math.pow(10,o)*l)/l}while(o<t||o===t&&a<i);const c=Ye(n.max,r);return s.push({value:c,major:fd(r)}),s}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&fc(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return void 0===e?"0":ms(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ct(e),this._valueRange=Ct(this.max)-Ct(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ct(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function wa(n){const e=n.ticks;if(e.display&&n.display){const t=Qe(e.backdropPadding);return Z(e.font&&e.font.size,oe.font.size)+t.height}return 0}function K0(n,e,t){return t=Te(t)?t:[t],{w:$p(n,e.string,t),h:t.length*e.lineHeight}}function pd(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function G0(n,e,t,i,s){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,n.r=Math.max(n.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function Y0(n){return 0===n||180===n?"center":n<180?"left":"right"}function U0(n,e,t){return"right"===t?n-=e:"center"===t&&(n-=e/2),n}function Z0(n,e,t){return 90===t||270===t?n-=e/2:(t>270||t<90)&&(n-=e),n}function gd(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,le);else{let r=n.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,e),s.lineTo(r.x,r.y)}}Ca.id="logarithmic",Ca.defaults={ticks:{callback:Cr.formatters.logarithmic,major:{enabled:!0}}};class Ss extends Ar{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Qe(wa(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ke(e)&&!isNaN(e)?e:0,this.max=ke(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wa(this.options))}generateTickLabels(e){Ar.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=be(this.options.pointLabels.callback,[t,i],this);return s||0===s?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?function W0(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?we/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const d=n.getPointPosition(l,n.drawingArea+s[l],a),u=Ne(c.font),f=K0(n.ctx,u,n._pointLabels[l]);i[l]=f;const p=yt(n.getIndexAngle(l)+a),g=Math.round(Vo(p));G0(t,e,p,pd(g,d.x,f.w,0,180),pd(g,d.y,f.h,90,270))}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=function j0(n,e,t){const i=[],s=n._pointLabels.length,r=n.options,o=wa(r)/2,a=n.drawingArea,l=r.pointLabels.centerPointLabels?we/s:0;for(let c=0;c<s;c++){const d=n.getPointPosition(c,a+o+t[c],l),u=Math.round(Vo(yt(d.angle+Le))),f=e[c],p=Z0(d.y,f.h,u),g=Y0(u),m=U0(d.x,f.w,g);i.push({x:d.x,y:p,textAlign:g,left:m,top:p,right:m+f.w,bottom:p+f.h})}return i}(n,i,s)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){return yt(e*(le/(this._pointLabels.length||1))+Lt(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(ee(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(ee(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return function q0(n,e,t){return ki(n,{label:t,index:e,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-Le+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),gd(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s}=t,r=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function X0(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const r=i.setContext(n.getPointLabelContext(s)),o=Ne(r.font),{x:a,y:l,textAlign:c,left:d,top:u,right:f,bottom:p}=n._pointLabelItems[s],{backdropColor:g}=r;if(!ee(g)){const m=Ji(r.borderRadius),_=Qe(r.backdropPadding);t.fillStyle=g;const y=d-_.left,x=u-_.top,C=f-d+_.width,v=p-u+_.height;Object.values(m).some(b=>0!==b)?(t.beginPath(),ps(t,{x:y,y:x,w:C,h:v,radius:m}),t.fill()):t.fillRect(y,x,C,v)}qi(t,n._pointLabels[s],a,l+o.lineHeight/2,o,{color:r.color,textAlign:c,textBaseline:"middle"})}}(this,r),s.display&&this.ticks.forEach((c,d)=>{0!==d&&(a=this.getDistanceFromCenterForValue(c.value),function $0(n,e,t,i){const s=n.ctx,r=e.circular,{color:o,lineWidth:a}=e;!r&&!i||!o||!a||t<0||(s.save(),s.strokeStyle=o,s.lineWidth=a,s.setLineDash(e.borderDash),s.lineDashOffset=e.borderDashOffset,s.beginPath(),gd(n,t,r,i),s.closePath(),s.stroke(),s.restore())}(this,s.setContext(this.getContext(d-1)),a,r))}),i.display){for(e.save(),o=r-1;o>=0;o--){const c=i.setContext(this.getPointLabelContext(o)),{color:d,lineWidth:u}=c;!u||!d||(e.lineWidth=u,e.strokeStyle=d,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(0===l&&!t.reverse)return;const c=i.setContext(this.getContext(l)),d=Ne(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const u=Qe(c.backdropPadding);e.fillRect(-o/2-u.left,-r-d.size/2-u.top,o+u.width,d.size+u.height)}qi(e,a.label,0,-r,d,{color:c.color})}),e.restore()}drawTitle(){}}Ss.id="radialLinear",Ss.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Cr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:n=>n,padding:5,centerPointLabels:!1}},Ss.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Ss.descriptors={angleLines:{_fallback:"grid"}};const zr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ht=Object.keys(zr);function J0(n,e){return n-e}function md(n,e){if(ee(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=e;return"function"==typeof i&&(o=i(o)),ke(o)||(o="string"==typeof i?t.parse(o,i):t.parse(o)),null===o?null:(s&&(o="week"!==s||!bn(r)&&!0!==r?t.startOf(o,s):t.startOf(o,"isoWeek",r)),+o)}function _d(n,e,t,i){const s=ht.length;for(let r=ht.indexOf(n);r<s-1;++r){const o=zr[ht[r]];if(o.common&&Math.ceil((t-e)/((o.steps?o.steps:Number.MAX_SAFE_INTEGER)*o.size))<=i)return ht[r]}return ht[s-1]}function yd(n,e,t){if(t){if(t.length){const{lo:i,hi:s}=Bo(t,e);n[t[i]>=e?t[i]:t[s]]=!0}}else n[e]=!0}function xd(n,e,t){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return 0!==r&&t?function t1(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}(n,i,s,t):i}let Ia=(()=>{class n extends nn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i){const s=t.time||(t.time={}),r=this._adapter=new Vm._date(t.adapters.date);r.init(i),B(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return void 0===t?null:md(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,s=t.time.unit||"day";let{min:r,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!a||!l)&&(c(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&c(this.getMinMax(!1))),r=ke(r)&&!isNaN(r)?r:+i.startOf(Date.now(),s),o=ke(o)&&!isNaN(o)?o:+i.endOf(Date.now(),s)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],s=t[t.length-1]),{min:i,max:s}}buildTicks(){const t=this.options,i=t.time,s=t.ticks,r="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,l=function Cp(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}(r,o,this.max);return this._unit=i.unit||(s.autoSkip?_d(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):function Q0(n,e,t,i,s){for(let r=ht.length-1;r>=ht.indexOf(t);r--){const o=ht[r];if(zr[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return ht[t?ht.indexOf(t):0]}(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function e1(n){for(let e=ht.indexOf(n)+1,t=ht.length;e<t;++e)if(zr[ht[e]].common)return ht[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&l.reverse(),xd(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let r,o,i=0,s=0;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),i=1===t.length?1-r:(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),s=1===t.length?o:(o-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;i=Ke(i,0,a),s=Ke(s,0,a),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const t=this._adapter,i=this.min,s=this.max,r=this.options,o=r.time,a=o.unit||_d(o.minUnit,i,s,this._getLabelCapacity(i)),l=Z(o.stepSize,1),c="week"===a&&o.isoWeekday,d=bn(c)||!0===c,u={};let p,g,f=i;if(d&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,d?"day":a),t.diff(s,i,a)>1e5*l)throw new Error(i+" and "+s+" are too far apart with stepSize of "+l+" "+a);const m="data"===r.ticks.source&&this.getDataTimestamps();for(p=f,g=0;p<s;p=+t.add(p,l,a),g++)yd(u,p,m);return(p===s||"ticks"===r.bounds||1===g)&&yd(u,p,m),Object.keys(u).sort((_,y)=>_-y).map(_=>+_)}getLabelForValue(t){const s=this.options.time;return this._adapter.format(t,s.tooltipFormat?s.tooltipFormat:s.displayFormats.datetime)}_tickFormatFunction(t,i,s,r){const o=this.options,a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=c&&a[c],f=s[i],g=this._adapter.format(t,r||(c&&u&&f&&f.major?u:l&&a[l])),m=o.ticks.callback;return m?be(m,[g,i,s],this):g}generateTickLabels(t){let i,s,r;for(i=0,s=t.length;i<s;++i)r=t[i],r.label=this._tickFormatFunction(r.value,i,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,s=this.ctx.measureText(t).width,r=Lt(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*o+l*a,h:s*a+l*o}}_getLabelCapacity(t){const i=this.options.time,s=i.displayFormats,r=s[i.unit]||s.millisecond,o=this._tickFormatFunction(t,0,xd(this,[t],this._majorUnit),r),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i,s,t=this._cache.data||[];if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(i=0,s=r.length;i<s;++i)t=t.concat(r[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,s;if(t.length)return t;const r=this.getLabels();for(i=0,s=r.length;i<s;++i)t.push(md(this,r[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return yc(t.sort(J0))}}return n.id="time",n.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},n})();function Hr(n,e,t){let r,o,a,l,i=0,s=n.length-1;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=oi(n,"pos",e)),({pos:r,time:a}=n[i]),({pos:o,time:l}=n[s])):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=oi(n,"time",e)),({time:r,pos:a}=n[i]),({time:o,pos:l}=n[s]));const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Ta extends Ia{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Hr(t,this.min),this._tableRange=Hr(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)d=s[o+1],l=s[o-1],c=s[o],Math.round((d+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Hr(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Hr(this._table,i*this._tableRange+this._minPos,!0)}}Ta.id="timeseries",Ta.defaults=Ia.defaults,ua.register(Hm,$_,A0,Object.freeze({__proto__:null,CategoryScale:Fr,LinearScale:ba,LogarithmicScale:Ca,RadialLinearScale:Ss,TimeScale:Ia,TimeSeriesScale:Ta}));let r1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({imports:[Me.ez]})}return n})();var En=Q(8589),Es=Q(4480),Vr=Q(3259);let H1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({imports:[Me.ez,En.Bz,Es.T,Vr.z,En.Bz,Vr.z]})}return n})();var Re=Q(5219),Ms=Q(707),tt=Q(6825),Y=Q(2076),De=Q(2332),Cd=Q(2537),Ma=Q(4562),hi=Q(4713);let wd=(()=>{class n extends hi.s{static \u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static \u0275cmp=h.Xpm({type:n,selectors:[["ChevronUpIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12.2097 10.4113C12.1057 10.4118 12.0027 10.3915 11.9067 10.3516C11.8107 10.3118 11.7237 10.2532 11.6506 10.1792L6.93602 5.46461L2.22139 10.1476C2.07272 10.244 1.89599 10.2877 1.71953 10.2717C1.54307 10.2556 1.3771 10.1808 1.24822 10.0593C1.11933 9.93766 1.035 9.77633 1.00874 9.6011C0.982477 9.42587 1.0158 9.2469 1.10338 9.09287L6.37701 3.81923C6.52533 3.6711 6.72639 3.58789 6.93602 3.58789C7.14565 3.58789 7.3467 3.6711 7.49502 3.81923L12.7687 9.09287C12.9168 9.24119 13 9.44225 13 9.65187C13 9.8615 12.9168 10.0626 12.7687 10.2109C12.616 10.3487 12.4151 10.4207 12.2097 10.4113Z","fill","currentColor"]],template:function(i,s){1&i&&(h.O4$(),h.TgZ(0,"svg",0),h._UZ(1,"path",1),h.qZA()),2&i&&(h.Tol(s.getClassNames()),h.uIk("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role))},encapsulation:2})}return n})();var ka=Q(6005),Nr=Q(7778);let Id=(()=>{class n extends hi.s{static \u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static \u0275cmp=h.Xpm({type:n,selectors:[["CalendarIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.7838 1.51351H9.83783V0.567568C9.83783 0.417039 9.77804 0.272676 9.6716 0.166237C9.56516 0.0597971 9.42079 0 9.27027 0C9.11974 0 8.97538 0.0597971 8.86894 0.166237C8.7625 0.272676 8.7027 0.417039 8.7027 0.567568V1.51351H5.29729V0.567568C5.29729 0.417039 5.2375 0.272676 5.13106 0.166237C5.02462 0.0597971 4.88025 0 4.72973 0C4.5792 0 4.43484 0.0597971 4.3284 0.166237C4.22196 0.272676 4.16216 0.417039 4.16216 0.567568V1.51351H3.21621C2.66428 1.51351 2.13494 1.73277 1.74467 2.12305C1.35439 2.51333 1.13513 3.04266 1.13513 3.59459V11.9189C1.13513 12.4709 1.35439 13.0002 1.74467 13.3905C2.13494 13.7807 2.66428 14 3.21621 14H10.7838C11.3357 14 11.865 13.7807 12.2553 13.3905C12.6456 13.0002 12.8649 12.4709 12.8649 11.9189V3.59459C12.8649 3.04266 12.6456 2.51333 12.2553 2.12305C11.865 1.73277 11.3357 1.51351 10.7838 1.51351ZM3.21621 2.64865H4.16216V3.59459C4.16216 3.74512 4.22196 3.88949 4.3284 3.99593C4.43484 4.10237 4.5792 4.16216 4.72973 4.16216C4.88025 4.16216 5.02462 4.10237 5.13106 3.99593C5.2375 3.88949 5.29729 3.74512 5.29729 3.59459V2.64865H8.7027V3.59459C8.7027 3.74512 8.7625 3.88949 8.86894 3.99593C8.97538 4.10237 9.11974 4.16216 9.27027 4.16216C9.42079 4.16216 9.56516 4.10237 9.6716 3.99593C9.77804 3.88949 9.83783 3.74512 9.83783 3.59459V2.64865H10.7838C11.0347 2.64865 11.2753 2.74831 11.4527 2.92571C11.6301 3.10311 11.7297 3.34371 11.7297 3.59459V5.67568H2.27027V3.59459C2.27027 3.34371 2.36993 3.10311 2.54733 2.92571C2.72473 2.74831 2.96533 2.64865 3.21621 2.64865ZM10.7838 12.8649H3.21621C2.96533 12.8649 2.72473 12.7652 2.54733 12.5878C2.36993 12.4104 2.27027 12.1698 2.27027 11.9189V6.81081H11.7297V11.9189C11.7297 12.1698 11.6301 12.4104 11.4527 12.5878C11.2753 12.7652 11.0347 12.8649 10.7838 12.8649Z","fill","currentColor"]],template:function(i,s){1&i&&(h.O4$(),h.TgZ(0,"svg",0),h._UZ(1,"path",1),h.qZA()),2&i&&(h.Tol(s.getClassNames()),h.uIk("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role))},encapsulation:2})}return n})();const V1=["container"],N1=["inputfield"],B1=["contentWrapper"];function K1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"TimesIcon",10),h.NdJ("click",function(){h.CHM(t);const s=h.oxw(3);return h.KtG(s.clear())}),h.qZA()}2&n&&h.Q6J("styleClass","p-calendar-clear-icon")}function W1(n,e){}function G1(n,e){1&n&&h.YNc(0,W1,0,0,"ng-template")}function j1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"span",11),h.NdJ("click",function(){h.CHM(t);const s=h.oxw(3);return h.KtG(s.clear())}),h.YNc(1,G1,1,0,null,12),h.qZA()}if(2&n){const t=h.oxw(3);h.xp6(1),h.Q6J("ngTemplateOutlet",t.clearIconTemplate)}}function Y1(n,e){if(1&n&&(h.ynx(0),h.YNc(1,K1,1,1,"TimesIcon",8)(2,j1,2,1,"span",9),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.Q6J("ngIf",!t.clearIconTemplate),h.xp6(1),h.Q6J("ngIf",t.clearIconTemplate)}}function U1(n,e){if(1&n&&h._UZ(0,"span",15),2&n){const t=h.oxw(3);h.Q6J("ngClass",t.icon)}}function Z1(n,e){1&n&&h._UZ(0,"CalendarIcon")}function X1(n,e){}function $1(n,e){1&n&&h.YNc(0,X1,0,0,"ng-template")}function q1(n,e){if(1&n&&(h.ynx(0),h.YNc(1,Z1,1,0,"CalendarIcon",6)(2,$1,1,0,null,12),h.BQk()),2&n){const t=h.oxw(3);h.xp6(1),h.Q6J("ngIf",!t.triggerIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.triggerIconTemplate)}}function J1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",13),h.NdJ("click",function(s){h.CHM(t),h.oxw();const r=h.MAs(1),o=h.oxw();return h.KtG(o.onButtonClick(s,r))}),h.YNc(1,U1,1,1,"span",14)(2,q1,3,2,"ng-container",6),h.qZA()}if(2&n){const t=h.oxw(2);h.Q6J("disabled",t.disabled),h.uIk("aria-label",t.iconButtonAriaLabel)("aria-expanded",t.overlayVisible)("aria-controls",t.panelId),h.xp6(1),h.Q6J("ngIf",t.icon),h.xp6(1),h.Q6J("ngIf",!t.icon)}}function Q1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"CalendarIcon",18),h.NdJ("click",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onButtonClick(s))}),h.qZA()}}function ey(n,e){1&n&&h.GkF(0)}const ty=n=>({clickCallBack:n});function iy(n,e){if(1&n&&(h.ynx(0),h.YNc(1,Q1,1,0,"CalendarIcon",16)(2,ey,1,0,"ng-container",17),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.Q6J("ngIf",!t.inputIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.inputIconTemplate)("ngTemplateOutletContext",h.VKq(3,ty,t.onButtonClick.bind(t)))}}function ny(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"input",4,5),h.NdJ("focus",function(s){h.CHM(t);const r=h.oxw();return h.KtG(r.onInputFocus(s))})("keydown",function(s){h.CHM(t);const r=h.oxw();return h.KtG(r.onInputKeydown(s))})("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.onInputClick())})("blur",function(s){h.CHM(t);const r=h.oxw();return h.KtG(r.onInputBlur(s))})("input",function(s){h.CHM(t);const r=h.oxw();return h.KtG(r.onUserInput(s))}),h.qZA(),h.YNc(2,Y1,3,2,"ng-container",6)(3,J1,3,6,"button",7)(4,iy,3,5,"ng-container",6)}if(2&n){const t=h.oxw();h.Tol(t.inputStyleClass),h.Q6J("value",t.inputFieldValue)("readonly",t.readonlyInput)("ngStyle",t.inputStyle)("placeholder",t.placeholder||"")("disabled",t.disabled)("ngClass","p-inputtext p-component"),h.uIk("id",t.inputId)("name",t.name)("required",t.required)("aria-required",t.required)("aria-expanded",t.overlayVisible)("aria-controls",t.panelId)("aria-labelledby",t.ariaLabelledBy)("aria-label",t.ariaLabel)("tabindex",t.tabindex)("inputmode",t.touchUI?"off":null),h.xp6(2),h.Q6J("ngIf",t.showClear&&!t.disabled&&null!=t.value),h.xp6(1),h.Q6J("ngIf",t.showIcon&&"button"===t.iconDisplay),h.xp6(1),h.Q6J("ngIf","input"===t.iconDisplay&&t.showIcon)}}function sy(n,e){1&n&&h.GkF(0)}function ry(n,e){1&n&&h._UZ(0,"ChevronLeftIcon",40),2&n&&h.Q6J("styleClass","p-datepicker-prev-icon")}function oy(n,e){}function ay(n,e){1&n&&h.YNc(0,oy,0,0,"ng-template")}function ly(n,e){if(1&n&&(h.TgZ(0,"span",41),h.YNc(1,ay,1,0,null,12),h.qZA()),2&n){const t=h.oxw(5);h.xp6(1),h.Q6J("ngTemplateOutlet",t.previousIconTemplate)}}function cy(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",38),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(4);return h.KtG(r.onContainerButtonKeydown(s))})("click",function(s){h.CHM(t);const r=h.oxw(4);return h.KtG(r.onPrevButtonClick(s))}),h.YNc(1,ry,1,1,"ChevronLeftIcon",35)(2,ly,2,1,"span",39),h.qZA()}if(2&n){const t=h.oxw(4);h.uIk("aria-label",t.prevIconAriaLabel),h.xp6(1),h.Q6J("ngIf",!t.previousIconTemplate),h.xp6(1),h.Q6J("ngIf",t.previousIconTemplate)}}function hy(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",42),h.NdJ("click",function(s){h.CHM(t);const r=h.oxw(4);return h.KtG(r.switchToMonthView(s))})("keydown",function(s){h.CHM(t);const r=h.oxw(4);return h.KtG(r.onContainerButtonKeydown(s))}),h._uU(1),h.qZA()}if(2&n){const t=h.oxw().$implicit,i=h.oxw(3);h.Q6J("disabled",i.switchViewButtonDisabled()),h.uIk("aria-label",i.getTranslation("chooseMonth")),h.xp6(1),h.hij(" ",i.getMonthName(t.month)," ")}}function dy(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",43),h.NdJ("click",function(s){h.CHM(t);const r=h.oxw(4);return h.KtG(r.switchToYearView(s))})("keydown",function(s){h.CHM(t);const r=h.oxw(4);return h.KtG(r.onContainerButtonKeydown(s))}),h._uU(1),h.qZA()}if(2&n){const t=h.oxw().$implicit,i=h.oxw(3);h.Q6J("disabled",i.switchViewButtonDisabled()),h.uIk("aria-label",i.getTranslation("chooseYear")),h.xp6(1),h.hij(" ",i.getYear(t)," ")}}function uy(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(5);h.xp6(1),h.AsE("",t.yearPickerValues()[0]," - ",t.yearPickerValues()[t.yearPickerValues().length-1],"")}}function fy(n,e){1&n&&h.GkF(0)}const Ra=n=>({$implicit:n});function py(n,e){if(1&n&&(h.TgZ(0,"span",44),h.YNc(1,uy,2,2,"ng-container",6)(2,fy,1,0,"ng-container",17),h.qZA()),2&n){const t=h.oxw(4);h.xp6(1),h.Q6J("ngIf",!t.decadeTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.decadeTemplate)("ngTemplateOutletContext",h.VKq(3,Ra,t.yearPickerValues))}}function gy(n,e){1&n&&h._UZ(0,"ChevronRightIcon",40),2&n&&h.Q6J("styleClass","p-datepicker-next-icon")}function my(n,e){}function _y(n,e){1&n&&h.YNc(0,my,0,0,"ng-template")}function yy(n,e){if(1&n&&(h.TgZ(0,"span",45),h.YNc(1,_y,1,0,null,12),h.qZA()),2&n){const t=h.oxw(4);h.xp6(1),h.Q6J("ngTemplateOutlet",t.nextIconTemplate)}}function xy(n,e){if(1&n&&(h.TgZ(0,"th",51)(1,"span"),h._uU(2),h.qZA()()),2&n){const t=h.oxw(5);h.xp6(2),h.Oqu(t.getTranslation("weekHeader"))}}function vy(n,e){if(1&n&&(h.TgZ(0,"th",52)(1,"span"),h._uU(2),h.qZA()()),2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t)}}function by(n,e){if(1&n&&(h.TgZ(0,"td",55)(1,"span",56),h._uU(2),h.qZA()()),2&n){const t=h.oxw().index,i=h.oxw(2).$implicit;h.xp6(2),h.hij(" ",i.weekNumbers[t]," ")}}function Cy(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2).$implicit;h.xp6(1),h.Oqu(t.day)}}function wy(n,e){1&n&&h.GkF(0)}function Iy(n,e){if(1&n&&(h.ynx(0),h.YNc(1,wy,1,0,"ng-container",17),h.BQk()),2&n){const t=h.oxw(2).$implicit,i=h.oxw(6);h.xp6(1),h.Q6J("ngTemplateOutlet",i.dateTemplate)("ngTemplateOutletContext",h.VKq(2,Ra,t))}}function Ty(n,e){1&n&&h.GkF(0)}function Sy(n,e){if(1&n&&(h.ynx(0),h.YNc(1,Ty,1,0,"ng-container",17),h.BQk()),2&n){const t=h.oxw(2).$implicit,i=h.oxw(6);h.xp6(1),h.Q6J("ngTemplateOutlet",i.disabledDateTemplate)("ngTemplateOutletContext",h.VKq(2,Ra,t))}}function Ey(n,e){if(1&n&&(h.TgZ(0,"div",59),h._uU(1),h.qZA()),2&n){const t=h.oxw(2).$implicit;h.xp6(1),h.hij(" ",t.day," ")}}const Da=(n,e)=>({"p-highlight":n,"p-disabled":e});function My(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"span",57),h.NdJ("click",function(s){h.CHM(t);const r=h.oxw().$implicit,o=h.oxw(6);return h.KtG(o.onDateSelect(s,r))})("keydown",function(s){h.CHM(t);const r=h.oxw().$implicit,o=h.oxw(3).index,a=h.oxw(3);return h.KtG(a.onDateCellKeydown(s,r,o))}),h.YNc(2,Cy,2,1,"ng-container",6)(3,Iy,2,4,"ng-container",6)(4,Sy,2,4,"ng-container",6),h.qZA(),h.YNc(5,Ey,2,1,"div",58),h.BQk()}if(2&n){const t=h.oxw().$implicit,i=h.oxw(6);h.xp6(1),h.Q6J("ngClass",h.WLB(5,Da,i.isSelected(t)&&t.selectable,!t.selectable)),h.xp6(1),h.Q6J("ngIf",!i.dateTemplate&&(t.selectable||!i.disabledDateTemplate)),h.xp6(1),h.Q6J("ngIf",t.selectable||!i.disabledDateTemplate),h.xp6(1),h.Q6J("ngIf",!t.selectable),h.xp6(1),h.Q6J("ngIf",i.isSelected(t))}}const ky=(n,e)=>({"p-datepicker-other-month":n,"p-datepicker-today":e});function Ry(n,e){if(1&n&&(h.TgZ(0,"td",15),h.YNc(1,My,6,8,"ng-container",6),h.qZA()),2&n){const t=e.$implicit,i=h.oxw(6);h.Q6J("ngClass",h.WLB(3,ky,t.otherMonth,t.today)),h.uIk("aria-label",t.day),h.xp6(1),h.Q6J("ngIf",!t.otherMonth||i.showOtherMonths)}}function Dy(n,e){if(1&n&&(h.TgZ(0,"tr"),h.YNc(1,by,3,1,"td",53)(2,Ry,2,6,"td",54),h.qZA()),2&n){const t=e.$implicit,i=h.oxw(5);h.xp6(1),h.Q6J("ngIf",i.showWeek),h.xp6(1),h.Q6J("ngForOf",t)}}function Oy(n,e){if(1&n&&(h.TgZ(0,"div",46)(1,"table",47)(2,"thead")(3,"tr"),h.YNc(4,xy,3,1,"th",48)(5,vy,3,1,"th",49),h.qZA()(),h.TgZ(6,"tbody"),h.YNc(7,Dy,3,2,"tr",50),h.qZA()()()),2&n){const t=h.oxw().$implicit,i=h.oxw(3);h.xp6(4),h.Q6J("ngIf",i.showWeek),h.xp6(1),h.Q6J("ngForOf",i.weekDays),h.xp6(2),h.Q6J("ngForOf",t.dates)}}function Ly(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",27)(1,"div",28),h.YNc(2,cy,3,3,"button",29),h.TgZ(3,"div",30),h.YNc(4,hy,2,3,"button",31)(5,dy,2,3,"button",32)(6,py,3,5,"span",33),h.qZA(),h.TgZ(7,"button",34),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onContainerButtonKeydown(s))})("click",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onNextButtonClick(s))}),h.YNc(8,gy,1,1,"ChevronRightIcon",35)(9,yy,2,1,"span",36),h.qZA()(),h.YNc(10,Oy,8,3,"div",37),h.qZA()}if(2&n){const t=e.index,i=h.oxw(3);h.xp6(2),h.Q6J("ngIf",0===t),h.xp6(2),h.Q6J("ngIf","date"===i.currentView),h.xp6(1),h.Q6J("ngIf","year"!==i.currentView),h.xp6(1),h.Q6J("ngIf","year"===i.currentView),h.xp6(1),h.Udp("display",1===i.numberOfMonths||t===i.numberOfMonths-1?"inline-flex":"none"),h.uIk("aria-label",i.nextIconAriaLabel),h.xp6(1),h.Q6J("ngIf",!i.nextIconTemplate),h.xp6(1),h.Q6J("ngIf",i.nextIconTemplate),h.xp6(1),h.Q6J("ngIf","date"===i.currentView)}}function Py(n,e){if(1&n&&(h.TgZ(0,"div",59),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit;h.xp6(1),h.hij(" ",t," ")}}function Fy(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"span",62),h.NdJ("click",function(s){const o=h.CHM(t).index,a=h.oxw(4);return h.KtG(a.onMonthSelect(s,o))})("keydown",function(s){const o=h.CHM(t).index,a=h.oxw(4);return h.KtG(a.onMonthCellKeydown(s,o))}),h._uU(1),h.YNc(2,Py,2,1,"div",58),h.qZA()}if(2&n){const t=e.$implicit,i=e.index,s=h.oxw(4);h.Q6J("ngClass",h.WLB(3,Da,s.isMonthSelected(i),s.isMonthDisabled(i))),h.xp6(1),h.hij(" ",t," "),h.xp6(1),h.Q6J("ngIf",s.isMonthSelected(i))}}function Ay(n,e){if(1&n&&(h.TgZ(0,"div",60),h.YNc(1,Fy,3,6,"span",61),h.qZA()),2&n){const t=h.oxw(3);h.xp6(1),h.Q6J("ngForOf",t.monthPickerValues())}}function zy(n,e){if(1&n&&(h.TgZ(0,"div",59),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit;h.xp6(1),h.hij(" ",t," ")}}function Hy(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"span",65),h.NdJ("click",function(s){const o=h.CHM(t).$implicit,a=h.oxw(4);return h.KtG(a.onYearSelect(s,o))})("keydown",function(s){const o=h.CHM(t).$implicit,a=h.oxw(4);return h.KtG(a.onYearCellKeydown(s,o))}),h._uU(1),h.YNc(2,zy,2,1,"div",58),h.qZA()}if(2&n){const t=e.$implicit,i=h.oxw(4);h.Q6J("ngClass",h.WLB(3,Da,i.isYearSelected(t),i.isYearDisabled(t))),h.xp6(1),h.hij(" ",t," "),h.xp6(1),h.Q6J("ngIf",i.isYearSelected(t))}}function Vy(n,e){if(1&n&&(h.TgZ(0,"div",63),h.YNc(1,Hy,3,6,"span",64),h.qZA()),2&n){const t=h.oxw(3);h.xp6(1),h.Q6J("ngForOf",t.yearPickerValues())}}function Ny(n,e){if(1&n&&(h.ynx(0),h.TgZ(1,"div",23),h.YNc(2,Ly,11,10,"div",24),h.qZA(),h.YNc(3,Ay,2,1,"div",25)(4,Vy,2,1,"div",26),h.BQk()),2&n){const t=h.oxw(2);h.xp6(2),h.Q6J("ngForOf",t.months),h.xp6(1),h.Q6J("ngIf","month"===t.currentView),h.xp6(1),h.Q6J("ngIf","year"===t.currentView)}}function By(n,e){1&n&&h._UZ(0,"ChevronUpIcon")}function Ky(n,e){}function Wy(n,e){1&n&&h.YNc(0,Ky,0,0,"ng-template")}function Gy(n,e){1&n&&(h.ynx(0),h._uU(1,"0"),h.BQk())}function jy(n,e){1&n&&h._UZ(0,"ChevronDownIcon")}function Yy(n,e){}function Uy(n,e){1&n&&h.YNc(0,Yy,0,0,"ng-template")}function Zy(n,e){1&n&&h._UZ(0,"ChevronUpIcon")}function Xy(n,e){}function $y(n,e){1&n&&h.YNc(0,Xy,0,0,"ng-template")}function qy(n,e){1&n&&(h.ynx(0),h._uU(1,"0"),h.BQk())}function Jy(n,e){1&n&&h._UZ(0,"ChevronDownIcon")}function Qy(n,e){}function ex(n,e){1&n&&h.YNc(0,Qy,0,0,"ng-template")}function tx(n,e){if(1&n&&(h.TgZ(0,"div",69)(1,"span"),h._uU(2),h.qZA()()),2&n){const t=h.oxw(3);h.xp6(2),h.Oqu(t.timeSeparator)}}function ix(n,e){1&n&&h._UZ(0,"ChevronUpIcon")}function nx(n,e){}function sx(n,e){1&n&&h.YNc(0,nx,0,0,"ng-template")}function rx(n,e){1&n&&(h.ynx(0),h._uU(1,"0"),h.BQk())}function ox(n,e){1&n&&h._UZ(0,"ChevronDownIcon")}function ax(n,e){}function lx(n,e){1&n&&h.YNc(0,ax,0,0,"ng-template")}function cx(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",74)(1,"button",68),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onContainerButtonKeydown(s))})("keydown.enter",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.incrementSecond(s))})("keydown.space",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.incrementSecond(s))})("mousedown",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onTimePickerElementMouseDown(s,2,1))})("mouseup",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.space",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onTimePickerElementMouseUp(s))})("mouseleave",function(){h.CHM(t);const s=h.oxw(3);return h.KtG(s.onTimePickerElementMouseLeave())}),h.YNc(2,ix,1,0,"ChevronUpIcon",6)(3,sx,1,0,null,12),h.qZA(),h.TgZ(4,"span"),h.YNc(5,rx,2,0,"ng-container",6),h._uU(6),h.qZA(),h.TgZ(7,"button",68),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onContainerButtonKeydown(s))})("keydown.enter",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.decrementSecond(s))})("keydown.space",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.decrementSecond(s))})("mousedown",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onTimePickerElementMouseDown(s,2,-1))})("mouseup",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.space",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onTimePickerElementMouseUp(s))})("mouseleave",function(){h.CHM(t);const s=h.oxw(3);return h.KtG(s.onTimePickerElementMouseLeave())}),h.YNc(8,ox,1,0,"ChevronDownIcon",6)(9,lx,1,0,null,12),h.qZA()()}if(2&n){const t=h.oxw(3);h.xp6(1),h.uIk("aria-label",t.getTranslation("nextSecond")),h.xp6(1),h.Q6J("ngIf",!t.incrementIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.incrementIconTemplate),h.xp6(2),h.Q6J("ngIf",t.currentSecond<10),h.xp6(1),h.Oqu(t.currentSecond),h.xp6(1),h.uIk("aria-label",t.getTranslation("prevSecond")),h.xp6(1),h.Q6J("ngIf",!t.decrementIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.decrementIconTemplate)}}function hx(n,e){1&n&&h._UZ(0,"ChevronUpIcon")}function dx(n,e){}function ux(n,e){1&n&&h.YNc(0,dx,0,0,"ng-template")}function fx(n,e){1&n&&h._UZ(0,"ChevronDownIcon")}function px(n,e){}function gx(n,e){1&n&&h.YNc(0,px,0,0,"ng-template")}function mx(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",75)(1,"button",76),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onContainerButtonKeydown(s))})("click",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.toggleAMPM(s))})("keydown.enter",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.toggleAMPM(s))}),h.YNc(2,hx,1,0,"ChevronUpIcon",6)(3,ux,1,0,null,12),h.qZA(),h.TgZ(4,"span"),h._uU(5),h.qZA(),h.TgZ(6,"button",76),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.onContainerButtonKeydown(s))})("click",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.toggleAMPM(s))})("keydown.enter",function(s){h.CHM(t);const r=h.oxw(3);return h.KtG(r.toggleAMPM(s))}),h.YNc(7,fx,1,0,"ChevronDownIcon",6)(8,gx,1,0,null,12),h.qZA()()}if(2&n){const t=h.oxw(3);h.xp6(1),h.uIk("aria-label",t.getTranslation("am")),h.xp6(1),h.Q6J("ngIf",!t.incrementIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.incrementIconTemplate),h.xp6(2),h.Oqu(t.pm?"PM":"AM"),h.xp6(1),h.uIk("aria-label",t.getTranslation("pm")),h.xp6(1),h.Q6J("ngIf",!t.decrementIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.decrementIconTemplate)}}function _x(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",66)(1,"div",67)(2,"button",68),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onContainerButtonKeydown(s))})("keydown.enter",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.incrementHour(s))})("keydown.space",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.incrementHour(s))})("mousedown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseDown(s,0,1))})("mouseup",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.space",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("mouseleave",function(){h.CHM(t);const s=h.oxw(2);return h.KtG(s.onTimePickerElementMouseLeave())}),h.YNc(3,By,1,0,"ChevronUpIcon",6)(4,Wy,1,0,null,12),h.qZA(),h.TgZ(5,"span"),h.YNc(6,Gy,2,0,"ng-container",6),h._uU(7),h.qZA(),h.TgZ(8,"button",68),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onContainerButtonKeydown(s))})("keydown.enter",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.decrementHour(s))})("keydown.space",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.decrementHour(s))})("mousedown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseDown(s,0,-1))})("mouseup",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.space",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("mouseleave",function(){h.CHM(t);const s=h.oxw(2);return h.KtG(s.onTimePickerElementMouseLeave())}),h.YNc(9,jy,1,0,"ChevronDownIcon",6)(10,Uy,1,0,null,12),h.qZA()(),h.TgZ(11,"div",69)(12,"span"),h._uU(13),h.qZA()(),h.TgZ(14,"div",70)(15,"button",68),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onContainerButtonKeydown(s))})("keydown.enter",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.incrementMinute(s))})("keydown.space",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.incrementMinute(s))})("mousedown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseDown(s,1,1))})("mouseup",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.space",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("mouseleave",function(){h.CHM(t);const s=h.oxw(2);return h.KtG(s.onTimePickerElementMouseLeave())}),h.YNc(16,Zy,1,0,"ChevronUpIcon",6)(17,$y,1,0,null,12),h.qZA(),h.TgZ(18,"span"),h.YNc(19,qy,2,0,"ng-container",6),h._uU(20),h.qZA(),h.TgZ(21,"button",68),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onContainerButtonKeydown(s))})("keydown.enter",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.decrementMinute(s))})("keydown.space",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.decrementMinute(s))})("mousedown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseDown(s,1,-1))})("mouseup",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("keyup.space",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTimePickerElementMouseUp(s))})("mouseleave",function(){h.CHM(t);const s=h.oxw(2);return h.KtG(s.onTimePickerElementMouseLeave())}),h.YNc(22,Jy,1,0,"ChevronDownIcon",6)(23,ex,1,0,null,12),h.qZA()(),h.YNc(24,tx,3,1,"div",71)(25,cx,10,8,"div",72)(26,mx,9,7,"div",73),h.qZA()}if(2&n){const t=h.oxw(2);h.xp6(2),h.uIk("aria-label",t.getTranslation("nextHour")),h.xp6(1),h.Q6J("ngIf",!t.incrementIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.incrementIconTemplate),h.xp6(2),h.Q6J("ngIf",t.currentHour<10),h.xp6(1),h.Oqu(t.currentHour),h.xp6(1),h.uIk("aria-label",t.getTranslation("prevHour")),h.xp6(1),h.Q6J("ngIf",!t.decrementIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.decrementIconTemplate),h.xp6(3),h.Oqu(t.timeSeparator),h.xp6(2),h.uIk("aria-label",t.getTranslation("nextMinute")),h.xp6(1),h.Q6J("ngIf",!t.incrementIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.incrementIconTemplate),h.xp6(2),h.Q6J("ngIf",t.currentMinute<10),h.xp6(1),h.Oqu(t.currentMinute),h.xp6(1),h.uIk("aria-label",t.getTranslation("prevMinute")),h.xp6(1),h.Q6J("ngIf",!t.decrementIconTemplate),h.xp6(1),h.Q6J("ngTemplateOutlet",t.decrementIconTemplate),h.xp6(1),h.Q6J("ngIf",t.showSeconds),h.xp6(1),h.Q6J("ngIf",t.showSeconds),h.xp6(1),h.Q6J("ngIf","12"==t.hourFormat)}}const Td=n=>[n];function yx(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",77)(1,"button",78),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onContainerButtonKeydown(s))})("click",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onTodayButtonClick(s))}),h.qZA(),h.TgZ(2,"button",78),h.NdJ("keydown",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onContainerButtonKeydown(s))})("click",function(s){h.CHM(t);const r=h.oxw(2);return h.KtG(r.onClearButtonClick(s))}),h.qZA()()}if(2&n){const t=h.oxw(2);h.xp6(1),h.Q6J("label",t.getTranslation("today"))("ngClass",h.VKq(4,Td,t.todayButtonStyleClass)),h.xp6(1),h.Q6J("label",t.getTranslation("clear"))("ngClass",h.VKq(6,Td,t.clearButtonStyleClass))}}function xx(n,e){1&n&&h.GkF(0)}const vx=(n,e,t,i,s,r)=>({"p-datepicker p-component":!0,"p-datepicker-inline":n,"p-disabled":e,"p-datepicker-timeonly":t,"p-datepicker-multiple-month":i,"p-datepicker-monthpicker":s,"p-datepicker-touch-ui":r}),Sd=(n,e)=>({showTransitionParams:n,hideTransitionParams:e}),bx=n=>({value:"visibleTouchUI",params:n}),Cx=n=>({value:"visible",params:n});function wx(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",19,20),h.NdJ("@overlayAnimation.start",function(s){h.CHM(t);const r=h.oxw();return h.KtG(r.onOverlayAnimationStart(s))})("@overlayAnimation.done",function(s){h.CHM(t);const r=h.oxw();return h.KtG(r.onOverlayAnimationDone(s))})("click",function(s){h.CHM(t);const r=h.oxw();return h.KtG(r.onOverlayClick(s))}),h.Hsn(2),h.YNc(3,sy,1,0,"ng-container",12)(4,Ny,5,3,"ng-container",6)(5,_x,27,20,"div",21)(6,yx,3,8,"div",22),h.Hsn(7,1),h.YNc(8,xx,1,0,"ng-container",12),h.qZA()}if(2&n){const t=h.oxw();h.Tol(t.panelStyleClass),h.Q6J("ngStyle",t.panelStyle)("ngClass",h.HTZ(14,vx,t.inline,t.disabled,t.timeOnly,t.numberOfMonths>1,"month"===t.view,t.touchUI))("@overlayAnimation",t.touchUI?h.VKq(24,bx,h.WLB(21,Sd,t.showTransitionOptions,t.hideTransitionOptions)):h.VKq(29,Cx,h.WLB(26,Sd,t.showTransitionOptions,t.hideTransitionOptions)))("@.disabled",!0===t.inline),h.uIk("aria-label",t.getTranslation("chooseDate"))("role",t.inline?null:"dialog")("aria-modal",t.inline?null:"true"),h.xp6(3),h.Q6J("ngTemplateOutlet",t.headerTemplate),h.xp6(1),h.Q6J("ngIf",!t.timeOnly),h.xp6(1),h.Q6J("ngIf",(t.showTime||t.timeOnly)&&"date"===t.currentView),h.xp6(1),h.Q6J("ngIf",t.showButtonBar),h.xp6(2),h.Q6J("ngTemplateOutlet",t.footerTemplate)}}const Ix=[[["p-header"]],[["p-footer"]]],Tx=(n,e,t,i,s)=>({"p-calendar":!0,"p-input-icon-right":n,"p-calendar-w-btn":e,"p-calendar-timeonly":t,"p-calendar-disabled":i,"p-focus":s}),Sx=["p-header","p-footer"],Ex={provide:me.JU,useExisting:(0,h.Gpc)(()=>Mx),multi:!0};let Mx=(()=>{class n{document;el;renderer;cd;zone;config;overlayService;iconDisplay="button";style;styleClass;inputStyle;inputId;name;inputStyleClass;placeholder;ariaLabelledBy;ariaLabel;iconAriaLabel;disabled;dateFormat;multipleSeparator=",";rangeSeparator="-";inline=!1;showOtherMonths=!0;selectOtherMonths;showIcon;icon;appendTo;readonlyInput;shortYearCutoff="+10";monthNavigator;yearNavigator;hourFormat="24";timeOnly;stepHour=1;stepMinute=1;stepSecond=1;showSeconds=!1;required;showOnFocus=!0;showWeek=!1;showClear=!1;dataType="date";selectionMode="single";maxDateCount;showButtonBar;todayButtonStyleClass="p-button-text";clearButtonStyleClass="p-button-text";autoZIndex=!0;baseZIndex=0;panelStyleClass;panelStyle;keepInvalid=!1;hideOnDateTimeSelect=!0;touchUI;timeSeparator=":";focusTrap=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";tabindex;get minDate(){return this._minDate}set minDate(t){this._minDate=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(t){this._disabledDates=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(t){this._disabledDays=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(t){if(this._yearRange=t,t){const i=t.split(":"),s=parseInt(i[0]),r=parseInt(i[1]);this.populateYearOptions(s,r)}}get showTime(){return this._showTime}set showTime(t){this._showTime=t,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(t){this._responsiveOptions=t,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(t){this._numberOfMonths=t,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(t){this._firstDayOfWeek=t,this.createWeekDays()}set locale(t){console.warn("Locale property has no effect, use new i18n API instead.")}get view(){return this._view}set view(t){this._view=t,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(t){if(this._defaultDate=t,this.initialized){const i=t||new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.initTime(i),this.createMonths(this.currentMonth,this.currentYear)}}onFocus=new h.vpe;onBlur=new h.vpe;onClose=new h.vpe;onSelect=new h.vpe;onClear=new h.vpe;onInput=new h.vpe;onTodayClick=new h.vpe;onClearClick=new h.vpe;onMonthChange=new h.vpe;onYearChange=new h.vpe;onClickOutside=new h.vpe;onShow=new h.vpe;templates;containerViewChild;inputfieldViewChild;set content(t){this.contentViewChild=t,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):!this.focus&&!this.inline&&this.initFocusableCell())}contentViewChild;value;dates;months;weekDays;currentMonth;currentYear;currentHour;currentMinute;currentSecond;pm;mask;maskClickListener;overlay;responsiveStyleElement;overlayVisible;onModelChange=()=>{};onModelTouched=()=>{};calendarElement;timePickerTimer;documentClickListener;animationEndListener;ticksTo1970;yearOptions;focus;isKeydown;filled;inputFieldValue=null;_minDate;_maxDate;_showTime;_yearRange;preventDocumentListener;dateTemplate;headerTemplate;footerTemplate;disabledDateTemplate;decadeTemplate;previousIconTemplate;nextIconTemplate;triggerIconTemplate;clearIconTemplate;decrementIconTemplate;incrementIconTemplate;inputIconTemplate;_disabledDates;_disabledDays;selectElement;todayElement;focusElement;scrollHandler;documentResizeListener;navigationState=null;isMonthNavigate;initialized;translationSubscription;_locale;_responsiveOptions;currentView;attributeSelector;panelId;_numberOfMonths=1;_firstDayOfWeek;_view="date";preventFocus;_defaultDate;window;get locale(){return this._locale}get iconButtonAriaLabel(){return this.iconAriaLabel?this.iconAriaLabel:this.getTranslation("chooseDate")}get prevIconAriaLabel(){return this.getTranslation("year"===this.currentView?"prevDecade":"month"===this.currentView?"prevYear":"prevMonth")}get nextIconAriaLabel(){return this.getTranslation("year"===this.currentView?"nextDecade":"month"===this.currentView?"nextYear":"nextMonth")}constructor(t,i,s,r,o,a,l){this.document=t,this.el=i,this.renderer=s,this.cd=r,this.zone=o,this.config=a,this.overlayService=l,this.window=this.document.defaultView}ngOnInit(){this.attributeSelector=(0,De.Th)(),this.panelId=this.attributeSelector+"_panel";const t=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=t.getMonth(),this.currentYear=t.getFullYear(),this.yearOptions=[],this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(t),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays(),this.cd.markForCheck()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"date":default:this.dateTemplate=t.template;break;case"decade":this.decadeTemplate=t.template;break;case"disabledDate":this.disabledDateTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"inputicon":this.inputIconTemplate=t.template;break;case"previousicon":this.previousIconTemplate=t.template;break;case"nexticon":this.nextIconTemplate=t.template;break;case"triggericon":this.triggerIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template;break;case"decrementicon":this.decrementIconTemplate=t.template;break;case"incrementicon":this.incrementIconTemplate=t.template;break;case"footer":this.footerTemplate=t.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),!this.disabled&&!this.inline&&(this.initFocusableCell(),1===this.numberOfMonths&&this.contentViewChild&&this.contentViewChild.nativeElement&&(this.contentViewChild.nativeElement.style.width=Y.p.getOuterWidth(this.containerViewChild?.nativeElement)+"px")))}getTranslation(t){return this.config.getTranslation(t)}populateYearOptions(t,i){this.yearOptions=[];for(let s=t;s<=i;s++)this.yearOptions.push(s)}createWeekDays(){this.weekDays=[];let t=this.getFirstDateOfWeek(),i=this.getTranslation(Re.ws.DAY_NAMES_MIN);for(let s=0;s<7;s++)this.weekDays.push(i[t]),t=6==t?0:++t}monthPickerValues(){let t=[];for(let i=0;i<=11;i++)t.push(this.config.getTranslation("monthNamesShort")[i]);return t}yearPickerValues(){let t=[],i=this.currentYear-this.currentYear%10;for(let s=0;s<10;s++)t.push(i+s);return t}createMonths(t,i){this.months=this.months=[];for(let s=0;s<this.numberOfMonths;s++){let r=t+s,o=i;r>11&&(r=r%11-1,o=i+1),this.months.push(this.createMonth(r,o))}}getWeekNumber(t){let i=new Date(t.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));let s=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((s-i.getTime())/864e5)/7)+1}createMonth(t,i){let s=[],r=this.getFirstDayOfMonthIndex(t,i),o=this.getDaysCountInMonth(t,i),a=this.getDaysCountInPrevMonth(t,i),l=1,c=new Date,d=[],u=Math.ceil((o+r)/7);for(let f=0;f<u;f++){let p=[];if(0==f){for(let m=a-r+1;m<=a;m++){let _=this.getPreviousMonthAndYear(t,i);p.push({day:m,month:_.month,year:_.year,otherMonth:!0,today:this.isToday(c,m,_.month,_.year),selectable:this.isSelectable(m,_.month,_.year,!0)})}let g=7-p.length;for(let m=0;m<g;m++)p.push({day:l,month:t,year:i,today:this.isToday(c,l,t,i),selectable:this.isSelectable(l,t,i,!1)}),l++}else for(let g=0;g<7;g++){if(l>o){let m=this.getNextMonthAndYear(t,i);p.push({day:l-o,month:m.month,year:m.year,otherMonth:!0,today:this.isToday(c,l-o,m.month,m.year),selectable:this.isSelectable(l-o,m.month,m.year,!0)})}else p.push({day:l,month:t,year:i,today:this.isToday(c,l,t,i),selectable:this.isSelectable(l,t,i,!1)});l++}this.showWeek&&d.push(this.getWeekNumber(new Date(p[0].year,p[0].month,p[0].day))),s.push(p)}return{month:t,year:i,dates:s,weekNumbers:d}}initTime(t){this.pm=t.getHours()>11,this.showTime?(this.currentMinute=t.getMinutes(),this.currentSecond=t.getSeconds(),this.setCurrentHourPM(t.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(t){this.disabled?t.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(t){this.disabled?t.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){this.currentYear--;let t=this.yearOptions;if(this.yearNavigator&&this.currentYear<t[0]){let i=t[t.length-1]-t[0];this.populateYearOptions(t[0]-i,t[t.length-1]-i)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){this.currentYear++;let t=this.yearOptions;if(this.yearNavigator&&this.currentYear>t[t.length-1]){let i=t[t.length-1]-t[0];this.populateYearOptions(t[0]+i,t[t.length-1]+i)}}switchToMonthView(t){this.setCurrentView("month"),t.preventDefault()}switchToYearView(t){this.setCurrentView("year"),t.preventDefault()}onDateSelect(t,i){!this.disabled&&i.selectable?(this.isMultipleSelection()&&this.isSelected(i)?(this.value=this.value.filter((s,r)=>!this.isDateEquals(s,i)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(i)&&this.selectDate(i),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{t.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),t.preventDefault()):t.preventDefault()}shouldSelectDate(t){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(t,i){"month"===this.view?this.onDateSelect(t,{year:this.currentYear,month:i,day:1,selectable:!0}):(this.currentMonth=i,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(t,i){"year"===this.view?this.onDateSelect(t,{year:i,month:0,day:1,selectable:!0}):(this.currentYear=i,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let t="";if(this.value)if(this.isSingleSelection())t=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let i=0;i<this.value.length;i++)t+=this.formatDateTime(this.value[i]),i!==this.value.length-1&&(t+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let s=this.value[1];t=this.formatDateTime(this.value[0]),s&&(t+=" "+this.rangeSeparator+" "+this.formatDateTime(s))}this.inputFieldValue=t,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(t){let i=this.keepInvalid?t:null;return this.isValidDate(t)&&(this.timeOnly?i=this.formatTime(t):(i=this.formatDate(t,this.getDateFormat()),this.showTime&&(i+=" "+this.formatTime(t)))),i}setCurrentHourPM(t){"12"==this.hourFormat?(this.pm=t>11,this.currentHour=t>=12?12==t?12:t-12:0==t?12:t):this.currentHour=t}setCurrentView(t){this.currentView=t,this.cd.detectChanges(),this.alignOverlay()}selectDate(t){let i=new Date(t.year,t.month,t.day);if(this.showTime&&(i.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),i.setMinutes(this.currentMinute),i.setSeconds(this.currentSecond)),this.minDate&&this.minDate>i&&(i=this.minDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.maxDate&&this.maxDate<i&&(i=this.maxDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.isSingleSelection())this.updateModel(i);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,i]:[i]);else if(this.isRangeSelection())if(this.value&&this.value.length){let s=this.value[0],r=this.value[1];!r&&i.getTime()>=s.getTime()?r=i:(s=i,r=null),this.updateModel([s,r])}else this.updateModel([i,null]);this.onSelect.emit(i)}updateModel(t){if(this.value=t,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let i=null;Array.isArray(this.value)&&(i=this.value.map(s=>this.formatDateTime(s))),this.onModelChange(i)}}getFirstDayOfMonthIndex(t,i){let s=new Date;s.setDate(1),s.setMonth(t),s.setFullYear(i);let r=s.getDay()+this.getSundayIndex();return r>=7?r-7:r}getDaysCountInMonth(t,i){return 32-this.daylightSavingAdjust(new Date(i,t,32)).getDate()}getDaysCountInPrevMonth(t,i){let s=this.getPreviousMonthAndYear(t,i);return this.getDaysCountInMonth(s.month,s.year)}getPreviousMonthAndYear(t,i){let s,r;return 0===t?(s=11,r=i-1):(s=t-1,r=i),{month:s,year:r}}getNextMonthAndYear(t,i){let s,r;return 11===t?(s=0,r=i+1):(s=t+1,r=i),{month:s,year:r}}getSundayIndex(){let t=this.getFirstDateOfWeek();return t>0?7-t:0}isSelected(t){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,t);if(this.isMultipleSelection()){let i=!1;for(let s of this.value)if(i=this.isDateEquals(s,t),i)break;return i}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],t)||this.isDateEquals(this.value[1],t)||this.isDateBetween(this.value[0],this.value[1],t):this.isDateEquals(this.value[0],t):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(t){if(this.isComparable()&&!this.isMultipleSelection()){const[i,s]=this.isRangeSelection()?this.value:[this.value,this.value],r=new Date(this.currentYear,t,1);return r>=i&&r<=(s??i)}return!1}isMonthDisabled(t){for(let i=1;i<this.getDaysCountInMonth(t,this.currentYear)+1;i++)if(this.isSelectable(i,t,this.currentYear,!1))return!1;return!0}isYearDisabled(t){return!this.isSelectable(1,this.currentMonth,t,!1)}isYearSelected(t){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getFullYear()===t}return!1}isDateEquals(t,i){return!(!t||!De.gb.isDate(t))&&t.getDate()===i.day&&t.getMonth()===i.month&&t.getFullYear()===i.year}isDateBetween(t,i,s){if(De.gb.isDate(t)&&De.gb.isDate(i)){let o=new Date(s.year,s.month,s.day);return t.getTime()<=o.getTime()&&i.getTime()>=o.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(t,i,s,r){return t.getDate()===i&&t.getMonth()===s&&t.getFullYear()===r}isSelectable(t,i,s,r){let o=!0,a=!0,l=!0,c=!0;return!(r&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>s||this.minDate.getFullYear()===s&&(this.minDate.getMonth()>i||this.minDate.getMonth()===i&&this.minDate.getDate()>t))&&(o=!1),this.maxDate&&(this.maxDate.getFullYear()<s||this.maxDate.getFullYear()===s&&(this.maxDate.getMonth()<i||this.maxDate.getMonth()===i&&this.maxDate.getDate()<t))&&(a=!1),this.disabledDates&&(l=!this.isDateDisabled(t,i,s)),this.disabledDays&&(c=!this.isDayDisabled(t,i,s)),o&&a&&l&&c)}isDateDisabled(t,i,s){if(this.disabledDates)for(let r of this.disabledDates)if(r.getFullYear()===s&&r.getMonth()===i&&r.getDate()===t)return!0;return!1}isDayDisabled(t,i,s){if(this.disabledDays){let o=new Date(s,i,t).getDay();return-1!==this.disabledDays.indexOf(o)}return!1}onInputFocus(t){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(t)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(t){this.focus=!1,this.onBlur.emit(t),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(t,i=this.inputfieldViewChild?.nativeElement){this.overlayVisible?this.hideOverlay():(i.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement})}getMonthName(t){return this.config.getTranslation("monthNames")[t]}getYear(t){return"month"===this.currentView?this.currentYear:t.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(t){this.navigationState={backward:!0,button:!0},this.navBackward(t)}onNextButtonClick(t){this.navigationState={backward:!1,button:!0},this.navForward(t)}onContainerButtonKeydown(t){switch(t.which){case 9:if(this.inline||this.trapFocus(t),this.inline){const i=Y.p.findSingle(this.containerViewChild?.nativeElement,".p-datepicker-header");t.target==i.children[i.children.length-1]&&this.initFocusableCell()}break;case 27:this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,t.preventDefault()}}onInputKeydown(t){this.isKeydown=!0,40===t.keyCode&&this.contentViewChild?this.trapFocus(t):27===t.keyCode?this.overlayVisible&&(this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,t.preventDefault()):13===t.keyCode?this.overlayVisible&&(this.overlayVisible=!1,t.preventDefault()):9===t.keyCode&&this.contentViewChild&&(Y.p.getFocusableElements(this.contentViewChild.nativeElement).forEach(i=>i.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(t,i,s){const r=t.currentTarget,o=r.parentElement;switch(t.which){case 40:{r.tabIndex="-1";let a=Y.p.index(o),l=o.parentElement.nextElementSibling;l?Y.p.hasClass(l.children[a].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(t)):(l.children[a].children[0].tabIndex="0",l.children[a].children[0].focus()):(this.navigationState={backward:!1},this.navForward(t)),t.preventDefault();break}case 38:{r.tabIndex="-1";let a=Y.p.index(o),l=o.parentElement.previousElementSibling;if(l){let c=l.children[a].children[0];Y.p.hasClass(c,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(t)):(c.tabIndex="0",c.focus())}else this.navigationState={backward:!0},this.navBackward(t);t.preventDefault();break}case 37:{r.tabIndex="-1";let a=o.previousElementSibling;if(a){let l=a.children[0];Y.p.hasClass(l,"p-disabled")||Y.p.hasClass(l.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,s):(l.tabIndex="0",l.focus())}else this.navigateToMonth(!0,s);t.preventDefault();break}case 39:{r.tabIndex="-1";let a=o.nextElementSibling;if(a){let l=a.children[0];Y.p.hasClass(l,"p-disabled")?this.navigateToMonth(!1,s):(l.tabIndex="0",l.focus())}else this.navigateToMonth(!1,s);t.preventDefault();break}case 13:case 32:this.onDateSelect(t,i),t.preventDefault();break;case 27:this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,t.preventDefault();break;case 9:this.inline||this.trapFocus(t)}}onMonthCellKeydown(t,i){const s=t.currentTarget;switch(t.which){case 38:case 40:{s.tabIndex="-1";var r=s.parentElement.children,o=Y.p.index(s);let a=r[40===t.which?o+3:o-3];a&&(a.tabIndex="0",a.focus()),t.preventDefault();break}case 37:{s.tabIndex="-1";let a=s.previousElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!0},this.navBackward(t)),t.preventDefault();break}case 39:{s.tabIndex="-1";let a=s.nextElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!1},this.navForward(t)),t.preventDefault();break}case 13:case 32:this.onMonthSelect(t,i),t.preventDefault();break;case 27:this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,t.preventDefault();break;case 9:this.inline||this.trapFocus(t)}}onYearCellKeydown(t,i){const s=t.currentTarget;switch(t.which){case 38:case 40:{s.tabIndex="-1";var r=s.parentElement.children,o=Y.p.index(s);let a=r[40===t.which?o+2:o-2];a&&(a.tabIndex="0",a.focus()),t.preventDefault();break}case 37:{s.tabIndex="-1";let a=s.previousElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!0},this.navBackward(t)),t.preventDefault();break}case 39:{s.tabIndex="-1";let a=s.nextElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!1},this.navForward(t)),t.preventDefault();break}case 13:case 32:this.onYearSelect(t,i),t.preventDefault();break;case 27:this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,t.preventDefault();break;case 9:this.trapFocus(t)}}navigateToMonth(t,i){if(t)if(1===this.numberOfMonths||0===i)this.navigationState={backward:!0},this.navBackward(event);else{let r=Y.p.find(this.contentViewChild.nativeElement.children[i-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),o=r[r.length-1];o.tabIndex="0",o.focus()}else if(1===this.numberOfMonths||i===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let r=Y.p.findSingle(this.contentViewChild.nativeElement.children[i+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");r.tabIndex="0",r.focus()}}updateFocus(){let t;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?Y.p.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():Y.p.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let i;i=Y.p.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),i&&i.length>0&&(t=i[i.length-1])}else t=Y.p.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");t&&(t.tabIndex="0",t.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){const t=this.contentViewChild?.nativeElement;let i;if("month"===this.currentView){let s=Y.p.find(t,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=Y.p.findSingle(t,".p-monthpicker .p-monthpicker-month.p-highlight");s.forEach(o=>o.tabIndex=-1),i=r||s[0],0===s.length&&Y.p.find(t,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if("year"===this.currentView){let s=Y.p.find(t,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=Y.p.findSingle(t,".p-yearpicker .p-yearpicker-year.p-highlight");s.forEach(o=>o.tabIndex=-1),i=r||s[0],0===s.length&&Y.p.find(t,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if(i=Y.p.findSingle(t,"span.p-highlight"),!i){let s=Y.p.findSingle(t,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");i=s||Y.p.findSingle(t,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}i&&(i.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{this.disabled||i.focus()},1),this.preventFocus=!1)}trapFocus(t){let i=Y.p.getFocusableElements(this.contentViewChild.nativeElement);if(i&&i.length>0)if(i[0].ownerDocument.activeElement){let s=i.indexOf(i[0].ownerDocument.activeElement);if(t.shiftKey)if(-1==s||0===s)if(this.focusTrap)i[i.length-1].focus();else{if(-1===s)return this.hideOverlay();if(0===s)return}else i[s-1].focus();else if(-1==s)if(this.timeOnly)i[0].focus();else{let r=0;for(let o=0;o<i.length;o++)"SPAN"===i[o].tagName&&(r=o);i[r].focus()}else if(s===i.length-1){if(!this.focusTrap&&-1!=s)return this.hideOverlay();i[0].focus()}else i[s+1].focus()}else i[0].focus();t.preventDefault()}onMonthDropdownChange(t){this.currentMonth=parseInt(t),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(t){this.currentYear=parseInt(t),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}convertTo24Hour=function(t,i){return"12"==this.hourFormat?12===t?i?12:0:i?t+12:t:t};validateTime(t,i,s,r){let o=this.value;const a=this.convertTo24Hour(t,r);this.isRangeSelection()&&(o=this.value[1]||this.value[0]),this.isMultipleSelection()&&(o=this.value[this.value.length-1]);const l=o?o.toDateString():null;return!(this.minDate&&l&&this.minDate.toDateString()===l&&(this.minDate.getHours()>a||this.minDate.getHours()===a&&(this.minDate.getMinutes()>i||this.minDate.getMinutes()===i&&this.minDate.getSeconds()>s))||this.maxDate&&l&&this.maxDate.toDateString()===l&&(this.maxDate.getHours()<a||this.maxDate.getHours()===a&&(this.maxDate.getMinutes()<i||this.maxDate.getMinutes()===i&&this.maxDate.getSeconds()<s)))}incrementHour(t){let s=this.currentHour+this.stepHour,r=this.pm;"24"==this.hourFormat?s=s>=24?s-24:s:"12"==this.hourFormat&&(this.currentHour<12&&s>11&&(r=!this.pm),s=s>=13?s-12:s),this.validateTime(s,this.currentMinute,this.currentSecond,r)&&(this.currentHour=s,this.pm=r),t.preventDefault()}onTimePickerElementMouseDown(t,i,s){this.disabled||(this.repeat(t,null,i,s),t.preventDefault())}onTimePickerElementMouseUp(t){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(t,i,s,r){let o=i||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(t,100,s,r),this.cd.markForCheck()},o),s){case 0:1===r?this.incrementHour(t):this.decrementHour(t);break;case 1:1===r?this.incrementMinute(t):this.decrementMinute(t);break;case 2:1===r?this.incrementSecond(t):this.decrementSecond(t)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(t){let i=this.currentHour-this.stepHour,s=this.pm;"24"==this.hourFormat?i=i<0?24+i:i:"12"==this.hourFormat&&(12===this.currentHour&&(s=!this.pm),i=i<=0?12+i:i),this.validateTime(i,this.currentMinute,this.currentSecond,s)&&(this.currentHour=i,this.pm=s),t.preventDefault()}incrementMinute(t){let i=this.currentMinute+this.stepMinute;i=i>59?i-60:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),t.preventDefault()}decrementMinute(t){let i=this.currentMinute-this.stepMinute;i=i<0?60+i:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),t.preventDefault()}incrementSecond(t){let i=this.currentSecond+this.stepSecond;i=i>59?i-60:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),t.preventDefault()}decrementSecond(t){let i=this.currentSecond-this.stepSecond;i=i<0?60+i:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),t.preventDefault()}updateTime(){let t=this.value;this.isRangeSelection()&&(t=this.value[1]||this.value[0]),this.isMultipleSelection()&&(t=this.value[this.value.length-1]),t=t?new Date(t.getTime()):new Date,t.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),t.setMinutes(this.currentMinute),t.setSeconds(this.currentSecond),this.isRangeSelection()&&(t=this.value[1]?[this.value[0],t]:[t,null]),this.isMultipleSelection()&&(t=[...this.value.slice(0,-1),t]),this.updateModel(t),this.onSelect.emit(t),this.updateInputfield()}toggleAMPM(t){const i=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,i)&&(this.pm=i,this.updateTime()),t.preventDefault()}onUserInput(t){if(!this.isKeydown)return;this.isKeydown=!1;let i=t.target.value;try{let s=this.parseValueFromString(i);this.isValidSelection(s)?(this.updateModel(s),this.updateUI()):this.keepInvalid&&this.updateModel(s)}catch{this.updateModel(this.keepInvalid?i:null)}this.filled=null!=i&&i.length,this.onInput.emit(t)}isValidSelection(t){let i=!0;return this.isSingleSelection()?this.isSelectable(t.getDate(),t.getMonth(),t.getFullYear(),!1)||(i=!1):t.every(s=>this.isSelectable(s.getDate(),s.getMonth(),s.getFullYear(),!1))&&this.isRangeSelection()&&(i=t.length>1&&t[1]>t[0]),i}parseValueFromString(t){if(!t||0===t.trim().length)return null;let i;if(this.isSingleSelection())i=this.parseDateTime(t);else if(this.isMultipleSelection()){let s=t.split(this.multipleSeparator);i=[];for(let r of s)i.push(this.parseDateTime(r.trim()))}else if(this.isRangeSelection()){let s=t.split(" "+this.rangeSeparator+" ");i=[];for(let r=0;r<s.length;r++)i[r]=this.parseDateTime(s[r].trim())}return i}parseDateTime(t){let i,s=t.split(" ");if(this.timeOnly)i=new Date,this.populateTime(i,s[0],s[1]);else{const r=this.getDateFormat();if(this.showTime){let o="12"==this.hourFormat?s.pop():null,a=s.pop();i=this.parseDate(s.join(" "),r),this.populateTime(i,a,o)}else i=this.parseDate(t,r)}return i}populateTime(t,i,s){if("12"==this.hourFormat&&!s)throw"Invalid Time";this.pm="PM"===s||"pm"===s;let r=this.parseTime(i);t.setHours(r.hour),t.setMinutes(r.minute),t.setSeconds(r.second)}isValidDate(t){return De.gb.isDate(t)&&De.gb.isNotEmpty(t)}updateUI(){let t=this.value;Array.isArray(t)&&(t=t[0]);let i=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:t&&this.isValidDate(t)?t:new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild?.nativeElement.focus()))}onOverlayAnimationStart(t){switch(t.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=t.element,this.overlay?.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?De.P9.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):De.P9.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(t));break;case"void":this.onOverlayHide(),this.onClose.emit(t)}}onOverlayAnimationDone(t){switch(t.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&De.P9.clear(t.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?this.document.body.appendChild(this.overlay):Y.p.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=Y.p.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=Y.p.getOuterWidth(this.inputfieldViewChild?.nativeElement)+"px"):this.overlay.style.width=Y.p.getOuterWidth(this.inputfieldViewChild?.nativeElement)+"px",Y.p.absolutePosition(this.overlay,this.inputfieldViewChild?.nativeElement)):Y.p.relativePosition(this.overlay,this.inputfieldViewChild?.nativeElement))}enableModality(t){!this.mask&&this.touchUI&&(this.mask=this.renderer.createElement("div"),this.renderer.setStyle(this.mask,"zIndex",String(parseInt(t.style.zIndex)-1)),Y.p.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",s=>{this.disableModality(),this.overlayVisible=!1}),this.renderer.appendChild(this.document.body,this.mask),Y.p.blockBodyScroll())}disableModality(){this.mask&&(Y.p.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener||(this.animationEndListener=this.renderer.listen(this.mask,"animationend",this.destroyMask.bind(this))))}destroyMask(){if(!this.mask)return;this.renderer.removeChild(this.document.body,this.mask);let i,t=this.document.body.children;for(let s=0;s<t.length;s++)if(Y.p.hasClass(t[s],"p-datepicker-mask-scrollblocker")){i=!0;break}i||Y.p.unblockBodyScroll(),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.animationEndListener(),this.animationEndListener=null)}writeValue(t){if(this.value=t,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=t)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Re.ws.FIRST_DAY_OF_WEEK)}formatDate(t,i){if(!t)return"";let s;const r=d=>{const u=s+1<i.length&&i.charAt(s+1)===d;return u&&s++,u},o=(d,u,f)=>{let p=""+u;if(r(d))for(;p.length<f;)p="0"+p;return p},a=(d,u,f,p)=>r(d)?p[u]:f[u];let l="",c=!1;if(t)for(s=0;s<i.length;s++)if(c)"'"!==i.charAt(s)||r("'")?l+=i.charAt(s):c=!1;else switch(i.charAt(s)){case"d":l+=o("d",t.getDate(),2);break;case"D":l+=a("D",t.getDay(),this.getTranslation(Re.ws.DAY_NAMES_SHORT),this.getTranslation(Re.ws.DAY_NAMES));break;case"o":l+=o("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=o("m",t.getMonth()+1,2);break;case"M":l+=a("M",t.getMonth(),this.getTranslation(Re.ws.MONTH_NAMES_SHORT),this.getTranslation(Re.ws.MONTH_NAMES));break;case"y":l+=r("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=1e4*t.getTime()+this.ticksTo1970;break;case"'":r("'")?l+="'":c=!0;break;default:l+=i.charAt(s)}return l}formatTime(t){if(!t)return"";let i="",s=t.getHours(),r=t.getMinutes(),o=t.getSeconds();return"12"==this.hourFormat&&s>11&&12!=s&&(s-=12),i+="12"==this.hourFormat&&0===s?12:s<10?"0"+s:s,i+=":",i+=r<10?"0"+r:r,this.showSeconds&&(i+=":",i+=o<10?"0"+o:o),"12"==this.hourFormat&&(i+=t.getHours()>11?" PM":" AM"),i}parseTime(t){let i=t.split(":");if(i.length!==(this.showSeconds?3:2))throw"Invalid time";let r=parseInt(i[0]),o=parseInt(i[1]),a=this.showSeconds?parseInt(i[2]):null;if(isNaN(r)||isNaN(o)||r>23||o>59||"12"==this.hourFormat&&r>12||this.showSeconds&&(isNaN(a)||a>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==r&&this.pm?r+=12:!this.pm&&12===r&&(r-=12)),{hour:r,minute:o,second:a}}parseDate(t,i){if(null==i||null==t)throw"Invalid arguments";if(""===(t="object"==typeof t?t.toString():t+""))return null;let s,r,o,g,a=0,l="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),c=-1,d=-1,u=-1,f=-1,p=!1,m=C=>{let v=s+1<i.length&&i.charAt(s+1)===C;return v&&s++,v},_=C=>{let v=m(C),b="@"===C?14:"!"===C?20:"y"===C&&v?4:"o"===C?3:2,T=new RegExp("^\\d{"+("y"===C?b:1)+","+b+"}"),S=t.substring(a).match(T);if(!S)throw"Missing number at position "+a;return a+=S[0].length,parseInt(S[0],10)},y=(C,v,b)=>{let w=-1,T=m(C)?b:v,S=[];for(let E=0;E<T.length;E++)S.push([E,T[E]]);S.sort((E,P)=>-(E[1].length-P[1].length));for(let E=0;E<S.length;E++){let P=S[E][1];if(t.substr(a,P.length).toLowerCase()===P.toLowerCase()){w=S[E][0],a+=P.length;break}}if(-1!==w)return w+1;throw"Unknown name at position "+a},x=()=>{if(t.charAt(a)!==i.charAt(s))throw"Unexpected literal at position "+a;a++};for("month"===this.view&&(u=1),s=0;s<i.length;s++)if(p)"'"!==i.charAt(s)||m("'")?x():p=!1;else switch(i.charAt(s)){case"d":u=_("d");break;case"D":y("D",this.getTranslation(Re.ws.DAY_NAMES_SHORT),this.getTranslation(Re.ws.DAY_NAMES));break;case"o":f=_("o");break;case"m":d=_("m");break;case"M":d=y("M",this.getTranslation(Re.ws.MONTH_NAMES_SHORT),this.getTranslation(Re.ws.MONTH_NAMES));break;case"y":c=_("y");break;case"@":g=new Date(_("@")),c=g.getFullYear(),d=g.getMonth()+1,u=g.getDate();break;case"!":g=new Date((_("!")-this.ticksTo1970)/1e4),c=g.getFullYear(),d=g.getMonth()+1,u=g.getDate();break;case"'":m("'")?x():p=!0;break;default:x()}if(a<t.length&&(o=t.substr(a),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===c?c=(new Date).getFullYear():c<100&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=l?0:-100)),f>-1)for(d=1,u=f;r=this.getDaysCountInMonth(c,d-1),!(u<=r);)d++,u-=r;if("year"===this.view&&(d=-1===d?1:d,u=-1===u?1:u),g=this.daylightSavingAdjust(new Date(c,d-1,u)),g.getFullYear()!==c||g.getMonth()+1!==d||g.getDate()!==u)throw"Invalid date";return g}daylightSavingAdjust(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(t){const i=new Date,s={day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),otherMonth:i.getMonth()!==this.currentMonth||i.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.createMonths(i.getMonth(),i.getFullYear()),this.onDateSelect(t,s),this.onTodayClick.emit(t)}onClearButtonClick(t){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(t)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=this.renderer.createElement("style"),this.responsiveStyleElement.type="text/css",this.renderer.appendChild(this.document.body,this.responsiveStyleElement));let t="";if(this.responsiveOptions){let i=[...this.responsiveOptions].filter(s=>!(!s.breakpoint||!s.numMonths)).sort((s,r)=>-1*s.breakpoint.localeCompare(r.breakpoint,void 0,{numeric:!0}));for(let s=0;s<i.length;s++){let{breakpoint:r,numMonths:o}=i[s],a=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${o}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let l=o;l<this.numberOfMonths;l++)a+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${l+1}) {\n                                display: none !important;\n                            }\n                        `;t+=`\n                        @media screen and (max-width: ${r}) {\n                            ${a}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=t}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:this.document,"mousedown",i=>{this.isOutsideClicked(i)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(i),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.renderer.listen(this.window,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Y.V(this.containerViewChild?.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(t){return!(this.el.nativeElement.isSameNode(t.target)||this.isNavIconClicked(t)||this.el.nativeElement.contains(t.target)||this.overlay&&this.overlay.contains(t.target))}isNavIconClicked(t){return Y.p.hasClass(t.target,"p-datepicker-prev")||Y.p.hasClass(t.target,"p-datepicker-prev-icon")||Y.p.hasClass(t.target,"p-datepicker-next")||Y.p.hasClass(t.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!Y.p.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&De.P9.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}static \u0275fac=function(i){return new(i||n)(h.Y36(Me.K0),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(h.R0b),h.Y36(Re.b4),h.Y36(Re.F0))};static \u0275cmp=h.Xpm({type:n,selectors:[["p-calendar"]],contentQueries:function(i,s,r){if(1&i&&h.Suo(r,Re.jx,4),2&i){let o;h.iGM(o=h.CRH())&&(s.templates=o)}},viewQuery:function(i,s){if(1&i&&(h.Gf(V1,5),h.Gf(N1,5),h.Gf(B1,5)),2&i){let r;h.iGM(r=h.CRH())&&(s.containerViewChild=r.first),h.iGM(r=h.CRH())&&(s.inputfieldViewChild=r.first),h.iGM(r=h.CRH())&&(s.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(i,s){2&i&&h.ekj("p-inputwrapper-filled",s.filled)("p-inputwrapper-focus",s.focus)("p-calendar-clearable",s.showClear&&!s.disabled)},inputs:{iconDisplay:"iconDisplay",style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale",view:"view",defaultDate:"defaultDate"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[h._Bn([Ex])],ngContentSelectors:Sx,decls:4,vars:12,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","role","combobox","aria-autocomplete","none","aria-haspopup","dialog","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],[4,"ngIf"],["type","button","aria-haspopup","dialog","pButton","","pRipple","","class","p-datepicker-trigger p-button-icon-only","tabindex","0",3,"disabled","click",4,"ngIf"],[3,"styleClass","click",4,"ngIf"],["class","p-calendar-clear-icon",3,"click",4,"ngIf"],[3,"styleClass","click"],[1,"p-calendar-clear-icon",3,"click"],[4,"ngTemplateOutlet"],["type","button","aria-haspopup","dialog","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger","p-button-icon-only",3,"disabled","click"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"click",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[3,"styleClass",4,"ngIf"],["class","p-datepicker-next-icon",4,"ngIf"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],["class","p-datepicker-prev-icon",4,"ngIf"],[3,"styleClass"],[1,"p-datepicker-prev-icon"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[1,"p-datepicker-next-icon"],[1,"p-datepicker-calendar-container"],["role","grid",1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],["class","p-hidden-accessible","aria-live","polite",4,"ngIf"],["aria-live","polite",1,"p-hidden-accessible"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(i,s){1&i&&(h.F$t(Ix),h.TgZ(0,"span",0,1),h.YNc(2,ny,5,21,"ng-template",2)(3,wx,9,31,"div",3),h.qZA()),2&i&&(h.Tol(s.styleClass),h.Q6J("ngClass",h.qbA(6,Tx,s.showIcon&&"input"===s.iconDisplay,s.showIcon&&"button"===s.iconDisplay,s.timeOnly,s.disabled,s.focus||s.overlayVisible))("ngStyle",s.style),h.xp6(2),h.Q6J("ngIf",!s.inline),h.xp6(1),h.Q6J("ngIf",s.inline||s.overlayVisible))},dependencies:()=>[Me.mk,Me.sg,Me.O5,Me.tP,Me.PC,Ms.Hq,Es.H,Cd.w,Ma.X,wd,ka.v,Nr.q,Id],styles:["@layer primeng{.p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}}\n"],encapsulation:2,data:{animation:[(0,tt.X$)("overlayAnimation",[(0,tt.SB)("visibleTouchUI",(0,tt.oB)({transform:"translate(-50%,-50%)",opacity:1})),(0,tt.eR)("void => visible",[(0,tt.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,tt.jt)("{{showTransitionParams}}",(0,tt.oB)({opacity:1,transform:"*"}))]),(0,tt.eR)("visible => void",[(0,tt.jt)("{{hideTransitionParams}}",(0,tt.oB)({opacity:0}))]),(0,tt.eR)("void => visibleTouchUI",[(0,tt.oB)({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),(0,tt.jt)("{{showTransitionParams}}")]),(0,tt.eR)("visibleTouchUI => void",[(0,tt.jt)("{{hideTransitionParams}}",(0,tt.oB)({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0})}return n})(),kx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({imports:[Me.ez,Ms.hJ,Re.m8,Es.T,Cd.w,Ma.X,wd,ka.v,Nr.q,Id,Ms.hJ,Re.m8]})}return n})();var Rx=Q(2105),Dx=Q(354),Ox=Q(3714),Lx=Q(1712),Ed=Q(6489);const Px=["container"];function Fx(n,e){if(1&n&&h._UZ(0,"span",8),2&n){const t=h.oxw(2).$implicit;h.Tol(t.icon),h.Q6J("ngClass","p-button-icon p-button-icon-left"),h.uIk("data-pc-section","icon")}}function Ax(n,e){if(1&n&&(h.ynx(0),h.YNc(1,Fx,1,4,"span",6),h.TgZ(2,"span",7),h._uU(3),h.qZA(),h.BQk()),2&n){const t=h.oxw().$implicit,i=h.oxw();h.xp6(1),h.Q6J("ngIf",t.icon),h.xp6(1),h.uIk("data-pc-section","label"),h.xp6(1),h.Oqu(i.getOptionLabel(t))}}function zx(n,e){1&n&&h.GkF(0)}const Hx=(n,e)=>({$implicit:n,index:e});function Vx(n,e){if(1&n&&h.YNc(0,zx,1,0,"ng-container",9),2&n){const t=h.oxw(),i=t.$implicit,s=t.index,r=h.oxw();h.Q6J("ngTemplateOutlet",r.selectButtonTemplate)("ngTemplateOutletContext",h.WLB(2,Hx,i,s))}}const Nx=(n,e,t)=>({"p-highlight":n,"p-disabled":e,"p-button-icon-only":t});function Bx(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",3),h.NdJ("click",function(s){const r=h.CHM(t),o=r.$implicit,a=r.index,l=h.oxw();return h.KtG(l.onOptionSelect(s,o,a))})("keydown",function(s){const r=h.CHM(t),o=r.$implicit,a=r.index,l=h.oxw();return h.KtG(l.onKeyDown(s,o,a))})("focus",function(s){const o=h.CHM(t).index,a=h.oxw();return h.KtG(a.onFocus(s,o))})("blur",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.onBlur())}),h.YNc(1,Ax,4,3,"ng-container",4)(2,Vx,1,5,"ng-template",null,5,h.W1O),h.qZA()}if(2&n){const t=e.$implicit,i=e.index,s=h.MAs(3),r=h.oxw();h.Tol(t.styleClass),h.Q6J("role",r.multiple?"checkbox":"radio")("ngClass",h.kEZ(14,Nx,r.isSelected(t),r.disabled||r.isOptionDisabled(t),t.icon&&!r.getOptionLabel(t))),h.uIk("tabindex",i===r.focusedIndex?"0":"-1")("aria-label",t.label)("aria-checked",r.isSelected(t))("aria-disabled",r.optionDisabled)("aria-pressed",r.isSelected(t))("title",t.title)("aria-labelledby",r.getOptionLabel(t))("data-pc-section","button"),h.xp6(1),h.Q6J("ngIf",!r.itemTemplate)("ngIfElse",s)}}const Kx={provide:me.JU,useExisting:(0,h.Gpc)(()=>Wx),multi:!0};let Wx=(()=>{class n{cd;options;optionLabel;optionValue;optionDisabled;unselectable=!1;tabindex=0;multiple;allowEmpty=!0;style;styleClass;ariaLabelledBy;disabled;dataKey;onOptionClick=new h.vpe;onChange=new h.vpe;container;itemTemplate;get selectButtonTemplate(){return this.itemTemplate?.template}get equalityKey(){return this.optionValue?null:this.dataKey}value;onModelChange=()=>{};onModelTouched=()=>{};focusedIndex=0;constructor(t){this.cd=t}getOptionLabel(t){return this.optionLabel?De.gb.resolveFieldData(t,this.optionLabel):null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?De.gb.resolveFieldData(t,this.optionValue):this.optionLabel||void 0===t.value?t:t.value}isOptionDisabled(t){return this.optionDisabled?De.gb.resolveFieldData(t,this.optionDisabled):void 0!==t.disabled&&t.disabled}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onOptionSelect(t,i,s){if(this.disabled||this.isOptionDisabled(i))return;let r=this.isSelected(i);if(r&&this.unselectable)return;let a,o=this.getOptionValue(i);if(this.multiple)a=r?this.value.filter(l=>!De.gb.equals(l,o,this.equalityKey)):this.value?[...this.value,o]:[o];else{if(r&&!this.allowEmpty)return;a=r?null:o}this.focusedIndex=s,this.value=a,this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.onOptionClick.emit({originalEvent:t,option:i,index:s})}onKeyDown(t,i,s){switch(t.code){case"Space":this.onOptionSelect(t,i,s),t.preventDefault();break;case"ArrowDown":case"ArrowRight":this.changeTabIndexes(t,"next"),t.preventDefault();break;case"ArrowUp":case"ArrowLeft":this.changeTabIndexes(t,"prev"),t.preventDefault()}}changeTabIndexes(t,i){let s,r;for(let o=0;o<=this.container.nativeElement.children.length-1;o++)"0"===this.container.nativeElement.children[o].getAttribute("tabindex")&&(s={elem:this.container.nativeElement.children[o],index:o});r="prev"===i?0===s.index?this.container.nativeElement.children.length-1:s.index-1:s.index===this.container.nativeElement.children.length-1?0:s.index+1,this.focusedIndex=r,this.container.nativeElement.children[r].focus()}onFocus(t,i){this.focusedIndex=i}onBlur(){this.onModelTouched()}removeOption(t){this.value=this.value.filter(i=>!De.gb.equals(i,this.getOptionValue(t),this.dataKey))}isSelected(t){let i=!1;const s=this.getOptionValue(t);if(this.multiple){if(this.value&&Array.isArray(this.value))for(let r of this.value)if(De.gb.equals(r,s,this.dataKey)){i=!0;break}}else i=De.gb.equals(this.getOptionValue(t),this.value,this.equalityKey);return i}static \u0275fac=function(i){return new(i||n)(h.Y36(h.sBO))};static \u0275cmp=h.Xpm({type:n,selectors:[["p-selectButton"]],contentQueries:function(i,s,r){if(1&i&&h.Suo(r,Re.jx,5),2&i){let o;h.iGM(o=h.CRH())&&(s.itemTemplate=o.first)}},viewQuery:function(i,s){if(1&i&&h.Gf(Px,5),2&i){let r;h.iGM(r=h.CRH())&&(s.container=r.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",unselectable:"unselectable",tabindex:"tabindex",multiple:"multiple",allowEmpty:"allowEmpty",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[h._Bn([Kx])],decls:3,vars:8,consts:[["role","group",3,"ngClass","ngStyle"],["container",""],["pRipple","","class","p-button p-component",3,"role","class","ngClass","click","keydown","focus","blur",4,"ngFor","ngForOf"],["pRipple","",1,"p-button","p-component",3,"role","ngClass","click","keydown","focus","blur"],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,s){1&i&&(h.TgZ(0,"div",0,1),h.YNc(2,Bx,4,18,"div",2),h.qZA()),2&i&&(h.Tol(s.styleClass),h.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",s.style),h.uIk("aria-labelledby",s.ariaLabelledBy)("data-pc-name","selectbutton")("data-pc-section","root"),h.xp6(2),h.Q6J("ngForOf",s.options))},dependencies:[Me.mk,Me.sg,Me.O5,Me.tP,Me.PC,Es.H],styles:['@layer primeng{.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default;pointer-events:none}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}p-button[iconpos=right] spinnericon{order:1}}\n'],encapsulation:2,changeDetection:0})}return n})(),Gx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({imports:[Me.ez,Es.T,Re.m8,Re.m8]})}return n})();var Oa=Q(2591);function jx(n,e){if(1&n&&h._UZ(0,"span",8),2&n){const t=h.oxw(2);h.Q6J("ngClass",t.checkboxTrueIcon),h.uIk("data-pc-section","checkIcon")}}function Yx(n,e){1&n&&h._UZ(0,"CheckIcon",11),2&n&&(h.Q6J("styleClass","p-checkbox-icon"),h.uIk("data-pc-section","checkIcon"))}function Ux(n,e){}function Zx(n,e){1&n&&h.YNc(0,Ux,0,0,"ng-template")}function Xx(n,e){if(1&n&&(h.TgZ(0,"span",12),h.YNc(1,Zx,1,0,null,13),h.qZA()),2&n){const t=h.oxw(3);h.uIk("data-pc-section","checkIcon"),h.xp6(1),h.Q6J("ngTemplateOutlet",t.checkIconTemplate)}}function $x(n,e){if(1&n&&(h.ynx(0),h.YNc(1,Yx,1,2,"CheckIcon",9)(2,Xx,2,2,"span",10),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.Q6J("ngIf",!t.checkIconTemplate),h.xp6(1),h.Q6J("ngIf",t.checkIconTemplate)}}function qx(n,e){if(1&n&&(h.ynx(0),h.YNc(1,jx,1,2,"span",7)(2,$x,3,2,"ng-container",5),h.BQk()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.checkboxTrueIcon),h.xp6(1),h.Q6J("ngIf",!t.checkboxTrueIcon)}}function Jx(n,e){if(1&n&&h._UZ(0,"span",8),2&n){const t=h.oxw(2);h.Q6J("ngClass",t.checkboxFalseIcon),h.uIk("data-pc-section","uncheckIcon")}}function Qx(n,e){1&n&&h._UZ(0,"TimesIcon",11),2&n&&(h.Q6J("styleClass","p-checkbox-icon"),h.uIk("data-pc-section","uncheckIcon"))}function ev(n,e){}function tv(n,e){1&n&&h.YNc(0,ev,0,0,"ng-template")}function iv(n,e){if(1&n&&(h.TgZ(0,"span",12),h.YNc(1,tv,1,0,null,13),h.qZA()),2&n){const t=h.oxw(3);h.uIk("data-pc-section","uncheckIcon"),h.xp6(1),h.Q6J("ngTemplateOutlet",t.uncheckIconTemplate)}}function nv(n,e){if(1&n&&(h.ynx(0),h.YNc(1,Qx,1,2,"TimesIcon",9)(2,iv,2,2,"span",10),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.Q6J("ngIf",!t.uncheckIconTemplate),h.xp6(1),h.Q6J("ngIf",t.uncheckIconTemplate)}}function sv(n,e){if(1&n&&(h.ynx(0),h.YNc(1,Jx,1,2,"span",7)(2,nv,3,2,"ng-container",5),h.BQk()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.checkboxFalseIcon),h.xp6(1),h.Q6J("ngIf",!t.checkboxFalseIcon)}}const rv=(n,e,t)=>({"p-checkbox-label-active":n,"p-disabled":e,"p-checkbox-label-focus":t});function ov(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"label",14),h.NdJ("click",function(s){h.CHM(t);const r=h.oxw(),o=h.MAs(3);return h.KtG(r.onClick(s,o))}),h._uU(1),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("ngClass",h.kEZ(3,rv,null!=t.value,t.disabled,t.focused)),h.uIk("for",t.inputId),h.xp6(1),h.Oqu(t.label)}}const av=(n,e)=>({"p-checkbox p-component":!0,"p-checkbox-disabled":n,"p-checkbox-focused":e}),lv=(n,e,t)=>({"p-highlight":n,"p-disabled":e,"p-focus":t}),cv={provide:me.JU,useExisting:(0,h.Gpc)(()=>hv),multi:!0};let hv=(()=>{class n{cd;constructor(t){this.cd=t}disabled;name;ariaLabel;ariaLabelledBy;tabindex;inputId;style;styleClass;label;readonly;checkboxTrueIcon;checkboxFalseIcon;onChange=new h.vpe;templates;checkIconTemplate;uncheckIconTemplate;focused;value;onModelChange=()=>{};onModelTouched=()=>{};onClick(t,i){!this.disabled&&!this.readonly&&(this.toggle(t),this.focused=!0,i.focus())}onKeyDown(t){"Enter"===t.key&&(this.toggle(t),t.preventDefault())}toggle(t){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value})}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"checkicon":this.checkIconTemplate=t.template;break;case"uncheckicon":this.uncheckIconTemplate=t.template}})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}writeValue(t){this.value=t,this.cd.markForCheck()}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}static \u0275fac=function(i){return new(i||n)(h.Y36(h.sBO))};static \u0275cmp=h.Xpm({type:n,selectors:[["p-triStateCheckbox"]],contentQueries:function(i,s,r){if(1&i&&h.Suo(r,Re.jx,4),2&i){let o;h.iGM(o=h.CRH())&&(s.templates=o)}},hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[h._Bn([cv])],decls:8,vars:26,consts:[[3,"ngStyle","ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox","inputmode","none",3,"name","readonly","disabled","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],[4,"ngIf"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],["class","p-checkbox-icon",3,"ngClass",4,"ngIf"],[1,"p-checkbox-icon",3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(i,s){if(1&i){const r=h.EpF();h.TgZ(0,"div",0),h.NdJ("click",function(a){h.CHM(r);const l=h.MAs(3);return h.KtG(s.onClick(a,l))}),h.TgZ(1,"div",1)(2,"input",2,3),h.NdJ("keydown",function(a){return s.onKeyDown(a)})("focus",function(){return s.onFocus()})("blur",function(){return s.onBlur()}),h.qZA()(),h.TgZ(4,"div",4),h.YNc(5,qx,3,2,"ng-container",5)(6,sv,3,2,"ng-container",5),h.qZA()(),h.YNc(7,ov,2,7,"label",6)}2&i&&(h.Tol(s.styleClass),h.Q6J("ngStyle",s.style)("ngClass",h.WLB(19,av,s.disabled,s.focused)),h.uIk("data-pc-name","tristatecheckbox")("data-pc-section","root"),h.xp6(2),h.Q6J("name",s.name)("readonly",s.readonly)("disabled",s.disabled),h.uIk("id",s.inputId)("tabindex",s.tabindex)("aria-labelledby",s.ariaLabelledBy)("aria-label",s.ariaLabel)("data-pc-section","hiddenInput"),h.xp6(2),h.Q6J("ngClass",h.kEZ(22,lv,null!=s.value,s.disabled,s.focused)),h.uIk("aria-checked",!0===s.value),h.xp6(1),h.Q6J("ngIf",!0===s.value),h.xp6(1),h.Q6J("ngIf",!1===s.value),h.xp6(1),h.Q6J("ngIf",s.label))},dependencies:()=>[Me.mk,Me.O5,Me.tP,Me.PC,Oa.n,Nr.q],encapsulation:2,changeDetection:0})}return n})(),dv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({imports:[Me.ez,Re.m8,Oa.n,Nr.q,Re.m8]})}return n})(),uv=(()=>{class n extends hi.s{pathId;ngOnInit(){this.pathId="url(#"+(0,De.Th)()+")"}static \u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static \u0275cmp=h.Xpm({type:n,selectors:[["ArrowDownIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.99994 14C6.91097 14.0004 6.82281 13.983 6.74064 13.9489C6.65843 13.9148 6.58387 13.8646 6.52133 13.8013L1.10198 8.38193C0.982318 8.25351 0.917175 8.08367 0.920272 7.90817C0.923368 7.73267 0.994462 7.56523 1.11858 7.44111C1.24269 7.317 1.41014 7.2459 1.58563 7.2428C1.76113 7.23971 1.93098 7.30485 2.0594 7.42451L6.32263 11.6877V0.677419C6.32263 0.497756 6.394 0.325452 6.52104 0.198411C6.64808 0.0713706 6.82039 0 7.00005 0C7.17971 0 7.35202 0.0713706 7.47906 0.198411C7.6061 0.325452 7.67747 0.497756 7.67747 0.677419V11.6877L11.9407 7.42451C12.0691 7.30485 12.2389 7.23971 12.4144 7.2428C12.5899 7.2459 12.7574 7.317 12.8815 7.44111C13.0056 7.56523 13.0767 7.73267 13.0798 7.90817C13.0829 8.08367 13.0178 8.25351 12.8981 8.38193L7.47875 13.8013C7.41621 13.8646 7.34164 13.9148 7.25944 13.9489C7.17727 13.983 7.08912 14.0004 7.00015 14C7.00012 14 7.00009 14 7.00005 14C7.00001 14 6.99998 14 6.99994 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,s){1&i&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g"),h._UZ(2,"path",1),h.qZA(),h.TgZ(3,"defs")(4,"clipPath",2),h._UZ(5,"rect",3),h.qZA()()()),2&i&&(h.Tol(s.getClassNames()),h.uIk("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role),h.xp6(1),h.uIk("clip-path",s.pathId),h.xp6(3),h.Q6J("id",s.pathId))},encapsulation:2})}return n})(),fv=(()=>{class n extends hi.s{pathId;ngOnInit(){this.pathId="url(#"+(0,De.Th)()+")"}static \u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static \u0275cmp=h.Xpm({type:n,selectors:[["ArrowUpIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.51551 13.799C6.64205 13.9255 6.813 13.9977 6.99193 14C7.17087 13.9977 7.34182 13.9255 7.46835 13.799C7.59489 13.6725 7.66701 13.5015 7.66935 13.3226V2.31233L11.9326 6.57554C11.9951 6.63887 12.0697 6.68907 12.1519 6.72319C12.2341 6.75731 12.3223 6.77467 12.4113 6.77425C12.5003 6.77467 12.5885 6.75731 12.6707 6.72319C12.7529 6.68907 12.8274 6.63887 12.89 6.57554C13.0168 6.44853 13.0881 6.27635 13.0881 6.09683C13.0881 5.91732 13.0168 5.74514 12.89 5.61812L7.48846 0.216594C7.48274 0.210436 7.4769 0.204374 7.47094 0.198411C7.3439 0.0713707 7.1716 0 6.99193 0C6.81227 0 6.63997 0.0713707 6.51293 0.198411C6.50704 0.204296 6.50128 0.210278 6.49563 0.216354L1.09386 5.61812C0.974201 5.74654 0.909057 5.91639 0.912154 6.09189C0.91525 6.26738 0.986345 6.43483 1.11046 6.55894C1.23457 6.68306 1.40202 6.75415 1.57752 6.75725C1.75302 6.76035 1.92286 6.6952 2.05128 6.57554L6.31451 2.31231V13.3226C6.31685 13.5015 6.38898 13.6725 6.51551 13.799Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,s){1&i&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g"),h._UZ(2,"path",1),h.qZA(),h.TgZ(3,"defs")(4,"clipPath",2),h._UZ(5,"rect",3),h.qZA()()()),2&i&&(h.Tol(s.getClassNames()),h.uIk("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role),h.xp6(1),h.uIk("clip-path",s.pathId),h.xp6(3),h.Q6J("id",s.pathId))},encapsulation:2})}return n})(),pv=(()=>{class n extends hi.s{pathId;ngOnInit(){this.pathId="url(#"+(0,De.Th)()+")"}static \u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static \u0275cmp=h.Xpm({type:n,selectors:[["FilterIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.64708 14H5.35296C5.18981 13.9979 5.03395 13.9321 4.91858 13.8167C4.8032 13.7014 4.73745 13.5455 4.73531 13.3824V7L0.329431 0.98C0.259794 0.889466 0.217389 0.780968 0.20718 0.667208C0.19697 0.553448 0.219379 0.439133 0.271783 0.337647C0.324282 0.236453 0.403423 0.151519 0.500663 0.0920138C0.597903 0.0325088 0.709548 0.000692754 0.823548 0H13.1765C13.2905 0.000692754 13.4021 0.0325088 13.4994 0.0920138C13.5966 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7826 0.780968 13.7402 0.889466 13.6706 0.98L9.26472 7V13.3824C9.26259 13.5455 9.19683 13.7014 9.08146 13.8167C8.96609 13.9321 8.81022 13.9979 8.64708 14ZM5.97061 12.7647H8.02943V6.79412C8.02878 6.66289 8.07229 6.53527 8.15296 6.43177L11.9412 1.23529H2.05884L5.86355 6.43177C5.94422 6.53527 5.98773 6.66289 5.98708 6.79412L5.97061 12.7647Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,s){1&i&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g"),h._UZ(2,"path",1),h.qZA(),h.TgZ(3,"defs")(4,"clipPath",2),h._UZ(5,"rect",3),h.qZA()()()),2&i&&(h.Tol(s.getClassNames()),h.uIk("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role),h.xp6(1),h.uIk("clip-path",s.pathId),h.xp6(3),h.Q6J("id",s.pathId))},encapsulation:2})}return n})(),gv=(()=>{class n extends hi.s{pathId;ngOnInit(){this.pathId="url(#"+(0,De.Th)()+")"}static \u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static \u0275cmp=h.Xpm({type:n,selectors:[["SortAltIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:9,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.64515 3.61291C5.47353 3.61291 5.30192 3.54968 5.16644 3.4142L3.38708 1.63484L1.60773 3.4142C1.34579 3.67613 0.912244 3.67613 0.650309 3.4142C0.388374 3.15226 0.388374 2.71871 0.650309 2.45678L2.90837 0.198712C3.17031 -0.0632236 3.60386 -0.0632236 3.86579 0.198712L6.12386 2.45678C6.38579 2.71871 6.38579 3.15226 6.12386 3.4142C5.98837 3.54968 5.81676 3.61291 5.64515 3.61291Z","fill","currentColor"],["d","M3.38714 14C3.01681 14 2.70972 13.6929 2.70972 13.3226V0.677419C2.70972 0.307097 3.01681 0 3.38714 0C3.75746 0 4.06456 0.307097 4.06456 0.677419V13.3226C4.06456 13.6929 3.75746 14 3.38714 14Z","fill","currentColor"],["d","M10.6129 14C10.4413 14 10.2697 13.9368 10.1342 13.8013L7.87611 11.5432C7.61418 11.2813 7.61418 10.8477 7.87611 10.5858C8.13805 10.3239 8.5716 10.3239 8.83353 10.5858L10.6129 12.3652L12.3922 10.5858C12.6542 10.3239 13.0877 10.3239 13.3497 10.5858C13.6116 10.8477 13.6116 11.2813 13.3497 11.5432L11.0916 13.8013C10.9561 13.9368 10.7845 14 10.6129 14Z","fill","currentColor"],["d","M10.6129 14C10.2426 14 9.93552 13.6929 9.93552 13.3226V0.677419C9.93552 0.307097 10.2426 0 10.6129 0C10.9833 0 11.2904 0.307097 11.2904 0.677419V13.3226C11.2904 13.6929 10.9832 14 10.6129 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,s){1&i&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g"),h._UZ(2,"path",1)(3,"path",2)(4,"path",3)(5,"path",4),h.qZA(),h.TgZ(6,"defs")(7,"clipPath",5),h._UZ(8,"rect",6),h.qZA()()()),2&i&&(h.Tol(s.getClassNames()),h.uIk("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role),h.xp6(1),h.uIk("clip-path",s.pathId),h.xp6(6),h.Q6J("id",s.pathId))},encapsulation:2})}return n})(),mv=(()=>{class n extends hi.s{pathId;ngOnInit(){this.pathId="url(#"+(0,De.Th)()+")"}static \u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static \u0275cmp=h.Xpm({type:n,selectors:[["SortAmountDownIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.93953 10.5858L3.83759 11.6877V0.677419C3.83759 0.307097 3.53049 0 3.16017 0C2.78985 0 2.48275 0.307097 2.48275 0.677419V11.6877L1.38082 10.5858C1.11888 10.3239 0.685331 10.3239 0.423396 10.5858C0.16146 10.8477 0.16146 11.2813 0.423396 11.5432L2.68146 13.8013C2.74469 13.8645 2.81694 13.9097 2.89823 13.9458C2.97952 13.9819 3.06985 14 3.16017 14C3.25049 14 3.33178 13.9819 3.42211 13.9458C3.5034 13.9097 3.57565 13.8645 3.63888 13.8013L5.89694 11.5432C6.15888 11.2813 6.15888 10.8477 5.89694 10.5858C5.63501 10.3239 5.20146 10.3239 4.93953 10.5858ZM13.0957 0H7.22468C6.85436 0 6.54726 0.307097 6.54726 0.677419C6.54726 1.04774 6.85436 1.35484 7.22468 1.35484H13.0957C13.466 1.35484 13.7731 1.04774 13.7731 0.677419C13.7731 0.307097 13.466 0 13.0957 0ZM7.22468 5.41935H9.48275C9.85307 5.41935 10.1602 5.72645 10.1602 6.09677C10.1602 6.4671 9.85307 6.77419 9.48275 6.77419H7.22468C6.85436 6.77419 6.54726 6.4671 6.54726 6.09677C6.54726 5.72645 6.85436 5.41935 7.22468 5.41935ZM7.6763 8.12903H7.22468C6.85436 8.12903 6.54726 8.43613 6.54726 8.80645C6.54726 9.17677 6.85436 9.48387 7.22468 9.48387H7.6763C8.04662 9.48387 8.35372 9.17677 8.35372 8.80645C8.35372 8.43613 8.04662 8.12903 7.6763 8.12903ZM7.22468 2.70968H11.2892C11.6595 2.70968 11.9666 3.01677 11.9666 3.3871C11.9666 3.75742 11.6595 4.06452 11.2892 4.06452H7.22468C6.85436 4.06452 6.54726 3.75742 6.54726 3.3871C6.54726 3.01677 6.85436 2.70968 7.22468 2.70968Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,s){1&i&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g"),h._UZ(2,"path",1),h.qZA(),h.TgZ(3,"defs")(4,"clipPath",2),h._UZ(5,"rect",3),h.qZA()()()),2&i&&(h.Tol(s.getClassNames()),h.uIk("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role),h.xp6(1),h.uIk("clip-path",s.pathId),h.xp6(3),h.Q6J("id",s.pathId))},encapsulation:2})}return n})(),_v=(()=>{class n extends hi.s{pathId;ngOnInit(){this.pathId="url(#"+(0,De.Th)()+")"}static \u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static \u0275cmp=h.Xpm({type:n,selectors:[["SortAmountUpAltIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.63435 0.19871C3.57113 0.135484 3.49887 0.0903226 3.41758 0.0541935C3.255 -0.0180645 3.06532 -0.0180645 2.90274 0.0541935C2.82145 0.0903226 2.74919 0.135484 2.68597 0.19871L0.427901 2.45677C0.165965 2.71871 0.165965 3.15226 0.427901 3.41419C0.689836 3.67613 1.12338 3.67613 1.38532 3.41419L2.48726 2.31226V13.3226C2.48726 13.6929 2.79435 14 3.16467 14C3.535 14 3.84209 13.6929 3.84209 13.3226V2.31226L4.94403 3.41419C5.07951 3.54968 5.25113 3.6129 5.42274 3.6129C5.59435 3.6129 5.76597 3.54968 5.90145 3.41419C6.16338 3.15226 6.16338 2.71871 5.90145 2.45677L3.64338 0.19871H3.63435ZM13.7685 13.3226C13.7685 12.9523 13.4615 12.6452 13.0911 12.6452H7.22016C6.84984 12.6452 6.54274 12.9523 6.54274 13.3226C6.54274 13.6929 6.84984 14 7.22016 14H13.0911C13.4615 14 13.7685 13.6929 13.7685 13.3226ZM7.22016 8.58064C6.84984 8.58064 6.54274 8.27355 6.54274 7.90323C6.54274 7.5329 6.84984 7.22581 7.22016 7.22581H9.47823C9.84855 7.22581 10.1556 7.5329 10.1556 7.90323C10.1556 8.27355 9.84855 8.58064 9.47823 8.58064H7.22016ZM7.22016 5.87097H7.67177C8.0421 5.87097 8.34919 5.56387 8.34919 5.19355C8.34919 4.82323 8.0421 4.51613 7.67177 4.51613H7.22016C6.84984 4.51613 6.54274 4.82323 6.54274 5.19355C6.54274 5.56387 6.84984 5.87097 7.22016 5.87097ZM11.2847 11.2903H7.22016C6.84984 11.2903 6.54274 10.9832 6.54274 10.6129C6.54274 10.2426 6.84984 9.93548 7.22016 9.93548H11.2847C11.655 9.93548 11.9621 10.2426 11.9621 10.6129C11.9621 10.9832 11.655 11.2903 11.2847 11.2903Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,s){1&i&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g"),h._UZ(2,"path",1),h.qZA(),h.TgZ(3,"defs")(4,"clipPath",2),h._UZ(5,"rect",3),h.qZA()()()),2&i&&(h.Tol(s.getClassNames()),h.uIk("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role),h.xp6(1),h.uIk("clip-path",s.pathId),h.xp6(3),h.Q6J("id",s.pathId))},encapsulation:2})}return n})();var yv=Q(8717);let xv=(()=>{class n extends hi.s{pathId;ngOnInit(){this.pathId="url(#"+(0,De.Th)()+")"}static \u0275fac=(()=>{let t;return function(s){return(t||(t=h.n5z(n)))(s||n)}})();static \u0275cmp=h.Xpm({type:n,selectors:[["FilterSlashIcon"]],standalone:!0,features:[h.qOj,h.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M13.4994 0.0920138C13.5967 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7827 0.780968 13.7403 0.889466 13.6707 0.98L11.406 4.06823C11.3099 4.19928 11.1656 4.28679 11.005 4.3115C10.8444 4.33621 10.6805 4.2961 10.5495 4.2C10.4184 4.1039 10.3309 3.95967 10.3062 3.79905C10.2815 3.63843 10.3216 3.47458 10.4177 3.34353L11.9412 1.23529H7.41184C7.24803 1.23529 7.09093 1.17022 6.97509 1.05439C6.85926 0.938558 6.79419 0.781457 6.79419 0.617647C6.79419 0.453837 6.85926 0.296736 6.97509 0.180905C7.09093 0.0650733 7.24803 0 7.41184 0H13.1765C13.2905 0.000692754 13.4022 0.0325088 13.4994 0.0920138ZM4.20008 0.181168H4.24126L13.2013 9.03411C13.3169 9.14992 13.3819 9.3069 13.3819 9.47058C13.3819 9.63426 13.3169 9.79124 13.2013 9.90705C13.1445 9.96517 13.0766 10.0112 13.0016 10.0423C12.9266 10.0735 12.846 10.0891 12.7648 10.0882C12.6836 10.0886 12.6032 10.0728 12.5283 10.0417C12.4533 10.0106 12.3853 9.96479 12.3283 9.90705L9.3142 6.92587L9.26479 6.99999V13.3823C9.26265 13.5455 9.19689 13.7014 9.08152 13.8167C8.96615 13.9321 8.81029 13.9979 8.64714 14H5.35302C5.18987 13.9979 5.03401 13.9321 4.91864 13.8167C4.80327 13.7014 4.73751 13.5455 4.73537 13.3823V6.99999L0.329492 1.02117C0.259855 0.930634 0.21745 0.822137 0.207241 0.708376C0.197031 0.594616 0.21944 0.480301 0.271844 0.378815C0.324343 0.277621 0.403484 0.192687 0.500724 0.133182C0.597964 0.073677 0.709609 0.041861 0.823609 0.0411682H3.86243C3.92448 0.0461551 3.9855 0.060022 4.04361 0.0823446C4.10037 0.10735 4.15311 0.140655 4.20008 0.181168ZM8.02949 6.79411C8.02884 6.66289 8.07235 6.53526 8.15302 6.43176L8.42478 6.05293L3.55773 1.23529H2.0589L5.84714 6.43176C5.92781 6.53526 5.97132 6.66289 5.97067 6.79411V12.7647H8.02949V6.79411Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,s){1&i&&(h.O4$(),h.TgZ(0,"svg",0)(1,"g"),h._UZ(2,"path",1),h.qZA(),h.TgZ(3,"defs")(4,"clipPath",2),h._UZ(5,"rect",3),h.qZA()()()),2&i&&(h.Tol(s.getClassNames()),h.uIk("aria-label",s.ariaLabel)("aria-hidden",s.ariaHidden)("role",s.role),h.xp6(1),h.uIk("clip-path",s.pathId),h.xp6(3),h.Q6J("id",s.pathId))},encapsulation:2})}return n})(),FC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({imports:[Me.ez,Lx.U,Ox.j,Rx.kW,me.u5,Ms.hJ,Gx,kx,Dx.L$,dv,Ed.v,uv,fv,yv.L,gv,_v,mv,Oa.n,pv,xv,Re.m8,Ed.v]})}return n})(),AC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({imports:[Me.ez]})}return n})();var zC=Q(7273),HC=Q(1239);let Bw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({imports:[Me.ez,En.Bz,Vr.z,Re.m8,zC.L,HC.o,ka.v,Ma.X,En.Bz,Vr.z,Re.m8]})}return n})();const ks={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Ld=class Ww{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ks[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Rs=6378137,Mn=Math.PI*Rs,Gw=[-Mn,-Mn,Mn,Mn],jw=[-180,-85,180,85],Kr=Rs*Math.log(Math.tan(Math.PI/2));class kn extends Ld{constructor(e){super({code:e,units:"m",extent:Gw,global:!0,worldExtent:jw,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Rs)}})}}const Pd=[new kn("EPSG:3857"),new kn("EPSG:102100"),new kn("EPSG:102113"),new kn("EPSG:900913"),new kn("http://www.opengis.net/def/crs/EPSG/0/3857"),new kn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Yw(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let s=0;s<i;s+=t){e[s]=Mn*n[s]/180;let r=Rs*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));r>Kr?r=Kr:r<-Kr&&(r=-Kr),e[s+1]=r}return e}function Uw(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let s=0;s<i;s+=t)e[s]=180*n[s]/Mn,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Rs))/Math.PI-90;return e}const Fd=[-180,-90,180,90],Xw=6378137*Math.PI/180;class rn extends Ld{constructor(e,t){super({code:e,units:"degrees",extent:Fd,axisOrientation:t,global:!0,metersPerUnit:Xw,worldExtent:Fd})}}const Ad=[new rn("CRS:84"),new rn("EPSG:4326","neu"),new rn("urn:ogc:def:crs:OGC:1.3:CRS84"),new rn("urn:ogc:def:crs:OGC:2:84"),new rn("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new rn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new rn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Wr={},Ft={};function Gr(n,e,t){const i=n.getCode(),s=e.getCode();i in Ft||(Ft[i]={}),Ft[i][s]=t}const We={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function zd(n){const e=[1/0,1/0,-1/0,-1/0];for(let t=0,i=n.length;t<i;++t)On(e,n[t]);return e}function Pa(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function Hd(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Vd(n,e,t){let i,s;return i=e<n[0]?n[0]-e:n[2]<e?e-n[2]:0,s=t<n[1]?n[1]-t:n[3]<t?t-n[3]:0,i*i+s*s}function Rn(n,e){return Nd(n,e[0],e[1])}function Dn(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function Nd(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Fa(n,e){const o=e[0],a=e[1];let l=We.UNKNOWN;return o<n[0]?l|=We.LEFT:o>n[2]&&(l|=We.RIGHT),a<n[1]?l|=We.BELOW:a>n[3]&&(l|=We.ABOVE),l===We.UNKNOWN&&(l=We.INTERSECTING),l}function di(n,e,t,i,s){return s?(s[0]=n,s[1]=e,s[2]=t,s[3]=i,s):[n,e,t,i]}function on(n){return di(1/0,1/0,-1/0,-1/0,n)}function Bd(n,e){const t=n[0],i=n[1];return di(t,i,t,i,e)}function Aa(n,e,t,i,s){return Wd(on(s),n,e,t,i)}function Ds(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function On(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function Wd(n,e,t,i,s){for(;t<i;t+=s)n2(n,e[t],e[t+1]);return n}function n2(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Gd(n,e){let t;return t=e(Yr(n)),!!(t||(t=e(Ur(n)),t)||(t=e(Zr(n)),t)||(t=e(ln(n)),t))&&t}function jr(n){let e=0;return Os(n)||(e=ye(n)*Ue(n)),e}function Yr(n){return[n[0],n[1]]}function Ur(n){return[n[2],n[1]]}function an(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function s2(n,e){let t;if("bottom-left"===e)t=Yr(n);else if("bottom-right"===e)t=Ur(n);else if("top-left"===e)t=ln(n);else{if("top-right"!==e)throw new Error("Invalid corner");t=Zr(n)}return t}function za(n,e,t,i,s){const[r,o,a,l,c,d,u,f]=Ha(n,e,t,i);return di(Math.min(r,a,c,u),Math.min(o,l,d,f),Math.max(r,a,c,u),Math.max(o,l,d,f),s)}function Ha(n,e,t,i){const s=e*i[0]/2,r=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),l=s*o,c=s*a,d=r*o,u=r*a,f=n[0],p=n[1];return[f-l+u,p-c-d,f-l-u,p-c+d,f+l-u,p+c+d,f+l+u,p+c-d,f-l+u,p-c-d]}function Ue(n){return n[3]-n[1]}function Ln(n,e,t){const i=t||[1/0,1/0,-1/0,-1/0];return dt(n,e)?(i[0]=n[0]>e[0]?n[0]:e[0],i[1]=n[1]>e[1]?n[1]:e[1],i[2]=n[2]<e[2]?n[2]:e[2],i[3]=n[3]<e[3]?n[3]:e[3]):on(i),i}function ln(n){return[n[0],n[3]]}function Zr(n){return[n[2],n[3]]}function ye(n){return n[2]-n[0]}function dt(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Os(n){return n[2]<n[0]||n[3]<n[1]}function jd(n,e){const t=e.getExtent(),i=an(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const s=ye(t),o=Math.floor((i[0]-t[0])/s)*s;n[0]-=o,n[2]-=o}return n}function Xr(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function Va(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[1]*t+n[0]*i;return n[0]=n[0]*t-n[1]*i,n[1]=r,n}function Zd(n,e){if(e.canWrapX()){const t=ye(e.getExtent()),i=function p2(n,e,t){const i=e.getExtent();let s=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||ye(i),s=Math.floor((n[0]-i[0])/t)),s}(n,e,t);i&&(n[0]-=i*t)}return n}function Ve(n,e,t){return Math.min(Math.max(n,e),t)}function g2(n,e,t,i,s,r){const o=s-t,a=r-i;if(0!==o||0!==a){const l=((n-t)*o+(e-i)*a)/(o*o+a*a);l>1?(t=s,i=r):l>0&&(t+=o*l,i+=a*l)}return Pn(n,e,t,i)}function Pn(n,e,t,i){const s=t-n,r=i-e;return s*s+r*r}function $r(n){return n*Math.PI/180}function Fn(n,e){const t=n%e;return t*e<0?t+e:t}function Tt(n,e,t){return n+t*(e-n)}function qr(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Jr(n,e){return Math.floor(qr(n,e))}function Qr(n,e){return Math.ceil(qr(n,e))}const eo=6371008.8;function Na(n,e,t){t=t||eo;const i=$r(n[1]),s=$r(e[1]),r=(s-i)/2,o=$r(e[0]-n[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const Ls={info:1,warn:2,error:3,none:4};let io=Ls.info;function Xd(...n){io>Ls.warn||console.warn(...n)}let Ka=!0;function Wa(n,e){if(void 0!==e)for(let t=0,i=n.length;t<i;++t)e[t]=n[t];else e=n.slice();return e}function qd(n,e){if(void 0!==e&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function x2(n){(function qw(n,e){Wr[n]=e})(n.getCode(),n),Gr(n,n,Wa)}function Ze(n){return"string"==typeof n?function $w(n){return Wr[n]||Wr[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(n):n||null}function Jd(n,e,t,i){let s;const r=(n=Ze(n)).getPointResolutionFunc();if(r){if(s=r(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(s=s*o/ks[i])}}else{const o=n.getUnits();if("degrees"==o&&!i||"degrees"==i)s=e;else{const a=zn(n,Ze("EPSG:4326"));if(a===qd&&"degrees"!==o)s=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2),s=(Na(c.slice(0,2),c.slice(2,4))+Na(c.slice(4,6),c.slice(6,8)))/2}const l=i?ks[i]:n.getMetersPerUnit();void 0!==l&&(s/=l)}}return s}function Qd(n){(function v2(n){n.forEach(x2)})(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Gr(e,t,Wa)})})}function Ga(n,e){return n?"string"==typeof n?Ze(n):n:Ze(e)}function An(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||zn(n,e)===Wa)&&t}function zn(n,e){let s=function Jw(n,e){let t;return n in Ft&&e in Ft[n]&&(t=Ft[n][e]),t}(n.getCode(),e.getCode());return s||(s=qd),s}function Ps(n,e){return zn(Ze(n),Ze(e))}function Fs(n,e,t){return Ps(e,t)(n,void 0,n.length)}function tu(n,e,t,i){return function a2(n,e,t,i){if(Os(n))return on(t);let s=[];if(i>1){const a=n[2]-n[0],l=n[3]-n[1];for(let c=0;c<i;++c)s.push(n[0]+a*c/i,n[1],n[2],n[1]+l*c/i,n[2]-a*c/i,n[3],n[0],n[3]-l*c/i)}else s=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(s,s,2);const r=[],o=[];for(let a=0,l=s.length;a<l;a+=2)r.push(s[a]),o.push(s[a+1]);return function Qw(n,e,t){return di(Math.min.apply(null,n),Math.min.apply(null,e),Math.max.apply(null,n),Math.max.apply(null,e),t)}(r,o,t)}(n,Ps(e,t),void 0,i)}let at=null;function no(){return at}function ja(n,e){return at?Fs(n,e,at):n}function ui(n,e){return at?Fs(n,at,e):(Ka&&!Xr(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Ka=!1,Xd("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n)}function so(n,e){return at?tu(n,e,at):n}function cn(n,e){return at?tu(n,at,e):n}function I2(n,e){if(!at)return n;const t=Ze(e).getMetersPerUnit(),i=at.getMetersPerUnit();return t&&i?n*t/i:n}!function T2(){Qd(Pd),Qd(Ad),function b2(n,e,t,i){n.forEach(function(s){e.forEach(function(r){Gr(s,r,t),Gr(r,s,i)})})}(Ad,Pd,Yw,Uw)}();const fi=class S2{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},Ya=class E2{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function pi(n,e){return n>e?1:n<e?-1:0}function Ua(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if("function"==typeof t){for(let s=1;s<i;++s){const r=n[s];if(r===e)return s;if(r<e)return t(e,n[s-1],r)>0?s-1:s}return i-1}if(t>0){for(let s=1;s<i;++s)if(n[s]<e)return s-1;return i-1}if(t<0){for(let s=1;s<i;++s)if(n[s]<=e)return s;return i-1}for(let s=1;s<i;++s){if(n[s]==e)return s;if(n[s]<e)return n[s-1]-e<e-n[s]?s-1:s}return i-1}function k2(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Za(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let s=0;s<i;s++)n[n.length]=t[s]}function Li(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function As(){return!0}function ro(){return!1}function Vn(){}function iu(n){let t,i,s,e=!1;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!Li(r,i))&&(e=!0,s=this,i=r,t=n.apply(this,arguments)),t}}function zs(n){for(const e in n)delete n[e]}function Nn(n){let e;for(e in n)return!1;return!e}const oo=class O2 extends Ya{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),s=i[e]||(i[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t="string"==typeof e,i=t?e:e.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=t?new fi(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;i in o||(o[i]=0,a[i]=0),++o[i];for(let c=0,d=s.length;c<d;++c)if(l="handleEvent"in s[c]?s[c].handleEvent(r):s[c].call(this,r),!1===l||r.propagationStopped){l=!1;break}if(0==--o[i]){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,Vn);delete o[i]}return l}disposeInternal(){this.listeners_&&zs(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const s=i.indexOf(t);-1!==s&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[s]=Vn,++this.pendingRemovals_[e]):(i.splice(s,1),0===i.length&&delete this.listeners_[e]))}};function fe(n,e,t,i,s){if(i&&i!==n&&(t=t.bind(i)),s){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const r={target:n,type:e,listener:t};return n.addEventListener(e,t),r}function ao(n,e,t,i){return fe(n,e,t,i,!0)}function Oe(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),zs(n))}const nu=class lo extends oo{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=fe(this,e[r],t);return s}return fe(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const s=e.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=ao(this,e[r],t)}else i=ao(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)!function L2(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Oe(n[e]);else Oe(n)}(i);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}};function pe(){throw new Error("Unimplemented abstract method.")}let P2=0;function xe(n){return n.ol_uid||(n.ol_uid=String(++P2))}class su extends fi{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}const Ut=class F2 extends nu{constructor(e){super(),xe(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new su(i,e,t)),i="propertychange",this.hasListener(i)&&this.dispatchEvent(new su(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const s=this.values_||(this.values_={});if(i)s[e]=t;else{const r=s[e];s[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Nn(this.values_)&&(this.values_=null),t||this.notify(e,i)}}};function he(n,e){if(!n)throw new Error(e)}class Xa extends Ut{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new Xa(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Oe(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=fe(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function A2(n){if("function"==typeof n)return n;let e;return Array.isArray(n)?e=n:(he("function"==typeof n.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const z2=Xa,ru=class H2 extends Ut{constructor(e){super(),this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t.opacity=void 0!==e.opacity?e.opacity:1,he("number"==typeof t.opacity,"Layer opacity must be a number"),t.visible=void 0===e.visible||e.visible,t.zIndex=e.zIndex,t.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,t.minResolution=void 0!==e.minResolution?e.minResolution:0,t.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,t.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return t.opacity=Ve(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==i||t.managed?i:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return pe()}getLayerStatesArray(e){return pe()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return pe()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set("extent",e)}setMaxResolution(e){this.set("maxResolution",e)}setMinResolution(e){this.set("minResolution",e)}setMaxZoom(e){this.set("maxZoom",e)}setMinZoom(e){this.set("minZoom",e)}setOpacity(e){he("number"==typeof e,"Layer opacity must be a number"),this.set("opacity",e)}setVisible(e){this.set("visible",e)}setZIndex(e){this.set("zIndex",e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},At={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},V2=42,$a=256;function ou(n,e,t){return function(i,s,r,o,a){if(!i)return;if(!s&&!e)return i;const l=e?0:r[0]*s,c=e?0:r[1]*s,d=a?a[0]:0,u=a?a[1]:0;let f=n[0]+l/2+d,p=n[2]-l/2+d,g=n[1]+c/2+u,m=n[3]-c/2+u;f>p&&(f=(p+f)/2,p=f),g>m&&(g=(m+g)/2,m=g);let _=Ve(i[0],f,p),y=Ve(i[1],g,m);if(o&&t&&s){const x=30*s;_+=-x*Math.log(1+Math.max(0,f-i[0])/x)+x*Math.log(1+Math.max(0,i[0]-p)/x),y+=-x*Math.log(1+Math.max(0,g-i[1])/x)+x*Math.log(1+Math.max(0,i[1]-m)/x)}return[_,y]}}function N2(n){return n}function qa(n,e,t,i){const s=ye(e)/t[0],r=Ue(e)/t[1];return i?Math.min(n,Math.max(s,r)):Math.min(n,Math.min(s,r))}function Ja(n,e,t){let i=Math.min(n,e);return i*=Math.log(1+50*Math.max(0,n/e-1))/50+1,t&&(i=Math.max(i,t),i/=Math.log(1+50*Math.max(0,t/n-1))/50+1),Ve(i,t/2,2*e)}function au(n,e,t,i,s){return t=void 0===t||t,function(r,o,a,l){if(void 0!==r){const c=i?qa(n,i,a,s):n;return t&&l?Ja(r,c,e):Ve(r,e,c)}}}function Qa(n){if(void 0!==n)return 0}function lu(n){if(void 0!==n)return n}function cu(n){return Math.pow(n,3)}function Bn(n){return 1-cu(1-n)}function el(n){return 3*n*n-2*n*n*n}function j2(n){return n}function Ge(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function zt(n,e,t,i,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return n[0]=i*c,n[1]=s*l,n[2]=-i*l,n[3]=s*c,n[4]=o*i*c-a*i*l+e,n[5]=o*s*l+a*s*c+t,n}function co(n,e){const t=function U2(n){return n[0]*n[3]-n[1]*n[2]}(e);he(0!==t,"Transformation matrix cannot be inverted");const i=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-s/t,n[2]=-r/t,n[3]=i/t,n[4]=(r*l-o*a)/t,n[5]=-(i*l-s*a)/t,n}new Array(6);const hu=[1e6,1e6,1e6,1e6,2,2];function nl(n){return"matrix("+n.map((t,i)=>Math.round(t*hu[i])/hu[i]).join(", ")+")"}function Pi(n,e,t,i,s,r){r=r||[];let o=0;for(let a=e;a<t;a+=i){const l=n[a],c=n[a+1];r[o++]=s[0]*l+s[2]*c+s[4],r[o++]=s[1]*l+s[3]*c+s[5]}return r&&r.length!=o&&(r.length=o),r}function du(n,e,t,i,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],d=r[1];let u=0;for(let f=e;f<t;f+=i){const p=n[f]-c,g=n[f+1]-d;o[u++]=c+p*a-g*l,o[u++]=d+p*l+g*a;for(let m=f+2;m<f+i;++m)o[u++]=n[m]}return o&&o.length!=u&&(o.length=u),o}const uu=[1,0,0,1,0,0],q2=class $2 extends Ut{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=iu((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return pe()}closestPointXY(e,t,i,s){return pe()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return this.closestPointXY(e[0],e[1],t=t||[NaN,NaN],1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return pe()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&on(t),this.extentRevision_=this.getRevision()}return function r2(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}(this.extent_,e)}rotate(e,t){pe()}scale(e,t,i){pe()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return pe()}getType(){return pe()}applyTransform(e){pe()}intersectsExtent(e){return pe()}translate(e,t){pe()}transform(e,t){const i=Ze(e),s="tile-pixels"==i.getUnits()?function(r,o,a){const l=i.getExtent(),c=i.getWorldExtent(),d=Ue(c)/Ue(l);return zt(uu,c[0],c[3],d,-d,0,0,0),Pi(r,0,r.length,a,uu,o),Ps(i,t)(r,o,a)}:Ps(i,t);return this.applyTransform(s),this}};function fu(n){let e;return"XY"==n?e=2:"XYZ"==n||"XYM"==n?e=3:"XYZM"==n&&(e=4),e}const sl=class J2 extends q2{constructor(){super(),this.layout="XY",this.stride=2}computeExtent(e){return Aa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return pe()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=fu(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){pe()}setLayout(e,t,i){let s;if(e)s=fu(e);else{for(let r=0;r<i;++r){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}s=t.length,e=function Q2(n){let e;return 2==n?e="XY":3==n?e="XYZ":4==n&&(e="XYZM"),e}(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();du(i,0,i.length,s,e,t,i),this.changed()}}scale(e,t,i){void 0===t&&(t=e),i||(i=an(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();(function Z2(n,e,t,i,s,r,o,a){a=a||[];const l=o[0],c=o[1];let d=0;for(let u=e;u<t;u+=i){const p=n[u+1]-c;a[d++]=l+s*(n[u]-l),a[d++]=c+r*p;for(let g=u+2;g<u+i;++g)a[d++]=n[g]}a&&a.length!=d&&(a.length=d)})(s,0,s.length,r,e,t,i,s),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();(function X2(n,e,t,i,s,r,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=n[l]+s,o[a++]=n[l+1]+r;for(let c=l+2;c<l+i;++c)o[a++]=n[c]}o&&o.length!=a&&(o.length=a)})(i,0,i.length,s,e,t,i),this.changed()}}};function pu(n,e,t,i,s,r,o){const a=n[e],l=n[e+1],c=n[t]-a,d=n[t+1]-l;let u;if(0===c&&0===d)u=e;else{const f=((s-a)*c+(r-l)*d)/(c*c+d*d);if(f>1)u=t;else{if(f>0){for(let p=0;p<i;++p)o[p]=Tt(n[e+p],n[t+p],f);return void(o.length=i)}u=e}}for(let f=0;f<i;++f)o[f]=n[u+f];o.length=i}function gu(n,e,t,i,s){let r=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],l=n[e+1],c=Pn(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function _u(n,e,t,i,s,r,o,a,l,c,d){if(e==t)return c;let u,f;if(0===s){if(f=Pn(o,a,n[e],n[e+1]),f<c){for(u=0;u<i;++u)l[u]=n[e+u];return l.length=i,f}return c}d=d||[NaN,NaN];let p=e+i;for(;p<t;)if(pu(n,p-i,p,i,o,a,d),f=Pn(o,a,d[0],d[1]),f<c){for(c=f,u=0;u<i;++u)l[u]=d[u];l.length=i,p+=i}else p+=i*Math.max((Math.sqrt(f)-Math.sqrt(c))/s|0,1);if(r&&(pu(n,t-i,e,i,o,a,d),f=Pn(o,a,d[0],d[1]),f<c)){for(c=f,u=0;u<i;++u)l[u]=d[u];l.length=i}return c}function xu(n,e,t,i){for(let s=0,r=t.length;s<r;++s){const o=t[s];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function ho(n,e,t,i,s,r,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)r[o++]=n[e],r[o++]=n[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-i];let d=0;for(;c.length>0;){const u=c.pop(),f=c.pop();let p=0;const g=n[f],m=n[f+1],_=n[u],y=n[u+1];for(let x=f+i;x<u;x+=i){const b=g2(n[x],n[x+1],g,m,_,y);b>p&&(d=x,p=b)}p>s&&(l[(d-e)/i]=1,f+i<d&&c.push(f,d),d+i<u&&c.push(d,u))}for(let u=0;u<a;++u)l[u]&&(r[o++]=n[e+u*i],r[o++]=n[e+u*i+1]);return o}function hn(n,e){return e*Math.round(n/e)}function nI(n,e,t,i,s,r,o){if(e==t)return o;let c,d,a=hn(n[e],s),l=hn(n[e+1],s);e+=i,r[o++]=a,r[o++]=l;do{if(c=hn(n[e],s),d=hn(n[e+1],s),(e+=i)==t)return r[o++]=c,r[o++]=d,o}while(c==a&&d==l);for(;e<t;){const u=hn(n[e],s),f=hn(n[e+1],s);if(e+=i,u==c&&f==d)continue;const p=c-a,g=d-l,m=u-a,_=f-l;p*_==g*m&&(p<0&&m<p||p==m||p>0&&m>p)&&(g<0&&_<g||g==_||g>0&&_>g)?(c=u,d=f):(r[o++]=c,r[o++]=d,a=c,l=d,c=u,d=f)}return r[o++]=c,r[o++]=d,o}function rl(n,e,t,i,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const d=t[l];o=nI(n,e,d,i,s,r,o),a.push(o),e=d}return o}function Kn(n,e,t,i,s){s=void 0!==s?s:[];let r=0;for(let o=e;o<t;o+=i)s[r++]=n.slice(o,o+i);return s.length=r,s}function uo(n,e,t,i,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=Kn(n,e,l,i,s[r]),e=l}return s.length=r,s}function Cu(n,e,t,i,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=1===l.length&&l[0]===e?[]:uo(n,e,l,i,s[r]),e=l[l.length-1]}return s.length=r,s}function wu(n,e,t,i){let s=0,r=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];s+=o*a-r*l,r=a,o=l}return s/2}class fo extends sl{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new fo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,s){return s<Vd(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_u(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,s))}getArea(){return wu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=ho(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new fo(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xu(this.flatCoordinates,0,e,this.stride),this.changed()}}const Tu=fo;class ol extends sl{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new ol(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){const r=this.flatCoordinates,o=Pn(e,t,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)i[l]=r[l];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Bd(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Nd(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function tI(n,e,t,i){for(let s=0,r=t.length;s<r;++s)n[e++]=t[s];return e}(this.flatCoordinates,0,e),this.changed()}}const Su=ol;function sI(n,e,t,i,s){return!Gd(s,function(o){return!dn(n,e,t,i,o[0],o[1])})}function dn(n,e,t,i,s,r){let o=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],d=n[e+1];l<=r?d>r&&(c-a)*(r-l)-(s-a)*(d-l)>0&&o++:d<=r&&(c-a)*(r-l)-(s-a)*(d-l)<0&&o--,a=c,l=d}return 0!==o}function al(n,e,t,i,s,r){if(0===t.length||!dn(n,e,t[0],i,s,r))return!1;for(let o=1,a=t.length;o<a;++o)if(dn(n,t[o-1],t[o],i,s,r))return!1;return!0}function ll(n,e,t,i,s,r,o){let a,l,c,d,u,f,p;const g=s[r+1],m=[];for(let x=0,C=t.length;x<C;++x){const v=t[x];for(d=n[v-i],f=n[v-i+1],a=e;a<v;a+=i)u=n[a],p=n[a+1],(g<=f&&p<=g||f<=g&&g<=p)&&(c=(g-f)/(p-f)*(u-d)+d,m.push(c)),d=u,f=p}let _=NaN,y=-1/0;for(m.sort(pi),d=m[0],a=1,l=m.length;a<l;++a){u=m[a];const x=Math.abs(u-d);x>y&&(c=(d+u)/2,al(n,e,t,i,c,g)&&(_=c,y=x)),d=u}return isNaN(_)&&(_=s[r]),o?(o.push(_,g,y),o):[_,g,y]}function cl(n,e,t,i,s){const r=Wd([1/0,1/0,-1/0,-1/0],n,e,t,i);return!!dt(s,r)&&(!!(Dn(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3])||function oI(n,e,t,i,s){let r;for(e+=i;e<t;e+=i)if(r=s(n.slice(e-i,e),n.slice(e,e+i)),r)return r;return!1}(n,e,t,i,function(o,a){return function o2(n,e,t){let i=!1;const s=Fa(n,e),r=Fa(n,t);if(s===We.INTERSECTING||r===We.INTERSECTING)i=!0;else{const o=n[0],a=n[1],l=n[2],c=n[3],f=t[0],p=t[1],g=(p-e[1])/(f-e[0]);let m,_;r&We.ABOVE&&!(s&We.ABOVE)&&(m=f-(p-c)/g,i=m>=o&&m<=l),!i&&r&We.RIGHT&&!(s&We.RIGHT)&&(_=p-(f-l)*g,i=_>=a&&_<=c),!i&&r&We.BELOW&&!(s&We.BELOW)&&(m=f-(p-a)/g,i=m>=o&&m<=l),!i&&r&We.LEFT&&!(s&We.LEFT)&&(_=p-(f-o)*g,i=_>=a&&_<=c)}return i}(s,o,a)}))}function Eu(n,e,t,i,s){return!!(cl(n,e,t,i,s)||dn(n,e,t,i,s[0],s[1])||dn(n,e,t,i,s[0],s[3])||dn(n,e,t,i,s[2],s[1])||dn(n,e,t,i,s[2],s[3]))}function aI(n,e,t,i){for(;e<t-i;){for(let s=0;s<i;++s){const r=n[e+s];n[e+s]=n[t-i+s],n[t-i+s]=r}e+=i,t-=i}}function hl(n,e,t,i){let s=0,r=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];s+=(a-r)*(l+o),r=a,o=l}return 0===s?void 0:s>0}function dl(n,e,t,i,s){s=void 0!==s&&s;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=hl(n,e,a,i);(0===r?s&&l||!s&&!l:s&&!l||!s&&l)&&aI(n,e,a,i),e=a}return e}class un extends sl{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Za(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new un(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,s){return s<Vd(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function mu(n,e,t,i,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=gu(n,e,a,i,s),e=a}return s}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function yu(n,e,t,i,s,r,o,a,l,c,d){d=d||[NaN,NaN];for(let u=0,f=t.length;u<f;++u){const p=t[u];c=_u(n,e,p,i,s,r,o,a,l,c,d),e=p}return c}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,s))}containsXY(e,t){return al(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return function Iu(n,e,t,i){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=wu(n,e,a,i),e=a}return s}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),dl(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,uo(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=an(this.getExtent());this.flatInteriorPoint_=ll(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Su(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Tu(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new Tu(t.slice(r,l),e);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function ku(n,e,t,i,s){s=void 0!==s&&s;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=hl(n,e,a,i);if(0===r){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}(e,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=dl(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=rl(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new un(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return function Mu(n,e,t,i,s){if(!Eu(n,e,t[0],i,s))return!1;if(1===t.length)return!0;for(let r=1,o=t.length;r<o;++r)if(sI(n,t[r-1],t[r],i,s)&&!cl(n,t[r-1],t[r],i,s))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=function vu(n,e,t,i,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=xu(n,e,t[o],i);s[r++]=l,e=l}return s.length=r,s}(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const cI=un;function Ru(n){if(Os(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],s=n[3],r=[e,t,e,s,i,s,i,t,e,t];return new un(r,"XY",[r.length])}function po(n,e){setTimeout(function(){n(e)},0)}function fl(n,e,t,i,s){const r=Math.cos(-s);let o=Math.sin(-s),a=n[0]*r-n[1]*o,l=n[1]*r+n[0]*o;return a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o,[a*r-l*o,l*r+a*o]}const Zt=class dI extends Ut{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=Ga(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&function $d(n){Ka=!(void 0===n||n)}(),e.center&&(e.center=ui(e.center,this.projection_)),e.extent&&(e.extent=cn(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in At)delete t[a];this.setProperties(t,!0);const i=function fI(n){let e,t,i,o=void 0!==n.minZoom?n.minZoom:0,a=void 0!==n.maxZoom?n.maxZoom:28;const l=void 0!==n.zoomFactor?n.zoomFactor:2,c=void 0!==n.multiWorld&&n.multiWorld,d=void 0===n.smoothResolutionConstraint||n.smoothResolutionConstraint,u=void 0!==n.showFullExtent&&n.showFullExtent,f=Ga(n.projection,"EPSG:3857"),p=f.getExtent();let g=n.constrainOnlyCenter,m=n.extent;if(!c&&!m&&f.isGlobal()&&(g=!1,m=p),void 0!==n.resolutions){const _=n.resolutions;t=_[o],i=void 0!==_[a]?_[a]:_[_.length-1],e=n.constrainResolution?function B2(n,e,t,i){return e=void 0===e||e,function(s,r,o,a){if(void 0!==s){const l=n[0],c=n[n.length-1],d=t?qa(l,t,o,i):l;if(a)return e?Ja(s,d,c):Ve(s,c,d);const u=Math.min(d,s),f=Math.floor(Ua(n,u,r));return n[f]>d&&f<n.length-1?n[f+1]:n[f]}}}(_,d,!g&&m,u):au(t,i,d,!g&&m,u)}else{const y=(p?Math.max(ye(p),Ue(p)):360*ks.degrees/f.getMetersPerUnit())/$a/Math.pow(2,0),x=y/Math.pow(2,28);t=n.maxResolution,void 0!==t?o=0:t=y/Math.pow(l,o),i=n.minResolution,void 0===i&&(i=void 0!==n.maxZoom?void 0!==n.maxResolution?t/Math.pow(l,a):y/Math.pow(l,a):x),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),e=n.constrainResolution?function K2(n,e,t,i,s,r){return i=void 0===i||i,t=void 0!==t?t:0,function(o,a,l,c){if(void 0!==o){const d=s?qa(e,s,l,r):e;if(c)return i?Ja(o,d,t):Ve(o,t,d);const u=1e-9,f=Math.ceil(Math.log(e/d)/Math.log(n)-u),p=-a*(.5-u)+.5,g=Math.min(d,o),m=Math.floor(Math.log(e/g)/Math.log(n)+p),_=Math.max(f,m);return Ve(e/Math.pow(n,_),t,d)}}}(l,t,i,d,!g&&m,u):au(t,i,d,!g&&m,u)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const s=function uI(n){if(void 0!==n.extent)return ou(n.extent,n.constrainOnlyCenter,void 0===n.smoothExtentConstraint||n.smoothExtentConstraint);const e=Ga(n.projection,"EPSG:3857");if(!0!==n.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ou(t,!1,!1)}return N2}(e),r=i.constraint,o=function pI(n){if(void 0===n.enableRotation||n.enableRotation){const t=n.constrainRotation;return void 0===t||!0===t?function G2(n){const e=void 0===n?$r(5):n;return function(t,i){return i||void 0===t?t:Math.abs(t)<=e?0:t}}():!1===t?lu:"number"==typeof t?function W2(n){const e=2*Math.PI/n;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(t):lu}return Qa}(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const s=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution();this.setCenterInternal([i[0]+r/2*(s[3]-t[3]+t[1]-s[1]),i[1]-r/2*(s[0]-t[0]+t[2]-s[2])])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=ui(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=ui(s.anchor,this.getProjection())),t[i]=s}this.animateInternal.apply(this,t)}animateInternal(e){let i,t=arguments.length;t>1&&"function"==typeof arguments[t-1]&&(i=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const d=arguments[s];d.center&&this.setCenterInternal(d.center),void 0!==d.zoom?this.setZoom(d.zoom):d.resolution&&this.setResolution(d.resolution),void 0!==d.rotation&&this.setRotation(d.rotation)}if(s===t)return void(i&&po(i,!0));let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<t;++s){const d=arguments[s],u={start:r,complete:!1,anchor:d.anchor,duration:void 0!==d.duration?d.duration:1e3,easing:d.easing||el,callback:i};if(d.center&&(u.sourceCenter=o,u.targetCenter=d.center.slice(),o=u.targetCenter),void 0!==d.zoom?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(d.zoom),a=u.targetResolution):d.resolution&&(u.sourceResolution=a,u.targetResolution=d.resolution,a=u.targetResolution),void 0!==d.rotation){u.sourceRotation=l;const f=Fn(d.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+f,l=u.targetRotation}(n=u).sourceCenter&&n.targetCenter&&!Xr(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation?r+=u.duration:u.complete=!0,c.push(u)}var n;this.animations_.push(c),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,i=this.animations_.length;t<i;++t){const s=this.animations_[t];if(s[0].callback&&po(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;let d=l.duration>0?(e-l.start)/l.duration:1;d>=1?(l.complete=!0,d=1):r=!1;const u=l.easing(d);if(l.sourceCenter){const f=l.sourceCenter[0],p=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter,this.targetCenter_=[f+u*(g-f),p+u*(m-p)]}if(l.sourceResolution&&l.targetResolution){const f=1===u?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(f,0,p,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){const f=1===u?Fn(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(r){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&po(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const s=this.getCenterInternal();return void 0!==s&&(i=[s[0]-t[0],s[1]-t[1]],Va(i,e-this.getRotation()),function c2(n,e){n[0]+=+e[0],n[1]+=+e[1]}(i,t)),i}calculateCenterZoom(e,t){let i;const s=this.getCenterInternal(),r=this.getResolution();return void 0!==s&&void 0!==r&&(i=[t[0]-e*(t[0]-s[0])/r,t[1]-e*(t[1]-s[1])/r]),i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],s=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&ja(e,this.getProjection())}getCenterInternal(){return this.get(At.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return so(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();he(t,"The view center is not defined");const i=this.getResolution();he(void 0!==i,"The view resolution is not defined");const s=this.getRotation();return he(void 0!==s,"The view rotation is not defined"),za(t,i,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(At.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(cn(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=ye(e)/t[0],s=Ue(e)/t[1];return Math.max(i,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),s=Math.log(t/this.minResolution_)/Math.log(e);return function(r){return t/Math.pow(e,r*s)}}getRotation(){return this.get(At.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=Math.log(i/this.minResolution_)/t;return function(o){return Math.log(i/o)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=fl(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],t,i)}return{center:s.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let i,s,t=this.minZoom_||0;if(this.resolutions_){const r=Ua(this.resolutions_,e,1);t=r,i=this.resolutions_[r],s=r==this.resolutions_.length-1?2:i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(i/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Ve(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[t]/Math.pow(this.resolutions_[t]/this.resolutions_[t+1],Ve(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(he(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(e))he(!Os(e),"Cannot fit empty extent provided as `geometry`"),i=Ru(cn(e,this.getProjection()));else if("Circle"===e.getType()){const s=cn(e.getExtent(),this.getProjection());i=Ru(s),i.rotate(this.getRotation(),an(s))}else{const s=no();i=s?e.clone().transform(s,this.getProjection()):e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),s=Math.sin(-t),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,d=-1/0;for(let u=0,f=r.length;u<f;u+=o){const p=r[u]*i-r[u+1]*s,g=r[u]*s+r[u+1]*i;a=Math.min(a,p),l=Math.min(l,g),c=Math.max(c,p),d=Math.max(d,g)}return[a,l,c,d]}fitInternal(e,t){let i=(t=t||{}).size;i||(i=this.getViewportSizeMinusPadding_());const s=void 0!==t.padding?t.padding:[0,0,0,0],r=void 0!==t.nearest&&t.nearest;let o;o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),d=Math.sin(c),u=Math.cos(c),f=an(a);f[0]+=(s[1]-s[3])/2*l,f[1]+=(s[0]-s[2])/2*l;const m=this.getConstrainedCenter([f[0]*u-f[1]*d,f[1]*u+f[0]*d],l),_=t.callback?t.callback:Vn;void 0!==t.duration?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),po(_,!0))}centerOn(e,t,i){this.centerOnInternal(ui(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(fl(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=fl(e,s,[a[0]/2+o[3],a[1]/2+o[0]],t,i);r=[e[0]-l[0],e[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=ja(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&ui(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,i);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=ui(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ui(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(At.ROTATION)!==s&&this.set(At.ROTATION,s),this.get(At.RESOLUTION)!==o&&(this.set(At.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(At.CENTER)||!Xr(this.get(At.CENTER),a))&&this.set(At.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=void 0!==e?e:200;const s=t||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();i=i||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!Xr(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:e,easing:Bn,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,i){i=i&&ui(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}};function pl(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const go=class mI extends ru{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(e.source?e.source:null)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Oe(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=fe(e,"change",this.handleSourceChange_,this),"ready"===e.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}isVisible(e){let t;const i=this.getMapInternal();let s;!e&&i&&(e=i.getView()),t=e instanceof Zt?{viewState:e.getState(),extent:e.calculateExtent()}:e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),s=t.layerStatesArray?t.layerStatesArray.find(o=>o.layer===this):this.getLayerState();const r=this.getExtent();return pl(s,t.viewState)&&(!r||dt(r,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];let r=t(e instanceof Zt?e.getViewStateAndExtent():e);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(Oe(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Oe(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=fe(e,"precompose",function(t){const s=t.frameState.layerStatesArray,r=this.getLayerState(!1);he(!s.some(function(o){return o.layer===r.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),s.push(r)},this),this.mapRenderKey_=fe(this,"change",e.render,e),this.changed())}setSource(e){this.set("source",e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};var Du=Q(1414);const te_IDLE=0,te_LOADING=1,te_LOADED=2,te_ERROR=3;function Ou(n){return n[0]>0&&n[1]>0}function xt(n,e){return Array.isArray(n)?n:(void 0===e?e=[n,n]:(e[0]=n,e[1]=n),e)}class gl{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=xt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new gl({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return pe()}getImage(e){return pe()}getHitDetectionImage(){return pe()}getPixelRatio(e){return 1}getImageState(){return pe()}getImageSize(){return pe()}getOrigin(){return pe()}getSize(){return pe()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=xt(e)}listenImageChange(e){pe()}load(){pe()}unlistenImageChange(e){pe()}ready(){return Promise.resolve()}}const Lu=gl,Vs={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var fn={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};fn.max=fn.whitepoint[2].D65,fn.rgb=function(n,e){var r,o,a,t=n[0]/(e=e||fn.whitepoint[2].E)[0],i=n[1]/e[1],s=n[2]/e[2];return o=-.96924363628087*t+1.87596750150772*i+.041555057407175*s,a=.055630079696993*t+-.20397695888897*i+1.056971514242878*s,r=(r=3.240969941904521*t+-1.537383177570093*i+-.498610760293*s)>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*=12.92,[255*(r=Math.min(Math.max(0,r),1)),255*(o=Math.min(Math.max(0,o),1)),255*(a=Math.min(Math.max(0,a),1))]},Vs.xyz=function(n,e){var t=n[0]/255,i=n[1]/255,s=n[2]/255;return[(.41239079926595*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.35758433938387*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.18048078840183*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92))*(e=e||fn.whitepoint[2].E)[0],(.21263900587151*t+.71516867876775*i+.072192315360733*s)*e[1],(.019330818715591*t+.11919477979462*i+.95053215224966*s)*e[2]]};const Ht=fn,ml={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var i,s,r,c,u,f,p;return 0===(r=n[0])?[0,0,0]:(i=n[1]/(13*r)+4*(u=Ht.whitepoint[t=t||2][e=e||"D65"][0])/(u+15*(f=Ht.whitepoint[t][e][1])+3*(p=Ht.whitepoint[t][e][2]))||0,s=n[2]/(13*r)+9*f/(u+15*f+3*p)||0,[9*(c=r>8?f*Math.pow((r+16)/116,3):f*r*.0011070564598794539)*i/(4*s)||0,c,c*(12-3*i-20*s)/(4*s)||0])}};Ht.luv=function(n,e,t){var i,s,r,l,c,d,u,f,p,g,m;g=4*(u=Ht.whitepoint[t=t||2][e=e||"D65"][0])/(u+15*(f=Ht.whitepoint[t][e][1])+3*(p=Ht.whitepoint[t][e][2])),m=9*f/(u+15*f+3*p),i=4*(l=n[0])/(l+15*(c=n[1])+3*(d=n[2]))||0,s=9*c/(l+15*c+3*d)||0;var x=c/f;return[r=x<=.008856451679035631?903.2962962962961*x:116*Math.pow(x,1/3)-16,13*r*(i-g),13*r*(s-m)]};var Pu={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var o,t=n[1];return o=n[2]/360*2*Math.PI,[n[0],t*Math.cos(o),t*Math.sin(o)]},xyz:function(n){return ml.xyz(Pu.luv(n))}};const yI=Pu;ml.lchuv=function(n){var e=n[0],t=n[1],i=n[2],s=Math.sqrt(t*t+i*i),o=360*Math.atan2(i,t)/2/Math.PI;return o<0&&(o+=360),[e,s,o]},Ht.lchuv=function(n){return ml.lchuv(Ht.luv(n))};const Fu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},xI=function vI(n){var e,s,t=[],i=1;if("number"==typeof n)return{space:"rgb",values:[n>>>16,(65280&n)>>>8,255&n],alpha:1};if("number"==typeof n)return{space:"rgb",values:[n>>>16,(65280&n)>>>8,255&n],alpha:1};if(n=String(n).toLowerCase(),Fu[n])t=Fu[n].slice(),s="rgb";else if("transparent"===n)i=0,s="rgb",t=[0,0,0];else if("#"===n[0]){var r=n.slice(1),o=r.length;i=1,o<=4?(t=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],4===o&&(i=parseInt(r[3]+r[3],16)/255)):(t=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],8===o&&(i=parseInt(r[6]+r[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var c="cmyk"===(s=e[1].replace(/a$/,""))?4:"gray"===s?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===s&&(s=t.shift()),i=(t=t.map(function(d,u){if("%"===d[d.length-1])return d=parseFloat(d)/100,3===u?d:"rgb"===s?255*d:"h"===s[0]||"l"===s[0]&&!u?100*d:"lab"===s?125*d:"lch"===s?u<2?150*d:360*d:"o"!==s[0]||u?"oklab"===s?.4*d:"oklch"===s?u<2?.4*d:360*d:d:d;if("h"===s[u]||2===u&&"h"===s[s.length-1]){if(void 0!==Au[d])return Au[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return 360*parseFloat(d);if(d.endsWith("grad"))return 360*parseFloat(d)/400;if(d.endsWith("rad"))return 180*parseFloat(d)/Math.PI}return"none"===d?0:parseFloat(d)})).length>c?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),s=n.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:s,values:t,alpha:i}};var Au={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const _l={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var s,r,o,a,l,e=n[0]/360,t=n[1]/100,i=n[2]/100,c=0;if(0===t)return[l=255*i,l,l];for(s=2*i-(r=i<.5?i*(1+t):i+t-i*t),a=[0,0,0];c<3;)(o=e+1/3*-(c-1))<0?o++:o>1&&o--,a[c++]=255*(l=6*o<1?s+6*(r-s)*o:2*o<1?r:3*o<2?s+(r-s)*(2/3-o)*6:s);return a}};Vs.hsl=function(n){var a,c,e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.min(e,t,i),r=Math.max(e,t,i),o=r-s;return r===s?a=0:e===r?a=(t-i)/o:t===r?a=2+(i-e)/o:i===r&&(a=4+(e-t)/o),(a=Math.min(60*a,360))<0&&(a+=360),c=(s+r)/2,[a,100*(r===s?0:c<=.5?o/(r+s):o/(2-r-s)),100*c]};const wI=1024,Ns={};let yl=0;function II(n){if(4===n.length)return n;const e=n.slice();return e[3]=1,e}function zu(n){const e=Ht.lchuv(Vs.xyz(n));return e[3]=n[3],e}function xl(n){if(Ns.hasOwnProperty(n))return Ns[n];if(yl>=wI){let t=0;for(const i in Ns)3&t++||(delete Ns[i],--yl)}const e=function bI(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,s=xI(n);if(!s.space)return[];const r="h"===s.space[0]?_l.min:Vs.min,o="h"===s.space[0]?_l.max:Vs.max;return(e=Array(3))[0]=Math.min(Math.max(s.values[0],r[0]),o[0]),e[1]=Math.min(Math.max(s.values[1],r[1]),o[1]),e[2]=Math.min(Math.max(s.values[2],r[2]),o[2]),"h"===s.space[0]&&(e=_l.rgb(e)),e.push(Math.min(Math.max(s.alpha,0),1)),e}(n);if(4!==e.length)throw new Error('Failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+n+'" as color');return Hu(e),Ns[n]=e,++yl,e}function Bs(n){return Array.isArray(n)?n:xl(n)}function Hu(n){return n[0]=Ve(n[0]+.5|0,0,255),n[1]=Ve(n[1]+.5|0,0,255),n[2]=Ve(n[2]+.5|0,0,255),n[3]=Ve(n[3],0,1),n}function vl(n){let e=n[0];e!=(0|e)&&(e=e+.5|0);let t=n[1];t!=(0|t)&&(t=t+.5|0);let i=n[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+t+","+i+","+(void 0===n[3]?1:Math.round(1e3*n[3])/1e3)+")"}const Fi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",EI=Fi.includes("firefox"),MI=(Fi.includes("safari")&&!Fi.includes("chrom")&&(Fi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Fi)),Fi.includes("webkit")&&!Fi.includes("edge")),Vu=Fi.includes("macintosh"),Nu=typeof devicePixelRatio<"u"?devicePixelRatio:1,Bu=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Ku=typeof Image<"u"&&Image.prototype.decode,Wu=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Xe(n,e,t,i){let s;return s=t&&t.length?t.shift():Bu?new OffscreenCanvas(n||300,e||300):document.createElement("canvas"),n&&(s.width=n),e&&(s.height=e),s.getContext("2d",i)}let bl;function Cl(){return bl||(bl=Xe(1,1)),bl}function mo(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Gu(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function wl(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function Il(n,e,t){return e+":"+n+":"+(t?Bs(t):"null")}const Xt=new class LI{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_)!(3&e++)&&!this.cache_[t].hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}get(e,t,i){const s=Il(e,t,i);return s in this.cache_?this.cache_[s]:null}getPattern(e,t,i){const s=Il(e,t,i);return s in this.patternCache_?this.patternCache_[s]:null}set(e,t,i,s,r){const o=Il(e,t,i),a=o in this.cache_;this.cache_[o]=s,r&&(s.getImageState()===te_IDLE&&s.load(),s.getImageState()===te_LOADING?s.ready().then(()=>{this.patternCache_[o]=Cl().createPattern(s.getImage(1),"repeat")}):this.patternCache_[o]=Cl().createPattern(s.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};let Ks=null;class PI extends oo{constructor(e,t,i,s,r){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=void 0===s?te_IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===te_LOADED){Ks||(Ks=Xe(1,1,void 0,{willReadFrequently:!0})),Ks.drawImage(this.image_,0,0);try{Ks.getImageData(0,0,1,1),this.tainted_=!1}catch{Ks=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=te_ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=te_LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Xe(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===te_IDLE){this.image_||this.initializeImage_(),this.imageState_=te_LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&function ju(n,e){return e&&(n.src=e),n.src&&Ku?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(s=>n.complete&&n.width?t(n):i(s))):function OI(n,e){return new Promise((t,i)=>{function s(){o(),t(n)}function r(){o(),i(new Error("Image load error"))}function o(){n.removeEventListener("load",s),n.removeEventListener("error",r)}n.addEventListener("load",s),n.addEventListener("error",r),e&&(n.src=e)})}(n)}(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==te_LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const s=i.getContext("2d");s.scale(e,e),s.drawImage(t,0,0),s.globalCompositeOperation="multiply",s.fillStyle=function CI(n){return"string"==typeof n?n:vl(n)}(this.color_),s.fillRect(0,0,i.width/e,i.height/e),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===te_LOADED||this.imageState_===te_ERROR?e():this.addEventListener("change",function t(){(this.imageState_===te_LOADED||this.imageState_===te_ERROR)&&(this.removeEventListener("change",t),e())})})),this.ready_}}function Tl(n,e,t,i,s,r){let o=void 0===e?void 0:Xt.get(e,t,s);return o||(o=new PI(n,n instanceof HTMLImageElement?n.src||void 0:e,t,i,s),Xt.set(e,t,s,o,r)),r&&o&&!Xt.getPattern(e,t,s)&&Xt.set(e,t,s,o,r),o}function $t(n){return n?Array.isArray(n)?vl(n):"object"==typeof n&&"src"in n?function FI(n){if(!n.offset||!n.size)return Xt.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Xt.getPattern(e,void 0,n.color);if(t)return t;const i=Xt.get(n.src,"anonymous",null);if(i.getImageState()!==te_LOADED)return null;const s=Xe(n.size[0],n.size[1]);return s.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),Tl(s.canvas,e,void 0,te_LOADED,n.color,!0),Xt.getPattern(e,void 0,n.color)}(n):n:null}const _o="ol-hidden",yo="ol-unselectable",Sl="ol-control",Yu="ol-collapsed",AI=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Uu=["style","variant","weight","size","lineHeight","family"],Zu=function(n){const e=n.match(AI);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=Uu.length;i<s;++i){const r=e[i+1];void 0!==r&&(t[Uu[i]]=r)}return t.families=t.family.split(/,\s?/),t},Xu="10px sans-serif",ut="#000",Wn="round",gi=[],Gn="round",Gs="#000",js="center",xo="middle",pn=[0,0,0,0],_i=new Ut;let El,jn=null;const Ml={},zI=function(){const e="32px ",t=["monospace","serif"],i=t.length,s="wmytzilWMYTZIL@#/&?$%10\uf013";let r,o;function a(c,d,u){let f=!0;for(let p=0;p<i;++p){const g=t[p];if(o=vo(c+" "+d+" "+e+g,s),u!=g){const m=vo(c+" "+d+" "+e+u+","+g,s);f=f&&m!=o}}return!!f}function l(){let c=!0;const d=_i.getKeys();for(let u=0,f=d.length;u<f;++u){const p=d[u];_i.get(p)<100&&(a.apply(this,p.split("\n"))?(zs(Ml),jn=null,El=void 0,_i.set(p,100)):(_i.set(p,_i.get(p)+1,!0),c=!1))}c&&(clearInterval(r),r=void 0)}return function(c){const d=Zu(c);if(!d)return;const u=d.families;for(let f=0,p=u.length;f<p;++f){const g=u[f],m=d.style+"\n"+d.weight+"\n"+g;void 0===_i.get(m)&&(_i.set(m,100,!0),a(d.style,d.weight,g)||(_i.set(m,0,!0),void 0===r&&(r=setInterval(l,32))))}}}(),HI=function(){let n;return function(e){let t=Ml[e];if(null==t){if(Bu){const i=Zu(e),s=$u(e,"\u017dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Ml[e]=t}return t}}();function $u(n,e){return jn||(jn=Xe(1,1)),n!=El&&(jn.font=n,El=jn.font),jn.measureText(e)}function vo(n,e){return $u(n,e).width}function qu(n,e,t){if(e in t)return t[e];const i=e.split("\n").reduce((s,r)=>Math.max(s,vo(n,r)),0);return t[e]=i,i}class kl extends Lu{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?te_LOADING:te_LOADED,this.imageState_===te_LOADING&&this.ready().then(()=>this.imageState_=te_LOADED),this.render()}clone(){const e=this.getScale(),t=new kl({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const i=this.renderOptions_,s=Xe(i.size*e,i.size*e);this.draw_(i,s,e),t=s.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let s=this.radius_,r=void 0===this.radius2_?s:this.radius2_;if(s<r){const w=s;s=r,r=w}const a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),l=r*Math.sin(a),d=s-Math.sqrt(r*r-l*l),u=Math.sqrt(l*l+d*d),f=u/l;if("miter"===e&&f<=i)return f*t;const p=t/2/f,g=t/2*(d/u),_=Math.sqrt((s+p)*(s+p)+g*g)-s;if(void 0===this.radius2_||"bevel"===e)return 2*_;const y=s*Math.sin(a),C=r-Math.sqrt(s*s-y*y),b=Math.sqrt(y*y+C*C)/y;return b<=i?2*Math.max(_,b*t/2-r-s):2*_}createRenderOptions(){let o,e=Wn,t=Gn,i=0,s=null,r=0,a=0;this.stroke_&&(o=$t(this.stroke_.getColor()??Gs),a=this.stroke_.getWidth()??1,s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Gn,e=this.stroke_.getLineCap()??Wn,i=this.stroke_.getMiterLimit()??10);const l=this.calculateLineJoinSize_(t,a,i),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:o,strokeWidth:a,size:Math.ceil(2*c+l),lineCap:e,lineDash:s,lineDashOffset:r,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();null===s&&(s=ut),t.fillStyle=$t(s),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),s=0;"string"==typeof i&&(i=Bs(i)),null===i?s=1:Array.isArray(i)&&(s=4===i.length?i[3]:1),0===s&&(t=Xe(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const s=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(t*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=r+a*o,c=a%2==0?i:s;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=ut,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const Ju=kl;class Rl extends Ju{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Rl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const Dl=Rl;class Ol{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,void 0!==e.color&&this.setColor(e.color)}clone(){const e=this.getColor();return new Ol({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(null!==e&&"object"==typeof e&&"src"in e){const t=Tl(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===te_IDLE&&t.load(),t.getImageState()===te_LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const Yn=Ol;class Ll{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Ll({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const Pl=Ll;class Ai{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Qu,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new Ai({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Qu,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let Fl=null;function WI(n,e){if(!Fl){const t=new Yn({color:"rgba(255,255,255,0.4)"}),i=new Pl({color:"#3399CC",width:1.25});Fl=[new Ai({image:new Dl({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Fl}function Qu(n){return n.getGeometry()}const Us=Ai;function ef(n,e,t,i){return void 0!==t&&void 0!==i?[t/n,i/e]:void 0!==t?t/n:void 0!==i?i/e:1}class Al extends Lu{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const o=void 0!==e.img?e.img:null;let l,a=e.src;if(he(!(void 0!==a&&o),"`image` and `src` cannot be provided at the same time"),(void 0===a||0===a.length)&&o&&(a=o.src||xe(o)),he(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),he(!((void 0!==e.width||void 0!==e.height)&&void 0!==e.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==e.src?l=te_IDLE:void 0!==o&&(l=o instanceof HTMLImageElement?o.complete?o.src?te_LOADED:te_IDLE:te_LOADING:te_LOADED),this.color_=void 0!==e.color?Bs(e.color):null,this.iconImage_=Tl(o,a,this.crossOrigin_,l,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null,void 0!==e.width||void 0!==e.height){let c,d;if(e.size)[c,d]=e.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,d=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=e;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(ef(p[0],p[1],e.width,e.height))};return void this.listenImageChange(f)}}void 0!==c&&this.setScale(ef(c,d,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Al({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!s)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=s[0]),"fraction"==this.anchorYUnits_&&(e[1]*=s[1])}if("top-left"!=this.anchorOrigin_){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+s[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=i[0]-t[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();return this.size_?this.size_[0]*e[0]:this.iconImage_.getImageState()==te_LOADED?this.iconImage_.getSize()[0]*e[0]:void 0}getHeight(){const e=this.getScaleArray();return this.size_?this.size_[1]*e[1]:this.iconImage_.getImageState()==te_LOADED?this.iconImage_.getSize()[1]*e[1]:void 0}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener("change",e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener("change",e)}ready(){return this.iconImage_.ready()}}const tf=Al;class zl{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=xt(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Yn({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new zl({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=xt(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const nf=zl;let Un=0;const Zn=0,Pe=1<<Un++,K=1<<Un++,vt=1<<Un++,je=1<<Un++,yi=1<<Un++,nt=Math.pow(2,5)-1,sf={[Pe]:"boolean",[K]:"number",[vt]:"string",[je]:"color",[yi]:"number[]"},jI=Object.keys(sf).map(Number).sort(pi);function st(n){const e=[];for(const t of jI)YI(n,t)&&e.push(sf[t]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function YI(n,e){return(n&e)===e}function qt(n,e){return!!(n&e)}function bo(n,e){return n===e}class zi{constructor(e,t){this.type=e,this.value=t}}class UI{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function rf(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function ve(n,e,t){switch(typeof n){case"boolean":return new zi(Pe,n);case"number":return new zi(K,n);case"string":{let s=vt;return function SI(n){try{return xl(n),!0}catch{return!1}}(n)&&(s|=je),bo(s&t,Zn)||(s&=t),new zi(s,n)}}if(!Array.isArray(n))throw new Error("Expression must be an array or a primitive value");if(0===n.length)throw new Error("Empty expression");if("string"==typeof n[0])return function oT(n,e,t){const i=n[0],s=XI[i];if(!s)throw new Error(`Unknown operator: ${i}`);return s(n,e,t)}(n,e,t);for(const s of n)if("number"!=typeof s)throw new Error("Expected an array of numbers");let i=yi;return(3===n.length||4===n.length)&&(i|=je),t&&(i&=t),new zi(i,n)}const k={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},XI={[k.Get]:X(([n,e])=>void 0!==e?function ZI(n){switch(n){case"string":return vt;case"color":return je;case"number":return K;case"boolean":return Pe;case"number[]":return yi;default:throw new Error(`Unrecognized type hint: ${n}`)}}(e.value):nt,J(1,2),function $I(n,e){const t=ve(n[1],e);if(!(t instanceof zi))throw new Error("Expected a literal argument for get operation");if("string"!=typeof t.value)throw new Error("Expected a string argument for get operation");return e.properties.add(t.value),3===n.length?[t,ve(n[2],e)]:[t]}),[k.Var]:X(([n])=>n.type,J(1,1),function qI(n,e,t,i){const s=n[1];if("string"!=typeof s)throw new Error("Expected a string argument for var operation");if(e.variables.add(s),!("variables"in e.style)||void 0===e.style.variables[s])return[new zi(nt,s)];const o=ve(e.style.variables[s],e);if(o.value=s,i&&!qt(i,o.type))throw new Error(`The variable ${s} has type ${st(o.type)} but the following type was expected: ${st(i)}`);return[o]}),[k.Id]:X(K|vt,Zs,function JI(n,e){e.featureId=!0}),[k.Concat]:X(vt,J(2,1/0),de(nt)),[k.GeometryType]:X(vt,Zs,function QI(n,e){e.geometryType=!0}),[k.Resolution]:X(K,Zs),[k.Zoom]:X(K,Zs),[k.Time]:X(K,Zs),[k.Any]:X(Pe,J(2,1/0),de(Pe)),[k.All]:X(Pe,J(2,1/0),de(Pe)),[k.Not]:X(Pe,J(1,1),de(Pe)),[k.Equal]:X(Pe,J(2,2),de(nt),Hi),[k.NotEqual]:X(Pe,J(2,2),de(nt),Hi),[k.GreaterThan]:X(Pe,J(2,2),de(nt),Hi),[k.GreaterThanOrEqualTo]:X(Pe,J(2,2),de(nt),Hi),[k.LessThan]:X(Pe,J(2,2),de(nt),Hi),[k.LessThanOrEqualTo]:X(Pe,J(2,2),de(nt),Hi),[k.Multiply]:X(n=>{let e=K|je;for(let t=0;t<n.length;t++)e&=n[t].type;return e},J(2,1/0),de(K|je),Hi),[k.Coalesce]:X(n=>{let e=nt;for(let t=1;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},J(2,1/0),de(nt),Hi),[k.Divide]:X(K,J(2,2),de(K)),[k.Add]:X(K,J(2,1/0),de(K)),[k.Subtract]:X(K,J(2,2),de(K)),[k.Clamp]:X(K,J(3,3),de(K)),[k.Mod]:X(K,J(2,2),de(K)),[k.Pow]:X(K,J(2,2),de(K)),[k.Abs]:X(K,J(1,1),de(K)),[k.Floor]:X(K,J(1,1),de(K)),[k.Ceil]:X(K,J(1,1),de(K)),[k.Round]:X(K,J(1,1),de(K)),[k.Sin]:X(K,J(1,1),de(K)),[k.Cos]:X(K,J(1,1),de(K)),[k.Atan]:X(K,J(1,2),de(K)),[k.Sqrt]:X(K,J(1,1),de(K)),[k.Match]:X(n=>{let e=nt;for(let t=2;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},J(4,1/0),of,function tT(n,e,t,i){const s=n.length-1;let o=ve(n[1],e).type;const a=ve(n[n.length-1],e);let l=void 0!==i?i&a.type:a.type;const c=new Array(s-2);for(let u=0;u<s-2;u+=2){const f=ve(n[u+2],e),p=ve(n[u+3],e);o&=f.type,l&=p.type,c[u]=f,c[u+1]=p}const d=vt|K|Pe;if(!qt(d,o))throw new Error(`Expected an input of type ${st(d)} for the interpolate operation, got ${st(o)} instead`);if(bo(l,Zn))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(n));for(let u=0;u<s-2;u+=2){const f=ve(n[u+2],e,o),p=ve(n[u+3],e,l);c[u]=f,c[u+1]=p}return[ve(n[1],e,o),...c,ve(n[n.length-1],e,l)]}),[k.Between]:X(Pe,J(3,3),de(K)),[k.Interpolate]:X(n=>{let e=je|K;for(let t=3;t<n.length;t+=2)e&=n[t].type;return e},J(6,1/0),of,function iT(n,e,t,i){const s=n[1];let r;switch(s[0]){case"linear":r=1;break;case"exponential":if(r=s[1],"number"!=typeof r)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(r)} instead`);break;default:r=null}if(!r)throw new Error(`Invalid interpolation type: ${JSON.stringify(s)}`);r=ve(r,e);let o=ve(n[2],e);if(!qt(K,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${st(o.type)} instead`);o=ve(n[2],e,K);const a=new Array(n.length-3);for(let l=0;l<a.length;l+=2){let c=ve(n[l+3],e);if(!qt(K,c.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${st(c.type)} at position ${l+2} instead`);let d=ve(n[l+4],e);if(!qt(K|je,d.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${st(d.type)} at position ${l+3} instead`);c=ve(n[l+3],e,K),d=ve(n[l+4],e,K|je),a[l]=c,a[l+1]=d}return[r,o,...a]}),[k.Case]:X(n=>{let e=nt;for(let t=1;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},J(3,1/0),function eT(n,e){const i=n.length-1;if(i%2==0)throw new Error(`An odd amount of arguments was expected for operation ${n[0]}, got ${JSON.stringify(i)} instead`)},function nT(n,e,t,i){const s=ve(n[n.length-1],e);let r=void 0!==i?i&s.type:s.type;const o=new Array(n.length-1);for(let a=0;a<o.length-1;a+=2){const l=ve(n[a+1],e),c=ve(n[a+2],e);if(!qt(Pe,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${st(l.type)} at position ${a} instead`);r&=c.type,o[a]=l,o[a+1]=c}if(bo(r,Zn))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(n));for(let a=0;a<o.length-1;a+=2)o[a+1]=ve(n[a+2],e,r);return o[o.length-1]=ve(n[n.length-1],e,r),o}),[k.In]:X(Pe,J(2,2),function sT(n,e){let t=n[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof t[0]){if("literal"!==t[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let i=vt|K;const s=new Array(t.length);for(let o=0;o<s.length;o++){const a=ve(t[o],e);i&=a.type,s[o]=a}if(bo(i,Zn))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(n));return[ve(n[1],e,i),...s]}),[k.Number]:X(K,J(1,1/0),de(nt)),[k.String]:X(vt,J(1,1/0),de(nt)),[k.Array]:X(n=>3===n.length||4===n.length?yi|je:yi,J(1,1/0),de(K)),[k.Color]:X(je,J(1,4),de(K)),[k.Band]:X(K,J(1,3),de(K)),[k.Palette]:X(je,J(2,2),function rT(n,e){const t=ve(n[1],e,K);if(t.type!==K)throw new Error(`The first argument of palette must be an number, got ${st(t.type)} instead`);const i=n[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const s=new Array(i.length);for(let r=0;r<s.length;r++){const o=ve(i[r],e,je);if(!(o instanceof zi))throw new Error(`The palette color at index ${r} must be a literal value`);if(!qt(o.type,je))throw new Error(`The palette color at index ${r} should be of type color, got ${st(o.type)} instead`);s[r]=o}return[t,...s]}),[k.ToString]:X(vt,J(1,1),de(Pe|K|vt|je))};function Zs(n,e){if(1!==n.length)throw new Error(`Expected no arguments for ${n[0]} operation`);return[]}function J(n,e){return function(t,i){const s=t[0],r=t.length-1;if(n===e){if(r!==n)throw new Error(`Expected ${n} argument${1===n?"":"s"} for ${s}, got ${r}`)}else if(r<n||r>e)throw new Error(`Expected ${e===1/0?`${n} or more`:`${n} to ${e}`} arguments for ${s}, got ${r}`)}}function de(n){return function(e,t){const i=e[0],s=e.length-1,r=new Array(s);for(let o=0;o<s;++o){const a=ve(e[o+1],t);if(!qt(n,a.type)){const l=st(n),c=st(a.type);throw new Error(`Unexpected type for argument ${o} of ${i} operation, got ${l} but expected ${c}`)}a.type&=n,r[o]=a}return r}}function Hi(n,e,t){const i=n[0],s=n.length-1;let r=nt;for(let a=0;a<t.length;++a)r&=t[a].type;if(r===Zn)throw new Error(`No common type could be found for arguments of ${i} operation`);const o=new Array(s);for(let a=0;a<s;++a)o[a]=ve(n[a+1],e,r);return o}function of(n,e){const i=n.length-1;if(i%2==1)throw new Error(`An even amount of arguments was expected for operation ${n[0]}, got ${JSON.stringify(i)} instead`)}function X(n,...e){return function(t,i,s){const r=t[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](t,i,o,s)||o;let a="function"==typeof n?n(o):n;if(void 0!==s){if(!qt(a,s))throw new Error(`The following expression was expected to return ${st(s)}, but returns ${st(a)} instead: ${JSON.stringify(t)}`);a&=s}if(a===Zn)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new UI(a,r,...o)}}function af(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return af(n.getGeometries()[0]);default:return""}}function xi(n,e,t){const i=ve(n,t);if(!qt(e,i.type)){const s=st(e),r=st(i.type);throw new Error(`Expected expression to be of type ${s}, got ${r}`)}return Vt(i,t)}function Vt(n,e){if(n instanceof zi){if(n.type===je&&"string"==typeof n.value){const i=xl(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case k.Number:case k.String:case k.Coalesce:return function aT(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Vt(n.args[r],e);switch(t){case k.Coalesce:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a<"u"&&null!==a)return a}throw new Error("Expected one of the values to be non-null")};case k.Number:case k.String:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}(n,e);case k.Get:case k.Var:return function lT(n,e){const i=n.args[0].value;switch(n.operator){case k.Get:return s=>s.properties[i];case k.Var:return s=>s.variables[i];default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}(n);case k.Id:return i=>i.featureId;case k.GeometryType:return i=>i.geometryType;case k.Concat:{const i=n.args.map(s=>Vt(s,e));return s=>"".concat(...i.map(r=>r(s).toString()))}case k.Resolution:return i=>i.resolution;case k.Any:case k.All:case k.Between:case k.In:case k.Not:return function hT(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Vt(n.args[r],e);switch(t){case k.Any:return r=>{for(let o=0;o<i;++o)if(s[o](r))return!0;return!1};case k.All:return r=>{for(let o=0;o<i;++o)if(!s[o](r))return!1;return!0};case k.Between:return r=>{const o=s[0](r),a=s[1](r),l=s[2](r);return o>=a&&o<=l};case k.In:return r=>{const o=s[0](r);for(let a=1;a<i;++a)if(o===s[a](r))return!0;return!1};case k.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${t}`)}}(n,e);case k.Equal:case k.NotEqual:case k.LessThan:case k.LessThanOrEqualTo:case k.GreaterThan:case k.GreaterThanOrEqualTo:return function cT(n,e){const t=n.operator,i=Vt(n.args[0],e),s=Vt(n.args[1],e);switch(t){case k.Equal:return r=>i(r)===s(r);case k.NotEqual:return r=>i(r)!==s(r);case k.LessThan:return r=>i(r)<s(r);case k.LessThanOrEqualTo:return r=>i(r)<=s(r);case k.GreaterThan:return r=>i(r)>s(r);case k.GreaterThanOrEqualTo:return r=>i(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${t}`)}}(n,e);case k.Multiply:case k.Divide:case k.Add:case k.Subtract:case k.Clamp:case k.Mod:case k.Pow:case k.Abs:case k.Floor:case k.Ceil:case k.Round:case k.Sin:case k.Cos:case k.Atan:case k.Sqrt:return function dT(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Vt(n.args[r],e);switch(t){case k.Multiply:return r=>{let o=1;for(let a=0;a<i;++a)o*=s[a](r);return o};case k.Divide:return r=>s[0](r)/s[1](r);case k.Add:return r=>{let o=0;for(let a=0;a<i;++a)o+=s[a](r);return o};case k.Subtract:return r=>s[0](r)-s[1](r);case k.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case k.Mod:return r=>s[0](r)%s[1](r);case k.Pow:return r=>Math.pow(s[0](r),s[1](r));case k.Abs:return r=>Math.abs(s[0](r));case k.Floor:return r=>Math.floor(s[0](r));case k.Ceil:return r=>Math.ceil(s[0](r));case k.Round:return r=>Math.round(s[0](r));case k.Sin:return r=>Math.sin(s[0](r));case k.Cos:return r=>Math.cos(s[0](r));case k.Atan:return 2===i?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case k.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${t}`)}}(n,e);case k.Case:return function uT(n,e){const t=n.args.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=Vt(n.args[s],e);return s=>{for(let r=0;r<t-1;r+=2)if(i[r](s))return i[r+1](s);return i[t-1](s)}}(n,e);case k.Match:return function fT(n,e){const t=n.args.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=Vt(n.args[s],e);return s=>{const r=i[0](s);for(let o=1;o<t;o+=2)if(r===i[o](s))return i[o+1](s);return i[t-1](s)}}(n,e);case k.Interpolate:return function pT(n,e){const t=n.args.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=Vt(n.args[s],e);return s=>{const r=i[0](s),o=i[1](s);let a,l;for(let c=2;c<t;c+=2){const d=i[c](s);let u=i[c+1](s);const f=Array.isArray(u);if(f&&(u=II(u)),d>=o)return 2===c?u:f?mT(r,o,a,l,d,u):Xs(r,o,a,l,d,u);a=d,l=u}return l}}(n,e);case k.ToString:return function gT(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Vt(n.args[r],e);if(t===k.ToString)return r=>{const o=s[0](r);return n.args[0].type===je?vl(o):o.toString()};throw new Error(`Unsupported convert operator ${t}`)}(n,e);default:throw new Error(`Unsupported operator ${t}`)}}function Xs(n,e,t,i,s,r){const o=s-t;if(0===o)return i;const a=e-t;return i+(1===n?a/o:(Math.pow(n,a)-1)/(Math.pow(n,o)-1))*(r-i)}function mT(n,e,t,i,s,r){if(s-t==0)return i;const a=zu(i),l=zu(r);let c=l[2]-a[2];return c>180?c-=360:c<-180&&(c+=360),Hu(function TI(n){const e=Ht.rgb(yI.xyz(n));return e[3]=n[3],e}([Xs(n,e,t,a[0],s,l[0]),Xs(n,e,t,a[1],s,l[1]),a[2]+Xs(n,e,t,0,s,c),Xs(n,e,t,i[3],s,r[3])]))}function _T(n){return!0}function yT(n){const e=rf(),t=function xT(n,e){const t=n.length,i=new Array(t);for(let s=0;s<t;++s){const r=n[s],o="filter"in r?xi(r.filter,Pe,e):_T;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Hl(r.style[c],e)}else a=[Hl(r.style,e)];i[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<t;++a)if((0,i[a].filter)(s)&&(!n[a].else||!o)){o=!0;for(const c of i[a].styles){const d=c(s);d&&r.push(d)}}return r}}(n,e),i={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(s,r){if(i.properties=s.getPropertiesInternal(),i.resolution=r,e.featureId){const o=s.getId();i.featureId=void 0!==o?o:null}return e.geometryType&&(i.geometryType=af(s.getGeometry())),t(i)}}function cf(n){const e=rf(),t=n.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=Hl(n[o],e);const s={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},r=new Array(t);return function(o,a){if(s.properties=o.getPropertiesInternal(),s.resolution=a,e.featureId){const c=o.getId();s.featureId=void 0!==c?c:null}let l=0;for(let c=0;c<t;++c){const d=i[c](s);d&&(r[l]=d,l+=1)}return r.length=l,r}}function Hl(n,e){const t=$s(n,"",e),i=qs(n,"",e),s=function vT(n,e){const t="text-",i=vi(n,t+"value",e);if(!i)return null;const s=$s(n,t,e),r=$s(n,t+"background-",e),o=qs(n,t,e),a=qs(n,t+"background-",e),l=vi(n,t+"font",e),c=ft(n,t+"max-angle",e),d=ft(n,t+"offset-x",e),u=ft(n,t+"offset-y",e),f=Js(n,t+"overflow",e),p=vi(n,t+"placement",e),g=ft(n,t+"repeat",e),m=wo(n,t+"scale",e),_=Js(n,t+"rotate-with-view",e),y=ft(n,t+"rotation",e),x=vi(n,t+"align",e),C=vi(n,t+"justify",e),v=vi(n,t+"baseline",e),b=hf(n,t+"padding",e),w=To(n,t+"declutter-mode"),T=new nf({declutterMode:w});return function(S){if(T.setText(i(S)),s&&T.setFill(s(S)),r&&T.setBackgroundFill(r(S)),o&&T.setStroke(o(S)),a&&T.setBackgroundStroke(a(S)),l&&T.setFont(l(S)),c&&T.setMaxAngle(c(S)),d&&T.setOffsetX(d(S)),u&&T.setOffsetY(u(S)),f&&T.setOverflow(f(S)),p){const E=p(S);if("point"!==E&&"line"!==E)throw new Error("Expected point or line for text-placement");T.setPlacement(E)}if(g&&T.setRepeat(g(S)),m&&T.setScale(m(S)),_&&T.setRotateWithView(_(S)),y&&T.setRotation(y(S)),x){const E=x(S);if("left"!==E&&"center"!==E&&"right"!==E&&"end"!==E&&"start"!==E)throw new Error("Expected left, right, center, start, or end for text-align");T.setTextAlign(E)}if(C){const E=C(S);if("left"!==E&&"right"!==E&&"center"!==E)throw new Error("Expected left, right, or center for text-justify");T.setJustify(E)}if(v){const E=v(S);if("bottom"!==E&&"top"!==E&&"middle"!==E&&"alphabetic"!==E&&"hanging"!==E)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");T.setTextBaseline(E)}return b&&T.setPadding(b(S)),T}}(n,e),r=function bT(n,e){return"icon-src"in n?function CT(n,e){const t="icon-",i=t+"src",s=pf(n[i],i),r=Co(n,t+"anchor",e),o=wo(n,t+"scale",e),a=ft(n,t+"opacity",e),l=Co(n,t+"displacement",e),c=ft(n,t+"rotation",e),d=Js(n,t+"rotate-with-view",e),u=uf(n,t+"anchor-origin"),f=ff(n,t+"anchor-x-units"),p=ff(n,t+"anchor-y-units"),g=function kT(n,e){const t=n[e];if(void 0!==t)return gf(t,e)}(n,t+"color"),m=function ET(n,e){const t=n[e];if(void 0!==t){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`);return t}}(n,t+"cross-origin"),_=function MT(n,e){const t=n[e];if(void 0!==t)return Qs(t,e)}(n,t+"offset"),y=uf(n,t+"offset-origin"),x=Io(n,t+"width"),C=Io(n,t+"height"),v=function ST(n,e){const t=n[e];if(void 0!==t){if("number"==typeof t)return xt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1])throw new Error(`Expected a number or size array for ${e}`);return t}}(n,t+"size"),b=To(n,t+"declutter-mode"),w=new tf({src:s,anchorOrigin:u,anchorXUnits:f,anchorYUnits:p,color:g,crossOrigin:m,offset:_,offsetOrigin:y,height:C,width:x,size:v,declutterMode:b});return function(T){return a&&w.setOpacity(a(T)),l&&w.setDisplacement(l(T)),c&&w.setRotation(c(T)),d&&w.setRotateWithView(d(T)),o&&w.setScale(o(T)),r&&w.setAnchor(r(T)),w}}(n,e):"shape-points"in n?function wT(n,e){const t="shape-",i=t+"points",s=t+"radius",r=Nl(n[i],i),o=Nl(n[s],s),a=$s(n,t,e),l=qs(n,t,e),c=wo(n,t+"scale",e),d=Co(n,t+"displacement",e),u=ft(n,t+"rotation",e),f=Js(n,t+"rotate-with-view",e),p=Io(n,t+"radius2"),g=Io(n,t+"angle"),m=To(n,t+"declutter-mode"),_=new Ju({points:r,radius:o,radius2:p,angle:g,declutterMode:m});return function(y){return a&&_.setFill(a(y)),l&&_.setStroke(l(y)),d&&_.setDisplacement(d(y)),u&&_.setRotation(u(y)),f&&_.setRotateWithView(f(y)),c&&_.setScale(c(y)),_}}(n,e):"circle-radius"in n?function IT(n,e){const t="circle-",i=$s(n,t,e),s=qs(n,t,e),r=ft(n,t+"radius",e),o=wo(n,t+"scale",e),a=Co(n,t+"displacement",e),l=ft(n,t+"rotation",e),c=Js(n,t+"rotate-with-view",e),d=To(n,t+"declutter-mode"),u=new Dl({radius:5,declutterMode:d});return function(f){return r&&u.setRadius(r(f)),i&&u.setFill(i(f)),s&&u.setStroke(s(f)),a&&u.setDisplacement(a(f)),l&&u.setRotation(l(f)),c&&u.setRotateWithView(c(f)),o&&u.setScale(o(f)),u}}(n,e):null}(n,e),o=ft(n,"z-index",e);if(!(t||i||s||r||Nn(n)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new Us;return function(l){let c=!0;if(t){const d=t(l);d&&(c=!1),a.setFill(d)}if(i){const d=i(l);d&&(c=!1),a.setStroke(d)}if(s){const d=s(l);d&&(c=!1),a.setText(d)}if(r){const d=r(l);d&&(c=!1),a.setImage(d)}return o&&a.setZIndex(o(l)),c?null:a}}function $s(n,e,t){let i;if(i=e+"fill-pattern-src"in n?function TT(n,e,t){const i=vi(n,e+"pattern-src",t),s=df(n,e+"pattern-offset",t),r=df(n,e+"pattern-size",t),o=Vl(n,e+"color",t);return function(a){return{src:i(a),offset:s&&s(a),size:r&&r(a),color:o&&o(a)}}}(n,e+"fill-",t):Vl(n,e+"fill-color",t),!i)return null;const s=new Yn;return function(r){const o=i(r);return"none"===o?null:(s.setColor(o),s)}}function qs(n,e,t){const i=ft(n,e+"stroke-width",t),s=Vl(n,e+"stroke-color",t);if(!i&&!s)return null;const r=vi(n,e+"stroke-line-cap",t),o=vi(n,e+"stroke-line-join",t),a=hf(n,e+"stroke-line-dash",t),l=ft(n,e+"stroke-line-dash-offset",t),c=ft(n,e+"stroke-miter-limit",t),d=new Pl;return function(u){if(s){const f=s(u);if("none"===f)return null;d.setColor(f)}if(i&&d.setWidth(i(u)),r){const f=r(u);if("butt"!==f&&"round"!==f&&"square"!==f)throw new Error("Expected butt, round, or square line cap");d.setLineCap(f)}if(o){const f=o(u);if("bevel"!==f&&"round"!==f&&"miter"!==f)throw new Error("Expected bevel, round, or miter line join");d.setLineJoin(f)}return a&&d.setLineDash(a(u)),l&&d.setLineDashOffset(l(u)),c&&d.setMiterLimit(c(u)),d}}function ft(n,e,t){if(!(e in n))return;const i=xi(n[e],K,t);return function(s){return Nl(i(s),e)}}function vi(n,e,t){if(!(e in n))return null;const i=xi(n[e],vt,t);return function(s){return pf(i(s),e)}}function Js(n,e,t){if(!(e in n))return null;const i=xi(n[e],Pe,t);return function(s){const r=i(s);if("boolean"!=typeof r)throw new Error(`Expected a boolean for ${e}`);return r}}function Vl(n,e,t){if(!(e in n))return null;const i=xi(n[e],je|vt,t);return function(s){return gf(i(s),e)}}function hf(n,e,t){if(!(e in n))return null;const i=xi(n[e],yi,t);return function(s){return Qs(i(s),e)}}function Co(n,e,t){if(!(e in n))return null;const i=xi(n[e],yi,t);return function(s){const r=Qs(i(s),e);if(2!==r.length)throw new Error(`Expected two numbers for ${e}`);return r}}function df(n,e,t){if(!(e in n))return null;const i=xi(n[e],yi,t);return function(s){return mf(i(s),e)}}function wo(n,e,t){if(!(e in n))return null;const i=xi(n[e],yi|K,t);return function(s){return function RT(n,e){return"number"==typeof n?n:mf(n,e)}(i(s),e)}}function Io(n,e){const t=n[e];if(void 0!==t){if("number"!=typeof t)throw new Error(`Expected a number for ${e}`);return t}}function uf(n,e){const t=n[e];if(void 0!==t){if("bottom-left"!==t&&"bottom-right"!==t&&"top-left"!==t&&"top-right"!==t)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function ff(n,e){const t=n[e];if(void 0!==t){if("pixels"!==t&&"fraction"!==t)throw new Error(`Expected pixels or fraction for ${e}`);return t}}function To(n,e){const t=n[e];if(void 0!==t){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`);if("declutter"!==t&&"obstacle"!==t&&"none"!==t)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Qs(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if("number"!=typeof n[i])throw new Error(`Expected an array of numbers for ${e}`);return n}function pf(n,e){if("string"!=typeof n)throw new Error(`Expected a string for ${e}`);return n}function Nl(n,e){if("number"!=typeof n)throw new Error(`Expected a number for ${e}`);return n}function gf(n,e){if("string"==typeof n)return n;const t=Qs(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function mf(n,e){const t=Qs(n,e);if(2!==t.length)throw new Error(`Expected an array of two numbers for ${e}`);return t}const yf=class DT extends go{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new Du(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){this.style_=function OT(n){if(void 0===n)return WI;if(!n)return null;if("function"==typeof n||n instanceof Us)return n;if(!Array.isArray(n))return cf([n]);if(0===n.length)return[];const e=n.length,t=n[0];if(t instanceof Us){const s=new Array(e);for(let r=0;r<e;++r){const o=n[r];if(!(o instanceof Us))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in t){const s=new Array(e);for(let r=0;r<e;++r){const o=n[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return yT(s)}return cf(n)}(e),this.styleFunction_=null===e?void 0:function KI(n){let e;if("function"==typeof n)e=n;else{let t;Array.isArray(n)?t=n:(he("function"==typeof n.getZIndex,"Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}(this.style_),this.changed()}},er={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},So=[er.FILL],Vi=[er.STROKE],gn=[er.BEGIN_PATH],xf=[er.CLOSE_PATH],U=er,vf=class LT{drawCustom(e,t,i,s,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},tr=class PT extends vf{constructor(e,t,i,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=e.length;a<l;a+=t)s[0]=e[a],s[1]=e[a+1],Rn(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,t,i,s,r,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=s);let d=e[t],u=e[t+1];const f=this.tmpCoordinate_;let g,m,_,p=!0;for(g=t+s;g<i;g+=s)f[0]=e[g],f[1]=e[g+1],_=Fa(c,f),_!==m?(p&&(a[l++]=d,a[l++]=u,p=!1),a[l++]=f[0],a[l++]=f[1]):_===We.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],p=!1):p=!0,d=f[0],u=f[1],m=_;return(r&&p||g===t+s)&&(a[l++]=d,a[l++]=u),l}drawCustomCoordinates_(e,t,i,s,r){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(e,t,l,s,!1,!1);r.push(c),t=l}return t}drawCustom(e,t,i,s,r){this.beginGeometry(e,t,r);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,d,u,f,p;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),f=[];const g=e.getEndss();p=0;for(let m=0,_=g.length;m<_;++m){const y=[];p=this.drawCustomCoordinates_(c,p,g[m],a,y),f.push(y)}this.instructions.push([U.CUSTOM,l,f,e,i,Cu,r]),this.hitDetectionInstructions.push([U.CUSTOM,l,f,e,s||i,Cu,r]);break;case"Polygon":case"MultiLineString":u=[],c="Polygon"==o?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,e.getEnds(),a,u),this.instructions.push([U.CUSTOM,l,u,e,i,uo,r]),this.hitDetectionInstructions.push([U.CUSTOM,l,u,e,s||i,uo,r]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),d=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([U.CUSTOM,l,d,e,i,Kn,r]),this.hitDetectionInstructions.push([U.CUSTOM,l,d,e,s||i,Kn,r]);break;case"MultiPoint":c=e.getFlatCoordinates(),d=this.appendFlatPointCoordinates(c,a),d>l&&(this.instructions.push([U.CUSTOM,l,d,e,i,Kn,r]),this.hitDetectionInstructions.push([U.CUSTOM,l,d,e,s||i,Kn,r]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),d=this.coordinates.length,this.instructions.push([U.CUSTOM,l,d,e,i,void 0,r]),this.hitDetectionInstructions.push([U.CUSTOM,l,d,e,s||i,void 0,r])}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[U.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[U.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const i=e.length;let s,r,o=-1;for(t=0;t<i;++t)s=e[t],r=s[0],r==U.END_GEOMETRY?o=t:r==U.BEGIN_GEOMETRY&&(s[2]=t,k2(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const s=e.getColor();i.fillPatternScale=s&&"object"==typeof s&&"src"in s?this.pixelRatio:1,i.fillStyle=$t(s||ut)}else i.fillStyle=void 0;if(t){const s=t.getColor();i.strokeStyle=$t(s||Gs);const r=t.getLineCap();i.lineCap=void 0!==r?r:Wn;const o=t.getLineDash();i.lineDash=o?o.slice():gi;const a=t.getLineDashOffset();i.lineDashOffset=a||0;const l=t.getLineJoin();i.lineJoin=void 0!==l?l:Gn;const c=t.getWidth();i.lineWidth=void 0!==c?c:1;const d=t.getMiterLimit();i.miterLimit=void 0!==d?d:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[U.SET_FILL_STYLE,t];return"string"!=typeof t&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[U.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=s||r!=e.currentLineDash&&!Li(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(void 0!==i&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[U.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Hd(this.maxExtent),this.maxLineWidth>0)&&Pa(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},bf=class VT extends tr{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinatess_(e,t,i,s){const r=this.state,o=void 0!==r.fillStyle,a=void 0!==r.strokeStyle,l=i.length;this.instructions.push(gn),this.hitDetectionInstructions.push(gn);for(let c=0;c<l;++c){const d=i[c],u=this.coordinates.length,f=this.appendFlatLineCoordinates(e,t,d,s,!0,!a),p=[U.MOVE_TO_LINE_TO,u,f];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(xf),this.hitDetectionInstructions.push(xf)),t=d}return o&&(this.instructions.push(So),this.hitDetectionInstructions.push(So)),a&&(this.instructions.push(Vi),this.hitDetectionInstructions.push(Vi)),t}drawCircle(e,t,i){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,ut]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,0]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const d=[U.CIRCLE,c];this.instructions.push(gn,d),this.hitDetectionInstructions.push(gn,d),void 0!==s.fillStyle&&(this.instructions.push(So),this.hitDetectionInstructions.push(So)),void 0!==s.strokeStyle&&(this.instructions.push(Vi),this.hitDetectionInstructions.push(Vi)),this.endGeometry(t)}drawPolygon(e,t,i){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,ut]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,0]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,i){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,ut]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,0]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let d=0;for(let u=0,f=a.length;u<f;++u)d=this.drawFlatCoordinatess_(l,d,a[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let i=0,s=t.length;i<s;++i)t[i]=hn(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};function NT(n,e,t,i,s){const r=[];let o=t,a=0,l=e.slice(t,2);for(;a<n&&o+s<i;){const[c,d]=l.slice(-2),u=e[o+s],f=e[o+s+1],p=Math.sqrt((u-c)*(u-c)+(f-d)*(f-d));if(a+=p,a>=n){const g=(n-a+p)/p,m=Tt(c,u,g),_=Tt(d,f,g);l.push(m,_),r.push(l),l=[m,_],a==n&&(o+=s),a=0}else if(a<n)l.push(e[o+s],e[o+s+1]),o+=s;else{const g=p-a,m=Tt(c,u,g/p),_=Tt(d,f,g/p);l.push(m,_),r.push(l),l=[m,_],a=0,o+=s}}return a>0&&r.push(l),r}function BT(n,e,t,i,s){let d,u,f,p,g,m,_,y,x,C,r=t,o=t,a=0,l=0,c=t;for(u=t;u<i;u+=s){const v=e[u],b=e[u+1];void 0!==g&&(x=v-g,C=b-m,p=Math.sqrt(x*x+C*C),void 0!==_&&(l+=f,d=Math.acos((_*x+y*C)/(f*p)),d>n&&(l>a&&(a=l,r=c,o=u),l=0,c=u-s)),f=p,_=x,y=C),g=v,m=b}return l+=p,l>a?[c,u]:[r,o]}const Eo={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},WT={Circle:bf,Default:tr,Image:class FT extends tr{constructor(e,t,i,s){super(e,t,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Rn(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const s=e.getFlatCoordinates(),r=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,r);this.instructions.push([U.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([U.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const s=e.getFlatCoordinates(),r=[];for(let l=0,c=s.length;l<c;l+=e.getStride())(!this.maxExtent||Rn(this.maxExtent,s.slice(l,l+2)))&&r.push(s[l],s[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,2);this.instructions.push([U.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([U.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class zT extends tr{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinates_(e,t,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,s,!1,!1),a=[U.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const s=this.state;if(void 0===s.strokeStyle||void 0===s.lineWidth)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,0],gn);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Vi),this.endGeometry(t)}drawMultiLineString(e,t,i){const s=this.state;if(void 0===s.strokeStyle||void 0===s.lineWidth)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,gi,0],gn);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let d=0;for(let u=0,f=a.length;u<f;++u)d=this.drawFlatCoordinates_(l,d,a[u],c);this.hitDetectionInstructions.push(Vi),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Vi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Vi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(gn)}},Polygon:bf,Text:class KT extends tr{constructor(e,t,i,s){super(e,t,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ut]={fillStyle:ut},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const o=this.textState_;if(""===this.text_||!o||!this.textFillState_&&!this.textStrokeState_)return;const a=this.coordinates;let l=a.length;const c=e.getType();let d=null,u=e.getStride();if("line"!==o.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){let f=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":d=e.getFlatCoordinates();break;case"LineString":d=e.getFlatMidpoint();break;case"Circle":d=e.getCenter();break;case"MultiLineString":d=e.getFlatMidpoints(),u=2;break;case"Polygon":d=e.getFlatInteriorPoint(),o.overflow||f.push(d[2]/this.resolution),u=3;break;case"MultiPolygon":const x=e.getFlatInteriorPoints();d=[];for(let C=0,v=x.length;C<v;C+=3)o.overflow||f.push(x[C+2]/this.resolution),d.push(x[C],x[C+1]);if(0===d.length)return;u=2}const p=this.appendFlatPointCoordinates(d,u);if(p===l)return;if(f&&(p-l)/2!=d.length/u){let x=l/2;f=f.filter((C,v)=>{const b=a[2*(x+v)]===d[v*u]&&a[2*(x+v)+1]===d[v*u+1];return b||--x,b})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,i);let g=o.padding;if(g!=pn&&(o.scale[0]<0||o.scale[1]<0)){let x=o.padding[0],C=o.padding[1],v=o.padding[2],b=o.padding[3];o.scale[0]<0&&(C=-C,b=-b),o.scale[1]<0&&(x=-x,v=-v),g=[x,C,v,b]}const m=this.pixelRatio;this.instructions.push([U.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==pn?pn:g.map(function(x){return x*m}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const _=1/m,y=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=ut,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([U.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[_,_],NaN,this.declutterMode_,this.declutterImageWithText_,g,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ut:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),o.backgroundFill&&(this.state.fillStyle=y,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}else{if(!dt(this.maxExtent,e.getExtent()))return;let f;if(d=e.getFlatCoordinates(),"LineString"==c)f=[d.length];else if("MultiLineString"==c)f=e.getEnds();else if("Polygon"==c)f=e.getEnds().slice(0,1);else if("MultiPolygon"==c){const _=e.getEndss();f=[];for(let y=0,x=_.length;y<x;++y)f.push(_[y][0])}this.beginGeometry(e,t,i);const p=o.repeat,g=p?void 0:o.textAlign;let m=0;for(let _=0,y=f.length;_<y;++_){let x;x=p?NT(p*this.resolution,d,m,f[_],u):[d.slice(m,f[_])];for(let C=0,v=x.length;C<v;++C){const b=x[C];let w=0,T=b.length;if(null==g){const E=BT(o.maxAngle,b,0,b.length,2);w=E[0],T=E[1]}for(let E=w;E<T;E+=u)a.push(b[E],b[E+1]);const S=a.length;m=f[_],this.drawChars_(l,S),l=S}}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||js,justify:t.justify,textBaseline:t.textBaseline||xo,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=Eo[s.textBaseline],d=this.textOffsetY_*l,u=this.text_,f=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([U.DRAW_CHARS,e,t,c,s.overflow,a,s.maxAngle,l,d,r,f*l,u,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([U.DRAW_CHARS,e,t,c,s.overflow,a&&ut,s.maxAngle,l,d,r,f*l,u,o,1/l,this.declutterMode_])}setTextStyle(e,t){let i,s,r;if(e){const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=$t(o.getColor()||ut)):(s=null,this.textFillState_=s);const a=e.getStroke();if(a){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),y=a.getMiterLimit();r.lineCap=a.getLineCap()||Wn,r.lineDash=g?g.slice():gi,r.lineDashOffset=void 0===m?0:m,r.lineJoin=a.getLineJoin()||Gn,r.lineWidth=void 0===_?1:_,r.miterLimit=void 0===y?10:y,r.strokeStyle=$t(a.getColor()||Gs)}else r=null,this.textStrokeState_=r;i=this.textState_;const l=e.getFont()||Xu;zI(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||xo,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||pn,i.scale=void 0===c?[1,1]:c;const d=e.getOffsetX(),u=e.getOffsetY(),f=e.getRotateWithView(),p=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0===p?0:p,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:xe(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?"string"==typeof s.fillStyle?s.fillStyle:"|"+xe(s.fillStyle):""}else this.text_="";this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}},jT=class GT{constructor(e,t,i,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const s in i){const r=i[s].finish();e[t][s]=r}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let s=this.buildersByZIndex_[i];void 0===s&&(s={},this.buildersByZIndex_[i]=s);let r=s[t];return void 0===r&&(r=new(0,WT[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=r),r}},UT=class YT extends nu{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return pe()}getData(e){return null}prepareFrame(e){return pe()}renderFrame(e,t){return pe()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(s,r)=>{const o=this.loadedTileCallback.bind(this,i,s);return e.forEachLoadedTile(t,s,r,o)}}forEachFeatureAtCoordinate(e,t,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===te_LOADED||t.getState()===te_ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=te_LOADED&&t!=te_ERROR&&e.addEventListener("change",this.boundHandleImageChange_),t==te_IDLE&&(e.load(),t=e.getState()),t==te_LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}},Cf=class ZT extends fi{constructor(e,t,i,s){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=s}},wf=class XT{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(CanvasRenderingContext2D.prototype,{get:(e,t)=>{if("function"==typeof Cl()[t])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,i),!0)})}pushMethodArgs_=(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this);getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,s=t.length;i<s;i+=2){const r=t[i],o=t[i+1];if("function"==typeof e[r])e[r](...o);else{if("function"==typeof o){e[r]=o(e);continue}e[r]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},If=[];let Xn=null;const Tf=class qT extends UT{constructor(e){super(e),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){let s;Xn||function $T(){Xn=Xe(1,1,void 0,{willReadFrequently:!0})}(),Xn.clearRect(0,0,1,1);try{Xn.drawImage(e,t,i,1,1,0,0,1,1),s=Xn.getImageData(0,0,1,1).data}catch{return Xn=null,null}return s}getBackground(e){let i=this.getLayer().getBackground();return"function"==typeof i&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!i||e&&e.style.backgroundColor&&Li(Bs(e.style.backgroundColor),Bs(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Xe();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const s=ln(i),r=Zr(i),o=Ur(i),a=Yr(i);Ge(t.coordinateToPixelTransform,s),Ge(t.coordinateToPixelTransform,r),Ge(t.coordinateToPixelTransform,o),Ge(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ge(l,s),Ge(l,r),Ge(l,o),Ge(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const s=this.getLayer();if(s.hasListener(e)){const r=new Cf(e,this.inversePixelTransform,i,t);s.dispatchEvent(r)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_("prerender",e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_("postrender",e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new wf),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_("prerender",this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_("postrender",this.context,e))}getRenderTransform(e,t,i,s,r,o,a){const d=s/t;return zt(this.tempTransform,r/2,o/2,d,-d,-i,-e[0]+a,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}};function JT(n,e,t,i,s,r,o,a,l,c,d,u){let f=n[e],p=n[e+1],g=0,m=0,_=0,y=0;function x(){g=f,m=p,f=n[e+=i],p=n[e+1],y+=_,_=Math.sqrt((f-g)*(f-g)+(p-m)*(p-m))}do{x()}while(e<t-i&&y+_<r);let C=0===_?0:(r-y)/_;const v=Tt(g,f,C),b=Tt(m,p,C),w=e-i,T=y,S=r+a*l(c,s,d);for(;e<t-i&&y+_<S;)x();C=0===_?0:(S-y)/_;const E=Tt(g,f,C),P=Tt(m,p,C);let A;if(u){const z=[v,b,E,P];du(z,0,4,2,u,z,z),A=z[0]>z[2]}else A=v>E;const F=Math.PI,W=[],re=w+i===e;let R;if(_=0,y=T,f=n[e=w],p=n[e+1],re)return x(),R=Math.atan2(p-m,f-g),A&&(R+=R>0?-F:F),W[0]=[(E+v)/2,(P+b)/2,(S-r)/2,R,s],W;for(let z=0,L=(s=s.replace(/\n/g," ")).length;z<L;){x();let j=Math.atan2(p-m,f-g);if(A&&(j+=j>0?-F:F),void 0!==R){let D=j-R;if(D+=D>F?-2*F:D<-F?2*F:0,Math.abs(D)>o)return null}R=j;const ge=z;let q=0;for(;z<L;++z){const Ee=a*l(c,s[A?L-z-1:z],d);if(e+i<t&&y+_<r+q+Ee/2)break;q+=Ee}if(z===ge)continue;const ce=A?s.substring(L-ge,L-z):s.substring(ge,z);C=0===_?0:(r+q/2-y)/_;const ie=Tt(g,f,C),Se=Tt(m,p,C);W.push([ie,Se,q/2,j,ce]),r+=q}return W}function Sf(n,e,t,i){let s=n[e],r=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const l=n[a],c=n[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-r)*(c-r)),s=l,r=c}return o}const $n=[1/0,1/0,-1/0,-1/0],Ni=[],bi=[],Ci=[],Bi=[];function Ef(n){return n[3].declutterBox}const Mf=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Bl(n,e){return"start"===e?e=Mf.test(n)?"right":"left":"end"===e&&(e=Mf.test(n)?"left":"right"),Eo[e]}function QT(n,e,t){return t>0&&n.push("\n",""),n.push(e,""),n}const tS=class eS{constructor(e,t,i,s,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new wf:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,s){const r=e+t+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,d=[l.scale[0]*c,l.scale[1]*c],u=Array.isArray(e),f=l.justify?Eo[l.justify]:Bl(Array.isArray(e)?e[0]:e,l.textAlign||js),p=s&&o.lineWidth?o.lineWidth:0,g=u?e:e.split("\n").reduce(QT,[]),{width:m,height:_,widths:y,heights:x,lineWidths:C}=function VI(n,e){const t=[],i=[],s=[];let r=0,o=0,a=0,l=0;for(let c=0,d=e.length;c<=d;c+=2){const u=e[c];if("\n"===u||c===d){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const f=e[c+1]||n.font,p=vo(f,u);t.push(p),o+=p;const g=HI(f);i.push(g),l=Math.max(l,g)}return{width:r,height:a,widths:t,heights:i,lineWidths:s}}(l,g),v=m+p,b=[],w=(v+2)*d[0],T=(_+p)*d[1],S={width:w<0?Math.floor(w):Math.ceil(w),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:b};(1!=d[0]||1!=d[1])&&b.push("scale",d),s&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",p),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)),i&&b.push("fillStyle",a.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const E=.5-f;let P=f*v+E*p;const A=[],F=[];let L,W=0,re=0,R=0,z=0;for(let j=0,ge=g.length;j<ge;j+=2){const q=g[j];if("\n"===q){re+=W,W=0,P=f*v+E*p,++z;continue}const ce=g[j+1]||l.font;ce!==L&&(s&&A.push("font",ce),i&&F.push("font",ce),L=ce),W=Math.max(W,x[R]);const ie=[q,P+E*y[R]+f*(y[R]-C[z]),.5*(p+W)+re];P+=y[R],s&&A.push("strokeText",ie),i&&F.push("fillText",ie),++R}return Array.prototype.push.apply(b,A),Array.prototype.push.apply(b,F),this.labels_[r]=S,S}replayTextBackground_(e,t,i,s,r,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,s,r,o,a,l,c,d,u,f,p,g,m,_){let y=i-(a*=f[0]),x=s-(l*=f[1]);const C=r+c>e?e-c:r,v=o+d>t?t-d:o,b=g[3]+C*f[0]+g[1],w=g[0]+v*f[1]+g[2],T=y-g[3],S=x-g[0];let E;return(m||0!==u)&&(Ni[0]=T,Bi[0]=T,Ni[1]=S,bi[1]=S,bi[0]=T+b,Ci[0]=bi[0],Ci[1]=S+w,Bi[1]=Ci[1]),0!==u?(E=zt([1,0,0,1,0,0],i,s,1,1,u,-i,-s),Ge(E,Ni),Ge(E,bi),Ge(E,Ci),Ge(E,Bi),di(Math.min(Ni[0],bi[0],Ci[0],Bi[0]),Math.min(Ni[1],bi[1],Ci[1],Bi[1]),Math.max(Ni[0],bi[0],Ci[0],Bi[0]),Math.max(Ni[1],bi[1],Ci[1],Bi[1]),$n)):di(Math.min(T,T+b),Math.min(S,S+w),Math.max(T,T+b),Math.max(S,S+w),$n),p&&(y=Math.round(y),x=Math.round(x)),{drawImageX:y,drawImageY:x,drawImageW:C,drawImageH:v,originX:c,originY:d,declutterBox:{minX:$n[0],minY:$n[1],maxX:$n[2],maxY:$n[3],value:_},canvasTransform:E,scale:f}}replayImageOrLabel_(e,t,i,s,r,o,a){const c=s.declutterBox,d=a?a[2]*s.scale[0]/2:0;return c.minX-d<=t[0]&&c.maxX+d>=0&&c.minY-d<=t[1]&&c.maxY+d>=0&&(!(!o&&!a)&&this.replayTextBackground_(e,Ni,bi,Ci,Bi,o,a),function NI(n,e,t,i,s,r,o,a,l,c,d){n.save(),1!==t&&(void 0===n.globalAlpha?n.globalAlpha=u=>u.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(l,c),n.scale(d[0],d[1]),function BI(n,e){const t=n.contextInstructions;for(let i=0,s=t.length;i<s;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}(i,n)):d[0]<0||d[1]<0?(n.translate(l,c),n.scale(d[0],d[1]),n.drawImage(i,s,r,o,a,0,0,o,a)):n.drawImage(i,s,r,o,a,l,c,o*d[0],a*d[1]),n.restore()}(e,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Ge(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(i[0]%s,i[1]%s),1!==t&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,s){const r=this.textStates[t],o=this.createLabel(e,t,s,i),a=this.strokeStates[i],l=this.pixelRatio,c=Bl(Array.isArray(e)?e[0]:e,r.textAlign||js),d=Eo[r.textBaseline||xo],u=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:c*(o.width/l-2*r.scale[0])+2*(.5-c)*u,anchorY:d*o.height/l+2*(.5-d)*u}}execute_(e,t,i,s,r,o,a,l){const c=this.zIndexContext_;let d;this.pixelCoordinates_&&Li(i,this.renderedTransform_)?d=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),d=Pi(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),function Y2(n,e){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5]}(this.renderedTransform_,i));let u=0;const f=s.length;let g,m,_,y,x,C,v,b,w,T,S,E,P,p=0,A=0,F=0,W=null,re=null;const R=this.coordinateCache_,z=this.viewRotation_,L=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,j={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:z},ge=this.instructions!=s||this.overlaps?0:200;let q,ce,ie,Se;for(;u<f;){const D=s[u];switch(D[0]){case U.BEGIN_GEOMETRY:q=D[1],Se=D[3],q.getGeometry()?void 0===a||dt(a,Se.getExtent())?++u:u=D[2]+1:u=D[2],c&&(c.zIndex=D[4]);break;case U.BEGIN_PATH:A>ge&&(this.fill_(e),A=0),F>ge&&(e.stroke(),F=0),!A&&!F&&(e.beginPath(),x=NaN,C=NaN),++u;break;case U.CIRCLE:p=D[1];const $e=d[p],Be=d[p+1],mt=d[p+2]-$e,or=d[p+3]-Be,yn=Math.sqrt(mt*mt+or*or);e.moveTo($e+yn,Be),e.arc($e,Be,yn,0,2*Math.PI,!0),++u;break;case U.CLOSE_PATH:e.closePath(),++u;break;case U.CUSTOM:p=D[1],g=D[2];const Lo=D[4],Po=D[5];j.geometry=D[3],j.feature=q,u in R||(R[u]=[]);const kt=R[u];Po?Po(d,p,g,2,kt):(kt[0]=d[p],kt[1]=d[p+1],kt.length=2),c&&(c.zIndex=D[6]),Lo(kt,j),++u;break;case U.DRAW_IMAGE:p=D[1],g=D[2],w=D[3],m=D[4],_=D[5];let is=D[6];const Fo=D[7],rc=D[8],Ao=D[9],zo=D[10];let bt=D[11];const Bt=D[12];let ei=D[13];y=D[14]||"declutter";const Kt=D[15];if(!w&&D.length>=20){T=D[19],S=D[20],E=D[21],P=D[22];const Rt=this.drawLabelWithPointPlacement_(T,S,E,P);w=Rt.label,D[3]=w,m=(Rt.anchorX-D[23])*this.pixelRatio,D[4]=m,_=(Rt.anchorY-D[24])*this.pixelRatio,D[5]=_,is=w.height,D[6]=is,ei=w.width,D[13]=ei}let ns,ss,Ui,wi;D.length>25&&(ns=D[25]),D.length>17?(ss=D[16],Ui=D[17],wi=D[18]):(ss=pn,Ui=!1,wi=!1),zo&&L?bt+=z:!zo&&!L&&(bt-=z);let oc=0;for(;p<g;p+=2){if(ns&&ns[oc++]<ei/this.pixelRatio)continue;const Rt=this.calculateImageOrLabelDimensions_(w.width,w.height,d[p],d[p+1],ei,is,m,_,rc,Ao,bt,Bt,r,ss,Ui||wi,q),xn=[e,t,w,Rt,Fo,Ui?W:null,wi?re:null];if(l){let Dt,ti,Ot,Ii,Ti;if(Kt){const Ae=g-p;if(!Kt[Ae]){Kt[Ae]={args:xn,declutterMode:y};continue}const ct=Kt[Ae];Dt=ct.args,ti=ct.declutterMode,delete Kt[Ae],Ot=Ef(Dt)}if(Dt&&("declutter"!==ti||!l.collides(Ot))&&(Ii=!0),("declutter"!==y||!l.collides(Rt.declutterBox))&&(Ti=!0),"declutter"===ti&&"declutter"===y){const Ae=Ii&&Ti;Ii=Ae,Ti=Ae}Ii&&("none"!==ti&&l.insert(Ot),this.replayImageOrLabel_.apply(this,Dt)),Ti&&("none"!==y&&l.insert(Rt.declutterBox),this.replayImageOrLabel_.apply(this,xn))}else this.replayImageOrLabel_.apply(this,xn)}++u;break;case U.DRAW_CHARS:const lt=D[1],hp=D[2],ac=D[3],AM=D[4];P=D[5];const zM=D[6],dp=D[7],up=D[8];E=D[9];const lc=D[10];T=D[11],S=D[12];const fp=[D[13],D[13]];y=D[14]||"declutter";const cc=this.textStates[S],ar=cc.font,lr=[cc.scale[0]*dp,cc.scale[1]*dp];let cr;ar in this.widths_?cr=this.widths_[ar]:(cr={},this.widths_[ar]=cr);const pp=Sf(d,lt,hp,2),gp=Math.abs(lr[0])*qu(ar,T,cr);if(AM||gp<=pp){const Dt=JT(d,lt,hp,2,T,(pp-gp)*Bl(T,this.textStates[S].textAlign),zM,Math.abs(lr[0]),qu,ar,cr,L?0:this.viewRotation_);e:if(Dt){const ti=[];let Ot,Ii,Ti,Ae,ct;if(E)for(Ot=0,Ii=Dt.length;Ot<Ii;++Ot){ct=Dt[Ot],Ti=ct[4],Ae=this.createLabel(Ti,S,"",E),m=ct[2]+(lr[0]<0?-lc:lc),_=ac*Ae.height+2*(.5-ac)*lc*lr[1]/lr[0]-up;const Si=this.calculateImageOrLabelDimensions_(Ae.width,Ae.height,ct[0],ct[1],Ae.width,Ae.height,m,_,0,0,ct[3],fp,!1,pn,!1,q);if(l&&"declutter"===y&&l.collides(Si.declutterBox))break e;ti.push([e,t,Ae,Si,1,null,null])}if(P)for(Ot=0,Ii=Dt.length;Ot<Ii;++Ot){ct=Dt[Ot],Ti=ct[4],Ae=this.createLabel(Ti,S,P,""),m=ct[2],_=ac*Ae.height-up;const Si=this.calculateImageOrLabelDimensions_(Ae.width,Ae.height,ct[0],ct[1],Ae.width,Ae.height,m,_,0,0,ct[3],fp,!1,pn,!1,q);if(l&&"declutter"===y&&l.collides(Si.declutterBox))break e;ti.push([e,t,Ae,Si,1,null,null])}l&&"none"!==y&&l.load(ti.map(Ef));for(let Si=0,HM=ti.length;Si<HM;++Si)this.replayImageOrLabel_.apply(this,ti[Si])}}++u;break;case U.END_GEOMETRY:if(void 0!==o){q=D[1];const Rt=o(q,Se);if(Rt)return Rt}++u;break;case U.FILL:ge?A++:this.fill_(e),++u;break;case U.MOVE_TO_LINE_TO:for(p=D[1],g=D[2],ce=d[p],ie=d[p+1],v=ce+.5|0,b=ie+.5|0,(v!==x||b!==C)&&(e.moveTo(ce,ie),x=v,C=b),p+=2;p<g;p+=2)ce=d[p],ie=d[p+1],v=ce+.5|0,b=ie+.5|0,(p==g-2||v!==x||b!==C)&&(e.lineTo(ce,ie),x=v,C=b);++u;break;case U.SET_FILL_STYLE:W=D,this.alignAndScaleFill_=D[2],A&&(this.fill_(e),A=0,F&&(e.stroke(),F=0)),e.fillStyle=D[1],++u;break;case U.SET_STROKE_STYLE:re=D,F&&(e.stroke(),F=0),this.setStrokeStyle_(e,D),++u;break;case U.STROKE:ge?F++:e.stroke(),++u;break;default:++u}}A&&this.fill_(e),F&&e.stroke()}execute(e,t,i,s,r,o){this.viewRotation_=s,this.execute_(e,t,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,t,i,s,r){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,s,r)}},ir=["Polygon","Circle","LineString","Image","Text","Default"],kf=["Image","Text"],iS=ir.filter(n=>!kf.includes(n)),Kl={},rS=class nS{constructor(e,t,i,s,r,o,a){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(r,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let s=this.executorsByZIndex_[i];void 0===s&&(s={},this.executorsByZIndex_[i]=s);const r=e[i];for(const o in r)s[o]=new tS(this.resolution_,this.pixelRatio_,this.overlaps_,r[o],t)}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let s=0,r=e.length;s<r;++s)if(e[s]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,s,r,o){const a=2*(s=Math.round(s))+1,l=zt(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Xe(a,a,void 0,{willReadFrequently:!0}));const d=this.hitDetectionContext_;let u;d.canvas.width!==a||d.canvas.height!==a?(d.canvas.width=a,d.canvas.height=a):c||d.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(u=[1/0,1/0,-1/0,-1/0],On(u,e),Pa(u,t*(this.renderBuffer_+s),u));const f=function sS(n){if(void 0!==Kl[n])return Kl[n];const e=2*n+1,t=n*n,i=new Array(t+1);for(let r=0;r<=n;++r)for(let o=0;o<=n;++o){const a=r*r+o*o;if(a>t)break;let l=i[a];l||(l=[],i[a]=l),l.push(4*((n+r)*e+(n+o))+3),r>0&&l.push(4*((n-r)*e+(n+o))+3),o>0&&(l.push(4*((n+r)*e+(n-o))+3),r>0&&l.push(4*((n-r)*e+(n-o))+3))}const s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return Kl[n]=s,s}(s);let p;function g(b,w){const T=d.getImageData(0,0,a,a).data;for(let S=0,E=f.length;S<E;S++)if(T[f[S]]>0){if(!o||"Image"!==p&&"Text"!==p||o.includes(b)){const P=(f[S]-3)/4,A=s-P%a,F=s-(P/a|0),W=r(b,w,A*A+F*F);if(W)return W}d.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);let _,y,x,C,v;for(m.sort(pi),_=m.length-1;_>=0;--_){const b=m[_].toString();for(x=this.executorsByZIndex_[b],y=ir.length-1;y>=0;--y)if(p=ir[y],C=x[p],void 0!==C&&(v=C.executeHitDetection(d,l,i,g,u),v))return v}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],s=t[1],r=t[2],o=t[3],a=[i,s,i,o,r,o,r,s];return Pi(a,0,8,2,e,a),a}isEmpty(){return Nn(this.executorsByZIndex_)}execute(e,t,i,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);let c,d,u,f,p,g;for(l.sort(pi),o=o||ir,a&&l.reverse(),c=0,d=l.length;c<d;++c){const m=l[c].toString();for(p=this.executorsByZIndex_[m],u=0,f=o.length;u<f;++u){const _=o[u];if(g=p[_],void 0!==g){const y=null===a?void 0:g.getZIndexContext(),x=y?y.getContext():e,C=this.maxExtent_&&"Image"!==_&&"Text"!==_;if(C&&(x.save(),this.clip(x,i)),g.execute(x,t,i,s,r,a),C&&x.restore(),y){y.offset();const v=l[c];this.deferredZIndexContexts_[v]||(this.deferredZIndexContexts_[v]=[]),this.deferredZIndexContexts_[v].push(y)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(pi);for(let i=0,s=t.length;i<s;++i)e[t[i]].forEach(r=>{r.draw(this.renderedContext_),r.clear()})}},aS=class oS extends vf{constructor(e,t,i,s,r,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=s,this.transformRotation_=s?qr(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,i,s){if(!this.image_)return;const r=Pi(e,t,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;0===this.transformRotation_&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let d=0,u=r.length;d<u;d+=2){const f=r[d]-this.imageAnchorX_,p=r[d+1]-this.imageAnchorY_;if(0!==c||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const g=f+this.imageAnchorX_,m=p+this.imageAnchorY_;zt(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=l)}drawText_(e,t,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Pi(e,t,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=s){const l=r[t]+this.textOffsetX_,c=r[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,s,r){const o=this.context_,a=Pi(e,t,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return r&&o.closePath(),i}drawRings_(e,t,i,s){for(let r=0,o=i.length;r<o;++r)t=this.moveToLineTo_(e,t,i[r],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),dt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function eI(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const s=n.getStride();return Pi(i,0,i.length,s,e,t)}(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],s=t[3]-t[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,s=t.length;i<s;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),dt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(dt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);i.stroke()}if(""!==this.text_){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),dt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),dt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=r.length;a<l;++a)s=this.drawRings_(i,s,r[a],o);this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Li(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,s=e.textAlign?e.textAlign:js;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=s&&(i.textAlign=s,t.textAlign=s),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const i=e.getColor();this.fillState_={fillStyle:$t(i||ut)}}else this.fillState_=null;if(t){const i=t.getColor(),s=t.getLineCap(),r=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),d=r||gi;this.strokeState_={lineCap:void 0!==s?s:Wn,lineDash:1===this.pixelRatio_?d:d.map(u=>u*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==a?a:Gn,lineWidth:(void 0!==l?l:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:$t(i||Gs)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const i=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(e){const t=e.getFill();if(t){const p=t.getColor();this.textFillState_={fillStyle:$t(p||ut)}}else this.textFillState_=null;const i=e.getStroke();if(i){const p=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),_=i.getLineDashOffset(),y=i.getLineJoin(),x=i.getWidth(),C=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==g?g:Wn,lineDash:m||gi,lineDashOffset:_||0,lineJoin:void 0!==y?y:Gn,lineWidth:void 0!==x?x:1,miterLimit:void 0!==C?C:10,strokeStyle:$t(p||Gs)}}else this.textStrokeState_=null;const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),d=e.getText(),u=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:void 0!==s?s:Xu,textAlign:void 0!==u?u:js,textBaseline:void 0!==f?f:xo},this.text_=void 0!==d?Array.isArray(d)?d.reduce((p,g,m)=>p+(m%2?" ":g),""):d:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==l?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}},Jt=.5,hS=.5,Rf={Point:function yS(n,e,t,i,s,r){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),c=r&&o&&l?{}:void 0;if(o){if(o.getImageState()!=te_LOADED)return;const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(o,c),d.drawPoint(e,i,s)}if(l){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(a,c),d.drawText(e,i,s)}},LineString:function gS(n,e,t,i,s){const r=t.getStroke();if(r){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,i,s)}const o=t.getText();if(o&&o.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,s)}},Polygon:function vS(n,e,t,i,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(e,i,s)}const a=t.getText();if(a&&a.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,s)}},MultiPoint:function xS(n,e,t,i,s,r){const o=t.getImage(),a=o&&0!==o.getOpacity(),l=t.getText(),c=l&&l.getText(),d=r&&a&&c?{}:void 0;if(a){if(o.getImageState()!=te_LOADED)return;const u=n.getBuilder(t.getZIndex(),"Image");u.setImageStyle(o,d),u.drawMultiPoint(e,i,s)}if(c){const u=n.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l,d),u.drawText(e,i,s)}},MultiLineString:function mS(n,e,t,i,s){const r=t.getStroke();if(r){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,i,s)}const o=t.getText();if(o&&o.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,s)}},MultiPolygon:function _S(n,e,t,i,s){const r=t.getFill(),o=t.getStroke();if(o||r){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(e,i,s)}const a=t.getText();if(a&&a.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,s)}},GeometryCollection:function pS(n,e,t,i,s,r){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a)(0,Rf[o[a].getType()])(n,o[a],t,i,s,r)},Circle:function uS(n,e,t,i,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(e,i,s)}const a=t.getText();if(a&&a.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}};function dS(n,e){return parseInt(xe(n),10)-parseInt(xe(e),10)}function Df(n,e){const t=Of(n,e);return t*t}function Of(n,e){return hS*n/e}function Lf(n,e,t,i,s,r,o,a){const l=[],c=t.getImage();if(c){let f=!0;const p=c.getImageState();p==te_LOADED||p==te_ERROR?f=!1:p==te_IDLE&&c.load(),f&&l.push(c.ready())}const d=t.getFill();d&&d.loading()&&l.push(d.ready());const u=l.length>0;return u&&Promise.all(l).then(()=>s(null)),function fS(n,e,t,i,s,r,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,s);t.getRenderer()?Pf(n,l,t,e,o):(0,Rf[l.getType()])(n,l,t,e,o,r)}(n,e,t,i,r,o,a),u}function Pf(n,e,t,i,s){if("GeometryCollection"!=e.getType())n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),s);else{const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)Pf(n,o[a],t,i,s)}}const CS=class bS extends Tf{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const s=t.extent,r=t.viewState,o=r.center,a=r.resolution,l=r.projection,c=r.rotation,d=l.getExtent(),u=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),p=t.pixelRatio,g=t.viewHints,m=!(g[0]||g[1]),_=this.context,y=Math.round(ye(s)/a*p),x=Math.round(Ue(s)/a*p),C=u.getWrapX()&&l.canWrapX(),v=C?ye(d):null,b=C?Math.ceil((s[2]-d[2])/v)+1:1;let w=C?Math.floor((s[0]-d[0])/v):0;do{const T=this.getRenderTransform(o,a,c,p,y,x,w*v);e.execute(_,[_.canvas.width,_.canvas.height],T,c,m,void 0===i?ir:i?kf:iS,i?f&&t.declutter[f]:void 0)}while(++w<b)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=Xe(this.context.canvas.width,this.context.canvas.height,If))}resetDrawContext_(){if(1!==this.opacity_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,mo(this.context),If.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.resetDrawContext_())}renderFrame(e,t){const i=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];this.opacity_=s.opacity;const r=e.extent,o=e.viewState.resolution,a=Math.round(ye(r)/o*i),l=Math.round(Ue(r)/o*i);zt(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/i,1/i,0,-a/2,-l/2),co(this.inversePixelTransform,this.pixelTransform);const c=nl(this.pixelTransform);this.useContainer(t,c,this.getBackground(e));const d=this.context,u=d.canvas,f=this.replayGroup_;let p=f&&!f.isEmpty();if(!p&&!this.getLayer().hasListener("prerender")&&!this.getLayer().hasListener("postrender"))return null;u.width!=a||u.height!=l?(u.width=a,u.height=l,u.style.transform!==c&&(u.style.transform=c)):this.containerReused||d.clearRect(0,0,a,l),this.setDrawContext_(),this.preRender(d,e);const g=e.viewState;let _=!1;if(p&&s.extent&&this.clipping){const y=cn(s.extent,g.projection);p=dt(y,e.extent),_=p&&!Dn(y,e.extent),_&&this.clipUnrotated(d,e,y)}return p&&this.renderWorlds(f,e,!this.getLayer().getDeclutter()&&void 0),_&&d.restore(),this.postRender(d,e),this.renderedRotation_!==g.rotation&&(this.renderedRotation_=g.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Ge(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),d=[],u=i[0]*Jt,f=i[1]*Jt;d.push(this.getRenderTransform(s,r,o,Jt,u,f,0).slice());const p=c.getSource(),g=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!Dn(g,l)){let _=l[0];const y=ye(g);let C,x=0;for(;_<g[0];)--x,C=y*x,d.push(this.getRenderTransform(s,r,o,Jt,u,f,C).slice()),_+=y;for(x=0,_=l[2];_>g[2];)++x,C=y*x,d.push(this.getRenderTransform(s,r,o,Jt,u,f,C).slice()),_-=y}const m=no();this.hitDetectionImageData_=function lS(n,e,t,i,s,r,o,a,l){const c=l?so(s,l):s,f=Xe(n[0]*Jt,n[1]*Jt);f.imageSmoothingEnabled=!1;const p=f.canvas,g=new aS(f,Jt,s,null,o,a,l?zn(no(),l):null),m=t.length,_=Math.floor(16777215/m),y={};for(let C=1;C<=m;++C){const v=t[C-1],b=v.getStyleFunction()||i;if(!b)continue;let w=b(v,r);if(!w)continue;Array.isArray(w)||(w=[w]);const S=(C*_).toString(16).padStart(7,"#00000");for(let E=0,P=w.length;E<P;++E){const A=w[E],F=A.getGeometryFunction()(v);if(!F||!dt(c,F.getExtent()))continue;const W=A.clone(),re=W.getFill();re&&re.setColor(S);const R=W.getStroke();R&&(R.setColor(S),R.setLineDash(null)),W.setText(void 0);const z=A.getImage();if(z){const q=z.getImageSize();if(!q)continue;const ce=Xe(q[0],q[1],void 0,{alpha:!1}),ie=ce.canvas;ce.fillStyle=S,ce.fillRect(0,0,ie.width,ie.height),W.setImage(new tf({img:ie,anchor:z.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:z.getOrigin(),opacity:1,size:z.getSize(),scale:z.getScale(),rotation:z.getRotation(),rotateWithView:z.getRotateWithView()}))}const L=W.getZIndex()||0;let j=y[L];j||(j={},y[L]=j,j.Polygon=[],j.Circle=[],j.LineString=[],j.Point=[]);const ge=F.getType();if("GeometryCollection"===ge){const q=F.getGeometriesArrayRecursive();for(let ce=0,ie=q.length;ce<ie;++ce){const Se=q[ce];j[Se.getType().replace("Multi","")].push(Se,W)}}else j[ge.replace("Multi","")].push(F,W)}}const x=Object.keys(y).map(Number).sort(pi);for(let C=0,v=x.length;C<v;++C){const b=y[x[C]];for(const w in b){const T=b[w];for(let S=0,E=T.length;S<E;S+=2){g.setStyle(T[S+1]);for(let P=0,A=e.length;P<A;++P)g.setTransform(e[P]),g.drawGeometry(T[S])}}}return f.getImageData(0,0,p.width,p.height)}(i,d,this.renderedFeatures_,c.getStyleFunction(),l,r,o,Df(r,this.renderedPixelRatio_),m?a:null)}t(function cS(n,e,t){const i=[];if(t){const s=Math.floor(Math.round(n[0])*Jt),r=Math.floor(Math.round(n[1])*Jt),o=4*(Ve(s,0,t.width-1)+Ve(r,0,t.height-1)*t.width),d=t.data[o+2]+256*(t.data[o+1]+256*t.data[o]),u=Math.floor(16777215/e.length);d&&d%u==0&&i.push(e[d/u-1])}return i}(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,s,r){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},d=function(g,m,_){const y=xe(g),x=c[y];if(x){if(!0!==x&&_<x.distanceSq){if(0===_)return c[y]=!0,r.splice(r.lastIndexOf(x),1),s(g,l,m);x.geometry=m,x.distanceSq=_}}else{if(0===_)return c[y]=!0,s(g,l,m);r.push(c[y]={feature:g,layer:l,geometry:m,distanceSq:_,callback:s})}};let u;const f=[this.replayGroup_],p=this.getLayer().getDeclutter();return f.some(g=>u=g.forEachFeatureAtCoordinate(e,o,a,i,d,p&&t.declutter[p]?t.declutter[p].all().map(m=>m.value):null)),u}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const s=e.viewHints[0],r=e.viewHints[1],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,d=c.projection,u=c.resolution,f=e.pixelRatio,p=t.getRevision(),g=t.getRenderBuffer();let m=t.getRenderOrder();void 0===m&&(m=dS);const _=c.center.slice(),y=Pa(l,g*u),x=y.slice(),C=[y.slice()],v=d.getExtent();if(i.getWrapX()&&d.canWrapX()&&!Dn(v,e.extent)){const R=ye(v),z=Math.max(ye(y)/2,R);y[0]=v[0]-z,y[2]=v[2]+z,Zd(_,d);const L=jd(C[0],d);L[0]<v[0]&&L[2]<v[2]?C.push([L[0]+R,L[1],L[2]+R,L[3]]):L[0]>v[0]&&L[2]>v[2]&&C.push([L[0]-R,L[1],L[2]-R,L[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==p&&this.renderedRenderOrder_==m&&Dn(this.wrappedRenderedExtent_,y))return Li(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new jT(Of(u,f),y,u,f),w=no();let T;if(w){for(let R=0,z=C.length;R<z;++R){const j=so(C[R],d);i.loadFeatures(j,I2(u,d),w)}T=zn(w,d)}else for(let R=0,z=C.length;R<z;++R)i.loadFeatures(C[R],u,d);const S=Df(u,f);let E=!0;const P=(R,z)=>{let L;const j=R.getStyleFunction()||t.getStyleFunction();if(j&&(L=j(R,u)),L){const ge=this.renderFeature(R,S,L,b,T,this.getLayer().getDeclutter(),z);E=E&&!ge}},A=so(y,d),F=i.getFeaturesInExtent(A);m&&F.sort(m);for(let R=0,z=F.length;R<z;++R)P(F[R],R);this.renderedFeatures_=F,this.ready=E;const W=b.finish(),re=new rS(y,u,f,i.getOverlaps(),W,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=u,this.renderedRevision_=p,this.renderedRenderOrder_=m,this.renderedExtent_=x,this.wrappedRenderedExtent_=y,this.renderedCenter_=_,this.renderedProjection_=d,this.renderedPixelRatio_=f,this.replayGroup_=re,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,s,r,o,a){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let c=0,d=i.length;c<d;++c)l=Lf(s,e,i[c],t,this.boundHandleStyleImageChange_,r,o,a)||l;else l=Lf(s,e,i,t,this.boundHandleStyleImageChange_,r,o,a);return l}},IS=class wS extends yf{constructor(e){super(e)}createRenderer(){return new CS(this)}};class Mo extends fi{constructor(e,t,i){super(e),this.element=t,this.index=i}}const Qt=class TS extends Ut{constructor(e,t){if(super(),this.unique_=!!(t=t||{}).unique,this.array_=e||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get("length")}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Mo("add",t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Mo("remove",t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Mo("remove",s,e)),this.dispatchEvent(new Mo("add",t,e))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(e,t){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}},Af=class SS{constructor(e){this.rbush_=new Du(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[xe(t)]=i}load(e,t){const i=new Array(t.length);for(let s=0,r=t.length;s<r;s++){const o=e[s],a=t[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[xe(a)]=l}this.rbush_.load(i)}remove(e){const t=xe(e),i=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(i)}update(e,t){const i=this.items_[xe(t)];Ds([i.minX,i.minY,i.maxX,i.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){return this.rbush_.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let s=0,r=e.length;s<r;s++)if(i=t(e[s]),i)return i;return i}isEmpty(){return Nn(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return di(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}};function zf(n,e,t,i,s,r,o){let a,l;const c=(t-e)/i;if(1===c)a=e;else if(2===c)a=e,l=s;else if(0!==c){let d=n[e],u=n[e+1],f=0;const p=[0];for(let _=e+i;_<t;_+=i){const y=n[_],x=n[_+1];f+=Math.sqrt((y-d)*(y-d)+(x-u)*(x-u)),p.push(f),d=y,u=x}const g=s*f,m=function M2(n,e,t){let i,s;t=t||pi;let r=0,o=n.length,a=!1;for(;r<o;)i=r+(o-r>>1),s=+t(n[i],e),s<0?r=i+1:(o=i,a=!s);return a?r:~r}(p,g);m<0?(l=(g-p[-m-2])/(p[-m-1]-p[-m-2]),a=e+(-m-2)*i):a=e+m*i}o=o>1?o:2,r=r||new Array(o);for(let d=0;d<o;++d)r[d]=void 0===a?NaN:void 0===l?n[a+d]:Tt(n[a+d],n[a+i+d],l);return r}const Vf=[1,0,0,1,0,0];class qn{constructor(e,t,i,s,r,o){this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=r,this.stride_=s}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?Bd(this.flatCoordinates_):Aa(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=an(this.getExtent());this.flatInteriorPoints_=ll(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=function lI(n,e){const t=[];let r,i=0,s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=hl(n,i,l,2);if(void 0===r&&(r=c),c===r)t.push(e.slice(s,o+1));else{if(0===t.length)continue;t[t.length-1].push(e[s])}s=o+1,i=l}return t}(this.flatCoordinates_,this.ends_),t=function ES(n,e,t,i){const s=[];let r=[1/0,1/0,-1/0,-1/0];for(let o=0,a=t.length;o<a;++o){const l=t[o];r=Aa(n,e,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return s}(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=function rI(n,e,t,i,s){let r=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];r=ll(n,e,l,i,s,2*o,r),e=l[l.length-1]}return r}(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=zf(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let s=0,r=i.length;s<r;++s){const o=i[s],a=zf(e,t,o,2,.5);Za(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const t=(e=Ze(e)).getExtent(),i=e.getWorldExtent();if(t&&i){const s=Ue(i)/Ue(t);zt(Vf,i[0],i[3],s,-s,0,0,0),Pi(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Vf,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new qn(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=iu((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":i.length=ho(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),s=[i.length];break;case"MultiLineString":s=[],i.length=function bu(n,e,t,i,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const d=t[l];o=ho(n,e,d,i,s,r,o),a.push(o),e=d}return o}(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,s);break;case"Polygon":s=[],i.length=rl(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,s)}return s&&(this.simplifiedGeometry_=new qn(this.type_,i,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}qn.prototype.getFlatCoordinates=qn.prototype.getOrientedFlatCoordinates;const mn=qn;function Nf(n){return n?Array.isArray(n)?function(e){return n}:"function"==typeof n?n:function(e){return[n]}:null}const Bf=class kS extends Ut{constructor(e){super(),this.projection=Ze(e.projection),this.attributions_=Nf(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,s){t.viewResolver=i,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Nf(e),this.changed()}setState(e){this.state_=e,this.changed()}};function RS(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Wf(n,e){return function(t,i,s,r,o){const a=this;!function DS(n,e,t,i,s,r,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(t,i,s):n,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let d;"json"==c?d=JSON.parse(a.responseText):"text"==c?d=a.responseText:"xml"==c?(d=a.responseXML,d||(d=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==c&&(d=a.response),d?r(e.readFeatures(d,{extent:t,featureProjection:s}),e.readProjection(d)):o()}else o()},a.onerror=o,a.send()}(n,e,t,i,s,function(l,c){a.addFeatures(l),void 0!==r&&r(l)},o||Vn)}}class Ki extends fi{constructor(e,t,i){super(e),this.feature=t,this.features=i}}const LS=class OS extends Bf{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=Vn,this.format_=e.format,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(he(this.format_,"`format` must be set when `url` is set"),this.loader_=Wf(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:RS;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,s;this.featuresRtree_=t?new Af:null,this.loadedExtentsRtree_=new Af,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?s=e.features:e.features&&(i=e.features,s=i.getArray()),!t&&void 0===i&&(i=new Qt(s)),void 0!==s&&this.addFeaturesInternal(s),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=xe(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Ki("addfeature",e))}setupChangeEvents_(e,t){t instanceof mn||(this.featureChangeKeys_[e]=[fe(t,"change",this.handleFeatureChange_,this),fe(t,"propertychange",this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(void 0!==t.getId()){const s=String(t.getId());if(s in this.idIndex_)if(t instanceof mn){const r=this.idIndex_[s];r instanceof mn?Array.isArray(r)?r.push(t):this.idIndex_[s]=[r,t]:i=!1}else i=!1;else this.idIndex_[s]=t}return i&&(he(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],l=xe(a);this.addToIndex_(l,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],l=xe(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const d=c.getExtent();t.push(d),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener("addfeature"))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new Ki("addfeature",i[r]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener("addfeature",function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener("removefeature",function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener("add",i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener("remove",i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Oe);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(s=>{this.removeFeatureInternal(s)});for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Ki("clear");this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(s){const r=s.getGeometry();if(r instanceof mn||r.intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const s=i.getGeometry();if(s instanceof mn||s.intersectsExtent(e)){const r=t(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Nn(this.nullGeometryFeatures_)||Za(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=function l2(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];jd(n,e);const i=ye(t);if(ye(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}(e,t);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||As,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const d=c.getGeometry(),u=a;if(a=d instanceof mn?0:d.closestPointXY(i,s,o,a),a<u){r=c;const f=Math.sqrt(a);l[0]=i-f,l[1]=s-f,l[2]=i+f,l[3]=s+f}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=xe(t),s=t.getGeometry();if(s){const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);const r=t.getId();if(void 0!==r){const o=r.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Ki("changefeature",t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:xe(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Nn(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,i){const s=this.loadedExtentsRtree_,r=this.strategy_(e,t,i);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(d){return Dn(d.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ki("featuresloadstart")),this.loader_.call(this,l,t,i,d=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ki("featuresloadend",void 0,d))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ki("featuresloaderror"))}),s.insert(l,{extent:l.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(s){if(Ds(s.extent,e))return i=s,!0}),i&&t.remove(i)}removeFeatures(e){const t=[];for(let i=0,s=e.length;i<s;++i){const o=this.removeFeatureInternal(e[i]);o&&t.push(o)}t.length>0&&this.changed()}removeFeature(e){e&&this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=xe(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[t];if(!i)return;i.forEach(Oe),delete this.featureChangeKeys_[t];const s=e.getId();return void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[t],this.hasListener("removefeature")&&this.dispatchEvent(new Ki("removefeature",e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_){const s=this.idIndex_[i];if(e instanceof mn&&Array.isArray(s)&&s.includes(e))s.splice(s.indexOf(e),1);else if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){he(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Wf(e,this.format_))}};class PS{constructor(e){this._domainModel=e,this._vectorPoint=new IS({source:new LS({features:[new z2({geometry:new Su(this._domainModel.location)})]}),style:new Us({image:new Dl({radius:5,fill:new Yn({color:"rgba(255, 0, 0, 0.1)"}),stroke:new Pl({color:"red",width:1})}),text:new nf({font:"13px Calibri,sans-serif",textAlign:"center",textBaseline:"middle",justify:"center",text:`${this._domainModel.price} \u20bd`,fill:new Yn({color:"#000"}),backgroundFill:new Yn({color:[168,50,153,.6]}),padding:[2,2,2,2]})})})}getVectorPoint(){return this._vectorPoint}}function AS(n,e){Xt.expire()}const zS=class FS extends Ya{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){pe()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;zt(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),co(s,i)}forEachFeatureAtCoordinate(e,t,i,s,r,o,a,l){let c;const d=t.viewState;function u(v,b,w,T){return r.call(o,b,v?w:null,T)}const f=d.projection,p=Zd(e.slice(),f),g=[[0,0]];if(f.canWrapX()&&s){const b=ye(f.getExtent());g.push([-b,0],[b,0])}const m=t.layerStatesArray,_=m.length,y=[],x=[];for(let v=0;v<g.length;v++)for(let b=_-1;b>=0;--b){const w=m[b],T=w.layer;if(T.hasRenderer()&&pl(w,d)&&a.call(l,T)){const S=T.getRenderer(),E=T.getSource();if(S&&E){const P=E.getWrapX()?p:e,A=u.bind(null,w.managed);x[0]=P[0]+g[v][0],x[1]=P[1]+g[v][1],c=S.forEachFeatureAtCoordinate(x,t,i,A,y)}if(c)return c}}if(0===y.length)return;const C=1/y.length;return y.forEach((v,b)=>v.distanceSq+=b*C),y.sort((v,b)=>v.distanceSq-b.distanceSq),y.some(v=>c=v.callback(v.feature,v.layer,v.geometry)),c}hasFeatureAtCoordinate(e,t,i,s,r,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,i,s,As,this,r,o)}getMap(){return this.map_}renderFrame(e){pe()}scheduleExpireIconCache(e){Xt.canExpireCache()&&e.postRenderFunctions.push(AS)}},VS=class HS extends zS{constructor(e){super(e),this.fontChangeListenerKey_=fe(_i,"propertychange",e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=yo+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const s=new Cf(e,void 0,t);i.dispatchEvent(s)}}disposeInternal(){Oe(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);const t=e.layerStatesArray.sort(function(a,l){return a.zIndex-l.zIndex});t.some(a=>a.layer instanceof yf&&a.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const r=[];let o=null;for(let a=0,l=t.length;a<l;++a){const c=t[a];e.layerIndex=a;const d=c.layer,u=d.getSourceState();if(!pl(c,s)||"ready"!=u&&"undefined"!=u){d.unrender();continue}const f=d.render(e,o);f&&(f!==o&&(this.children_.push(f),o=f),r.push(c))}this.declutter(e,r),function RI(n,e){const t=n.childNodes;for(let i=0;;++i){const s=t[i],r=e[i];if(!s&&!r)break;if(s!==r){if(!s){n.appendChild(r);continue}if(!r){n.removeChild(s),--i;continue}n.insertBefore(r,s)}}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){for(let i=t.length-1;i>=0;--i){const s=t[i],r=s.layer;r.getDeclutter()&&r.renderDeclutter(e,s)}t.forEach(i=>i.layer.renderDeferred(e))}};class Wi extends fi{constructor(e,t){super(e),this.layer=t}}class Gl extends ru{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),i?Array.isArray(i)?i=new Qt(i.slice(),{unique:!0}):he("function"==typeof i.getArray,"Expected `layers` to be an array or a `Collection`"):i=new Qt(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Oe),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(fe(e,"add",this.handleLayersAdd_,this),fe(e,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Oe);zs(this.listenerKeys_);const t=e.getArray();for(let i=0,s=t.length;i<s;i++){const r=t[i];this.registerLayerListeners_(r),this.dispatchEvent(new Wi("addlayer",r))}this.changed()}registerLayerListeners_(e){const t=[fe(e,"propertychange",this.handleLayerChange_,this),fe(e,"change",this.handleLayerChange_,this)];e instanceof Gl&&t.push(fe(e,"addlayer",this.handleLayerGroupAdd_,this),fe(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[xe(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Wi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Wi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Wi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=xe(t);this.listenerKeys_[i].forEach(Oe),delete this.listenerKeys_[i],this.dispatchEvent(new Wi("removelayer",t)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new Wi("removelayer",i[s]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=void 0!==e?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const s=this.getLayerState();let r=s.zIndex;!e&&void 0===s.zIndex&&(r=0);for(let o=i,a=t.length;o<a;o++){const l=t[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),void 0!==s.extent&&(l.extent=void 0!==l.extent?Ln(l.extent,s.extent):s.extent),void 0===l.zIndex&&(l.zIndex=r)}return t}getSourceState(){return"ready"}}const ko=Gl,Jn=class NS extends fi{constructor(e,t,i){super(e),this.map=t,this.frameState=void 0!==i?i:null}},Gi=class BS extends Jn{constructor(e,t,i,s,r,o){super(e,t,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==s&&s,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Fe={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},WS=class KS extends oo{constructor(e,t){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=fe(i,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=fe(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!Wu&&{passive:!1})}emulateClick_(e){let t=new Gi(Fe.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Gi(Fe.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Gi(Fe.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Fe.POINTERUP||t.type==Fe.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Fe.POINTERDOWN||t.type==Fe.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Gi(Fe.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Oe),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new Gi(Fe.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(fe(i,Fe.POINTERMOVE,this.handlePointerMove_,this),fe(i,Fe.POINTERUP,this.handlePointerUp_,this),fe(this.element_,Fe.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(fe(this.element_.getRootNode(),Fe.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Gi(Fe.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Gi(Fe.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Oe(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Oe(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Oe),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Ro=1/0,jS=class GS{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,zs(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(e){he(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Ro&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,s=t.length,r=t[e],o=i[e],a=e;for(;e<s>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),d=c<s&&i[c]<i[l]?c:l;t[e]=t[d],i[e]=i[d],e=d}t[e]=r,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,s=this.priorities_,r=i[t],o=s[t];for(;t>e;){const a=this.getParentIndex_(t);if(!(s[a]>o))break;i[t]=i[a],s[t]=s[a],t=a}i[t]=r,s[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let s=0;const r=t.length;let o,a,l;for(a=0;a<r;++a)o=t[a],l=e(o),l==Ro?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=l,t[s++]=o);t.length=s,i.length=s,this.heapify_()}},US=class YS extends jS{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener("change",this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(2===i||3===i||4===i){3!==i&&t.removeEventListener("change",this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let s,r,o,i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),0===s&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}};var XS=Q(5861);const Yl=class $S extends Ut{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){wl(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&wl(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)Oe(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Vn&&this.listenerKeys.push(fe(e,"postrender",this.render,this)),e.render())}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},JS=class qS extends Yl{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const t=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",s=void 0!==e.expandClassName?e.expandClassName:t+"-expand",r=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",o=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=void 0!==e.label?e.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const d=this.element;d.className=t+" "+yo+" "+Sl+(this.collapsed_&&this.collapsible_?" "+Yu:"")+(this.collapsible_?"":" ol-uncollapsible"),d.appendChild(this.toggleButton_),d.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(e)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&!1===s.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){var t=this;return(0,XS.Z)(function*(){if(!e)return void(t.renderedVisible_&&(t.element.style.display="none",t.renderedVisible_=!1));const i=yield Promise.all(t.collectSourceAttributions_(e).map(r=>function D2(n){return function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}()}(()=>r))),s=i.length>0;if(t.renderedVisible_!=s&&(t.element.style.display=s?"":"none",t.renderedVisible_=s),!Li(i,t.renderedAttributions_)){!function kI(n){for(;n.lastChild;)n.removeChild(n.lastChild)}(t.ulElement_);for(let r=0,o=i.length;r<o;++r){const a=document.createElement("li");a.innerHTML=i[r],t.ulElement_.appendChild(a)}t.renderedAttributions_=i}})()}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Yu),this.collapsed_?Gu(this.collapseLabel_,this.label_):Gu(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},eE=class QS extends Yl{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"\u21e7",s=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener("click",this.handleClick_.bind(this),!1);const l=this.element;l.className=t+" "+yo+" "+Sl,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(_o)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Bn}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(_o);r||0!==i?r&&0!==i&&this.element.classList.remove(_o):this.element.classList.add(_o)}this.label_.style.transform=s}this.rotation_=i}},iE=class tE extends Yl{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,s=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",r=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",a=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",l=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",c=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=l,d.appendChild("string"==typeof o?document.createTextNode(o):o),d.addEventListener("click",this.handleClick_.bind(this,i),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild("string"==typeof a?document.createTextNode(a):a),u.addEventListener("click",this.handleClick_.bind(this,-i),!1);const p=this.element;p.className=t+" "+yo+" "+Sl,p.appendChild(d),p.appendChild(u),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(void 0!==s){const r=i.getConstrainedZoom(s+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Bn})):i.setZoom(r)}}};function Ul(n,e,t,i){const s=n.getZoom();if(void 0===s)return;const r=n.getConstrainedZoom(s+e),o=n.getResolutionForZoom(r);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:void 0!==i?i:250,easing:Bn})}const nr=class sE extends Ut{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}},aE=class oE extends nr{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==Fe.DBLCLICK){const i=e.originalEvent,r=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_;Ul(e.map.getView(),o,r,this.duration_),i.preventDefault(),t=!0}return!t}};function Zl(n){const e=n.length;let t=0,i=0;for(let s=0;s<e;s++)t+=n[s].clientX,i+=n[s].clientY;return{clientX:t/e,clientY:i/e}}const sr=class lE extends nr{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Fe.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Fe.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Fe.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Fe.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function Xl(n){const e=arguments;return function(t){let i=!0;for(let s=0,r=e.length;s<r&&(i=i&&e[s](t),i);++s);return i}}const cE=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},jf=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)}(n)},dE=As,Yf=function(n){const e=n.originalEvent;return 0==e.button&&!(MI&&Vu&&e.ctrlKey)},Uf=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},fE=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zf=function(n){const e=n.originalEvent,t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!e.target.isContentEditable},$l=function(n){const e=n.originalEvent;return he(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},pE=function(n){const e=n.originalEvent;return he(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button},mE=class gE extends sr{constructor(e){super({stopDown:ro}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const t=e.condition?e.condition:Xl(Uf,pE);this.condition_=e.onFocusOnly?Xl(jf,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,s=t.getEventPixel(Zl(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();(function u2(n,e){n[0]*=e,n[1]*=e})(r,a.getResolution()),Va(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Bn})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},yE=class _E extends sr{constructor(e){e=e||{},super({stopDown:ro}),this.condition_=e.condition?e.condition:cE,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!$l(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===Qa)return;const s=t.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}handleUpEvent(e){return!$l(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!($l(e)&&Yf(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},vE=class xE extends Ya{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+i,s.top=Math.min(e[1],t[1])+i,s.width=Math.abs(t[0]-e[0])+i,s.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new cI([s])}getGeometry(){return this.geometry_}};class ql extends fi{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}const CE=class bE extends sr{constructor(e){super(),this.box_=new vE((e=e||{}).className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Yf,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const s=i[0]-t[0],r=i[1]-t[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ql("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new ql(t?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ql("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},IE=class wE extends CE{constructor(e){super({condition:(e=e||{}).condition?e.condition:fE,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:Bn})}},SE=class TE extends nr{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Uf(t)&&Zf(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if("keydown"==e.type){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&("ArrowDown"==s||"ArrowLeft"==s||"ArrowRight"==s||"ArrowUp"==s)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;"ArrowDown"==s?c=-a:"ArrowLeft"==s?l=-a:"ArrowRight"==s?l=a:c=a;const d=[l,c];Va(d,o.getRotation()),function rE(n,e,t){const i=n.getCenterInternal();i&&n.animateInternal({duration:void 0!==t?t:250,easing:j2,center:n.getConstrainedCenter([i[0]+e[0],i[1]+e[1]])})}(o,d,this.duration_),i.preventDefault(),t=!0}}return!t}},ME=class EE extends nr{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:function(t){return!function(n){const e=n.originalEvent;return Vu?e.metaKey:e.ctrlKey}(t)&&Zf(t)},this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if("keydown"==e.type||"keypress"==e.type){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&("+"===s||"-"===s)){const o="+"===s?this.delta_:-this.delta_;Ul(e.map.getView(),o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}},RE=class kE{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const s=this.points_[t+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},OE=class DE extends nr{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:dE;this.condition_=e.onFocusOnly?Xl(jf,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||"wheel"!==e.type)return!0;const i=e.map,s=e.originalEvent;let r;if(s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(r=s.deltaY,EI&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=Nu),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),0===r)return!1;this.lastDelta_=r;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Ve(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Ul(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},PE=class LE extends sr{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=ro),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(void 0!==this.lastAngle_){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=r;const o=e.map,a=o.getView();a.getConstraints().rotation!==Qa&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Zl(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},AE=class FE extends sr{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=ro),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();1!=t&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Zl(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function Xf(n){n instanceof go?n.setMapInternal(null):n instanceof ko&&n.getLayers().forEach(Xf)}function $f(n,e){if(n instanceof go)n.setMapInternal(e);else if(n instanceof ko){const t=n.getLayers().getArray();for(let i=0,s=t.length;i<s;++i)$f(t[i],e)}}const NE=class HE extends Ut{constructor(e){super();const t=function VE(n){let e=null;void 0!==n.keyboardEventTarget&&(e="string"==typeof n.keyboardEventTarget?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&"function"==typeof n.layers.getLayers?n.layers:new ko({layers:n.layers});let s,r,o;return t.layergroup=i,t.target=n.target,t.view=n.view instanceof Zt?n.view:new Zt,void 0!==n.controls&&(Array.isArray(n.controls)?s=new Qt(n.controls.slice()):(he("function"==typeof n.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),s=n.controls)),void 0!==n.interactions&&(Array.isArray(n.interactions)?r=new Qt(n.interactions.slice()):(he("function"==typeof n.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),r=n.interactions)),void 0!==n.overlays?Array.isArray(n.overlays)?o=new Qt(n.overlays.slice()):(he("function"==typeof n.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new Qt,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:t}}(e=e||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Nu,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||function nE(n){n=n||{};const e=new Qt;return(void 0===n.zoom||n.zoom)&&e.push(new iE(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&e.push(new eE(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&e.push(new JS(n.attributionOptions)),e}(),this.interactions=t.interactions||function zE(n){n=n||{};const e=new Qt,t=new RE(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&e.push(new yE),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&e.push(new aE({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&e.push(new mE({onFocusOnly:n.onFocusOnly,kinetic:t})),(void 0===n.pinchRotate||n.pinchRotate)&&e.push(new PE),(void 0===n.pinchZoom||n.pinchZoom)&&e.push(new AE({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(e.push(new SE),e.push(new ME({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&e.push(new OE({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&e.push(new IE({duration:n.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new US(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Zt)&&e.view.then(function(s){i.setView(new Zt(s))}),this.controls.addEventListener("add",s=>{s.element.setMap(this)}),this.controls.addEventListener("remove",s=>{s.element.setMap(null)}),this.interactions.addEventListener("add",s=>{s.element.setMap(this)}),this.interactions.addEventListener("remove",s=>{s.element.setMap(null)}),this.overlays_.addEventListener("add",s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener("remove",s=>{const r=s.element.getId();void 0!==r&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){$f(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,t,null,void 0!==i.layerFilter?i.layerFilter:As,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(s){i.push(s)},t),i}getAllLayers(){const e=[];return function t(i){i.forEach(function(s){s instanceof ko?t(s.getLayers()):e.push(s)})}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(t=void 0!==t?t:{}).hitTolerance?t.hitTolerance:0,!1!==t.checkWrapped,void 0!==t.layerFilter?t.layerFilter:As,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/(i.width/s[0]),(a.clientY-i.top)/(i.height/s[1])]}getTarget(){return this.get("target")}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return ja(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ge(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const t=this.getLayerGroup();if(e instanceof Qt)return void t.setLayers(e);const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=ui(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ge(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,s){return function ZS(n,e,t,i,s){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Ro;const r=n.viewState.center,o=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}(this.frameState_,e,t,i,s)}handleBrowserEvent(e,t){const i=new Gi(t=t||e.type,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()===this&&o.getActive()&&this.getTargetElement()&&(!o.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[0]||o[1]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Jn("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Jn("loadstart",this,e))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)Oe(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,wl(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t="string"==typeof e?document.getElementById(e):e;if(this.targetElement_=t,t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new VS(this)),this.mapBrowserEventHandler_=new WS(this,this.moveTolerance_);for(const r in Fe)this.mapBrowserEventHandler_.addEventListener(Fe[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!Wu&&{passive:!1});const i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[fe(i,"keydown",this.handleBrowserEvent,this),fe(i,"keypress",this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Oe(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Oe(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=fe(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=fe(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Oe),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Wi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[fe(e,"propertychange",this.render,this),fe(e,"change",this.render,this),fe(e,"addlayer",this.handleLayerAdd_,this),fe(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Xf(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(void 0!==t&&Ou(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:za(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:xe(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=za(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Os(this.previousExtent_)&&!Ds(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Jn("movestart",this,s)),this.previousExtent_=on(this.previousExtent_)),this.previousExtent_&&!r.viewHints[0]&&!r.viewHints[1]&&!Ds(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Jn("moveend",this,r)),Hd(r.extent,this.previousExtent_))),this.dispatchEvent(new Jn("postrender",this,r)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Wi("removelayer",t)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof Zt)return void this.set("view",e);this.set("view",new Zt);const t=this;e.then(function(i){t.setView(new Zt(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(t=[r,o],!Ou(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Xd("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Li(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}},KE=class BE extends go{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(e){this.set("preload",e)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(e){this.set("useInterimTilesOnError",e)}getData(e){return super.getData(e)}},qf=class WE extends oo{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?t=e:0==e.getState()?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){pe()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else i=t,this.transitionStarts_[e]=i;const s=t-i+1e3/60;return s>=this.transition_?1:cu(s/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}},Jf=class GE extends qf{constructor(e,t,i,s,r,o){super(e,t,o),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function jE(){const n=Xe(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function DI(n,e,t){const i=n;let s=!0,r=!1,o=!1;const a=[ao(i,"load",function(){o=!0,r||e()})];return i.src&&Ku?(r=!0,i.decode().then(function(){s&&e()}).catch(function(l){s&&(o?e():t())})):a.push(ao(i,"error",t)),function(){s=!1,a.forEach(Oe)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},XE=class ZE{constructor(e,t,i,s,r,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Ps(this.targetProj_,this.sourceProj_);this.transformInv_=function(x){const C=x[0]+"/"+x[1];return a[C]||(a[C]=l(x)),a[C]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&ye(s)>=ye(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ye(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ye(this.targetProj_.getExtent()):null;const c=ln(i),d=Zr(i),u=Ur(i),f=Yr(i),p=this.transformInv_(c),g=this.transformInv_(d),m=this.transformInv_(u),_=this.transformInv_(f),y=10+(o?Math.max(0,Math.ceil(Math.log2(jr(i)/(o*o*256*256)))):0);if(this.addQuad_(c,d,u,f,p,g,m,_,y),this.wrapsXInSource_){let x=1/0;this.triangles_.forEach(function(C,v,b){x=Math.min(x,C.source[0][0],C.source[1][0],C.source[2][0])}),this.triangles_.forEach(C=>{if(Math.max(C.source[0][0],C.source[1][0],C.source[2][0])-x>this.sourceWorldWidth_/2){const v=[[C.source[0][0],C.source[0][1]],[C.source[1][0],C.source[1][1]],[C.source[2][0],C.source[2][1]]];v[0][0]-x>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-x>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-x>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const b=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-b<this.sourceWorldWidth_/2&&(C.source=v)}})}a={}}addTriangle_(e,t,i,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,t,i]})}addQuad_(e,t,i,s,r,o,a,l,c){const d=zd([r,o,a,l]),u=this.sourceWorldWidth_?ye(d)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1;let g=!1;if(c>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(g=ye(zd([e,t,i,s]))/this.targetWorldWidth_>.25||g),!p&&this.sourceProj_.isGlobal()&&u&&(g=u>.25||g)),!g&&this.maxSourceExtent_&&isFinite(d[0])&&isFinite(d[1])&&isFinite(d[2])&&isFinite(d[3])&&!dt(d,this.maxSourceExtent_))return;let m=0;if(!(g||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])))if(c>0)g=!0;else if(m=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),1!=m&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!g){const y=this.transformInv_([(e[0]+i[0])/2,(e[1]+i[1])/2]);let x;x=p?(Fn(r[0],f)+Fn(a[0],f))/2-Fn(y[0],f):(r[0]+a[0])/2-y[0];const C=(r[1]+a[1])/2-y[1];g=x*x+C*C>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const _=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.transformInv_(_),x=[(s[0]+e[0])/2,(s[1]+e[1])/2],C=this.transformInv_(x);this.addQuad_(e,t,_,x,r,o,y,C,c-1),this.addQuad_(x,_,i,s,C,y,a,l,c-1)}else{const _=[(e[0]+t[0])/2,(e[1]+t[1])/2],y=this.transformInv_(_),x=[(i[0]+s[0])/2,(i[1]+s[1])/2],C=this.transformInv_(x);this.addQuad_(e,_,x,s,r,y,C,l,c-1),this.addQuad_(_,t,i,x,y,o,a,C,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&m||this.addTriangle_(e,i,s,r,a,l),14&m||this.addTriangle_(e,i,t,r,a,o),m&&(13&m||this.addTriangle_(t,s,e,o,l,r),7&m||this.addTriangle_(t,s,i,o,l,a))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,i,s){const r=t.source;On(e,r[0]),On(e,r[1]),On(e,r[2])}),e}getTriangles(){return this.triangles_}};let Jl;const Qn=[];function ep(n,e,t,i,s){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,s),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,s)),n.restore()}function Ql(n,e){return Math.abs(n[4*e]-210)>2||Math.abs(n[4*e+3]-191.25)>2}function tp(n,e,t,i){const s=Fs(t,e,n);let r=Jd(e,i,t);const o=e.getMetersPerUnit();void 0!==o&&(r*=o);const a=n.getMetersPerUnit();void 0!==a&&(r/=a);const l=n.getExtent();if(!l||Rn(l,s)){const c=Jd(n,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}const ec=class QE extends qf{constructor(e,t,i,s,r,o,a,l,c,d,u,f){super(r,0,f),this.renderEdges_=void 0!==u&&u,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const p=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?Ln(p,g):p;if(0===jr(_))return void(this.state=4);const y=e.getExtent();y&&(m=m?Ln(m,y):y);const x=s.getResolution(this.wrappedTileCoord_[0]),C=function qE(n,e,t,i){const s=an(t);let r=tp(n,e,s,i);return(!isFinite(r)||r<=0)&&Gd(t,function(o){return r=tp(n,e,o,i),isFinite(r)&&r>0}),r}(e,i,_,x);if(!isFinite(C)||C<=0)return void(this.state=4);if(this.triangulation_=new XE(e,i,_,m,C*(void 0!==d?d:.5),x),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(C);let b=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(b[1]=Ve(b[1],m[1],m[3]),b[3]=Ve(b[3],m[1],m[3])):b=Ln(b,m)),jr(b)){const w=t.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let T=w.minX;T<=w.maxX;T++)for(let S=w.minY;S<=w.maxY;S++){const E=c(this.sourceZ_,T,S,a);E&&this.sourceTiles_.push(E)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&2==t.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function JE(n,e,t,i,s,r,o,a,l,c,d,u,f,p){const g=Xe(Math.round(t*n),Math.round(t*e),Qn);if(u||(g.imageSmoothingEnabled=!1),0===l.length)return g.canvas;function m(b){return Math.round(b*t)/t}g.scale(t,t),g.globalCompositeOperation="lighter";const _=[1/0,1/0,-1/0,-1/0];let y;l.forEach(function(b,w,T){!function e2(n,e){e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3])}(_,b.extent)});const x=t/i,C=(u?1:1+Math.pow(2,-24))/x;if(!f||1!==l.length||0!==c){if(y=Xe(Math.round(ye(_)*x),Math.round(Ue(_)*x),Qn),u||(y.imageSmoothingEnabled=!1),s&&p){const b=(s[0]-_[0])*x,w=-(s[3]-_[3])*x,T=ye(s)*x,S=Ue(s)*x;y.rect(b,w,T,S),y.clip()}l.forEach(function(b,w,T){const S=(b.extent[0]-_[0])*x,E=-(b.extent[3]-_[3])*x,P=ye(b.extent)*x,A=Ue(b.extent)*x;b.image.width>0&&b.image.height>0&&y.drawImage(b.image,c,c,b.image.width-2*c,b.image.height-2*c,u?S:Math.round(S),u?E:Math.round(E),u?P:Math.round(S+P)-Math.round(S),u?A:Math.round(E+A)-Math.round(E))})}const v=ln(o);return a.getTriangles().forEach(function(b,w,T){const S=b.source,E=b.target;let P=S[0][0],A=S[0][1],F=S[1][0],W=S[1][1],re=S[2][0],R=S[2][1];const z=m((E[0][0]-v[0])/r),L=m(-(E[0][1]-v[1])/r),j=m((E[1][0]-v[0])/r),ge=m(-(E[1][1]-v[1])/r),q=m((E[2][0]-v[0])/r),ce=m(-(E[2][1]-v[1])/r),ie=P,Se=A;P=0,A=0,F-=ie,W-=Se,re-=ie,R-=Se;const Ee=function m2(n){const e=n.length;for(let i=0;i<e;i++){let s=i,r=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(n[a][i]);l>r&&(r=l,s=a)}if(0===r)return null;const o=n[s];n[s]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const l=-n[a][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[a][c]=0:n[a][c]+=l*n[i][c]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let s=i-1;s>=0;s--)n[s][e]-=n[s][i]*t[i]}return t}([[F,W,0,0,j-z],[re,R,0,0,q-z],[0,0,F,W,ge-L],[0,0,re,R,ce-L]]);if(!Ee)return;if(g.save(),g.beginPath(),function $E(){if(void 0===Jl){const n=Xe(6,6,Qn);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",ep(n,4,5,4,0),ep(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;Jl=Ql(e,0)||Ql(e,4)||Ql(e,8),mo(n),Qn.push(n.canvas)}return Jl}()||!u){g.moveTo(j,ge);const Be=4,gt=z-j,Nt=L-ge;for(let mt=0;mt<Be;mt++)g.lineTo(j+m((mt+1)*gt/Be),ge+m(mt*Nt/(Be-1))),mt!=Be-1&&g.lineTo(j+m((mt+1)*gt/Be),ge+m((mt+1)*Nt/(Be-1)));g.lineTo(q,ce)}else g.moveTo(j,ge),g.lineTo(z,L),g.lineTo(q,ce);let $e;if(g.clip(),g.transform(Ee[0],Ee[2],Ee[1],Ee[3],z,L),g.translate(_[0]-ie,_[3]-Se),y)$e=y.canvas,g.scale(C,-C);else{const Be=l[0],gt=Be.extent;$e=Be.image,g.scale(ye(gt)/$e.width,-Ue(gt)/$e.height)}g.drawImage($e,0,0),g.restore()}),y&&(mo(y),Qn.push(y.canvas)),d&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach(function(b,w,T){const S=b.target,E=(S[0][0]-v[0])/r,P=-(S[0][1]-v[1])/r,A=(S[1][0]-v[0])/r,F=-(S[1][1]-v[1])/r,W=(S[2][0]-v[0])/r,re=-(S[2][1]-v[1])/r;g.beginPath(),g.moveTo(A,F),g.lineTo(E,P),g.lineTo(W,re),g.closePath(),g.stroke()}),g.restore()),g.canvas}(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(0==i||1==i){e++;const s=fe(t,"change",function(r){const o=t.getState();(2==o||3==o||4==o)&&(Oe(s),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,s){0==t.getState()&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Oe),this.sourcesListenerKeys_=null}release(){this.canvas_&&(mo(this.canvas_.getContext("2d")),Qn.push(this.canvas_),this.canvas_=null),super.release()}};class ip{constructor(e,t,i,s){this.minX=e,this.maxX=t,this.minY=i,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function es(n,e,t,i,s){return void 0!==s?(s.minX=n,s.maxX=e,s.minY=t,s.maxY=i,s):new ip(n,e,t,i)}const np=ip,tM=class eM extends Tf{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new np(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),s=t.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!s}getTile(e,t,i,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,i,r,o);return 3==c.getState()&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),s=Ge(t.pixelToCoordinateTransform,e.slice()),r=i.getExtent();if(r&&!Rn(r,s))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=i.getRenderSource(),d=c.getTileGridForProjection(l.projection),u=c.getTilePixelRatio(t.pixelRatio);for(let f=d.getZForResolution(l.resolution);f>=d.getMinZoom();--f){const p=d.getTileCoordForCoordAndZ(s,f),g=c.getTile(f,p[1],p[2],o,a);if(!(g instanceof Jf||g instanceof ec)||g instanceof ec&&4===g.getState())return null;if(2!==g.getState())continue;const m=d.getOrigin(f),_=xt(d.getTileSize(f)),y=d.getResolution(f),x=Math.floor(u*((s[0]-m[0])/y-p[1]*_[0])),C=Math.floor(u*((m[1]-s[1])/y-p[2]*_[1])),v=Math.round(u*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),x+v,C+v)}return null}loadedTileCallback(e,t,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(e,t,i)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,c=e.pixelRatio,d=this.getLayer(),u=d.getSource(),f=u.getRevision(),p=u.getTileGridForProjection(r),g=p.getZForResolution(o,u.zDirection),m=p.getResolution(g);let _=e.extent;const y=e.viewState.resolution,x=u.getTilePixelRatio(c),C=Math.round(ye(_)/y*c),v=Math.round(Ue(_)/y*c),b=i.extent&&cn(i.extent,r);b&&(_=Ln(_,cn(i.extent,r)));const w=m*C/2/x,T=m*v/2/x,S=[a[0]-w,a[1]-T,a[0]+w,a[1]+T],E=p.getTileRangeForExtentAndZ(_,g),P={};P[g]={};const A=this.createLoadedTileFinder(u,r,P),F=this.tmpExtent,W=this.tmpTileRange_;this.newTiles_=!1;const re=l?Ha(s.center,y,l,e.size):void 0;for(let Se=E.minX;Se<=E.maxX;++Se)for(let D=E.minY;D<=E.maxY;++D){if(l&&!p.tileCoordIntersectsViewport([g,Se,D],re))continue;const Ee=this.getTile(g,Se,D,e);if(this.isDrawableTile(Ee)){const gt=xe(this);if(2==Ee.getState()){P[g][Ee.tileCoord.toString()]=Ee;let Nt=Ee.inTransition(gt);Nt&&1!==i.opacity&&(Ee.endTransition(gt),Nt=!1),!this.newTiles_&&(Nt||!this.renderedTiles.includes(Ee))&&(this.newTiles_=!0)}if(1===Ee.getAlpha(gt,e.time))continue}const $e=p.getTileCoordChildTileRange(Ee.tileCoord,W,F);let Be=!1;$e&&(Be=A(g+1,$e)),Be||p.forEachTileCoordParentTileRange(Ee.tileCoord,A,W,F)}const R=m/o*c/x;zt(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-C/2,-v/2);const z=nl(this.pixelTransform);this.useContainer(t,z,this.getBackground(e));const L=this.getRenderContext(e),j=this.context.canvas;co(this.inversePixelTransform,this.pixelTransform),zt(this.tempTransform,C/2,v/2,R,R,0,-C/2,-v/2),j.width!=C||j.height!=v?(j.width=C,j.height=v):this.containerReused||L.clearRect(0,0,C,v),b&&this.clipUnrotated(L,e,b),u.getInterpolate()||(L.imageSmoothingEnabled=!1),this.preRender(L,e),this.renderedTiles.length=0;let q,ce,ie,ge=Object.keys(P).map(Number);ge.sort(pi),1!==i.opacity||this.containerReused&&!u.getOpaque(e.viewState.projection)?(q=[],ce=[]):ge=ge.reverse();for(let Se=ge.length-1;Se>=0;--Se){const D=ge[Se],Ee=u.getTilePixelSize(D,c,r),Be=p.getResolution(D)/m,gt=Ee[0]*Be*R,Nt=Ee[1]*Be*R,mt=p.getTileCoordForCoordAndZ(ln(S),D),or=p.getTileCoordExtent(mt),yn=Ge(this.tempTransform,[x*(or[0]-S[0])/m,x*(S[3]-or[3])/m]),sc=x*u.getGutterForProjection(r),Lo=P[D];for(const Po in Lo){const kt=Lo[Po],is=kt.tileCoord,Fo=mt[1]-is[1],rc=Math.round(yn[0]-(Fo-1)*gt),Ao=mt[2]-is[2],zo=Math.round(yn[1]-(Ao-1)*Nt),bt=Math.round(yn[0]-Fo*gt),Bt=Math.round(yn[1]-Ao*Nt),ei=rc-bt,Kt=zo-Bt,ns=g===D,ss=ns&&1!==kt.getAlpha(xe(this),e.time);let Ui=!1;if(!ss)if(q){ie=[bt,Bt,bt+ei,Bt,bt+ei,Bt+Kt,bt,Bt+Kt];for(let wi=0,oc=q.length;wi<oc;++wi)if(g!==D&&D<ce[wi]){const lt=q[wi];dt([bt,Bt,bt+ei,Bt+Kt],[lt[0],lt[3],lt[4],lt[7]])&&(Ui||(L.save(),Ui=!0),L.beginPath(),L.moveTo(ie[0],ie[1]),L.lineTo(ie[2],ie[3]),L.lineTo(ie[4],ie[5]),L.lineTo(ie[6],ie[7]),L.moveTo(lt[6],lt[7]),L.lineTo(lt[4],lt[5]),L.lineTo(lt[2],lt[3]),L.lineTo(lt[0],lt[1]),L.clip())}q.push(ie),ce.push(D)}else L.clearRect(bt,Bt,ei,Kt);this.drawTileImage(kt,e,bt,Bt,ei,Kt,sc,ns),q&&!ss?(Ui&&L.restore(),this.renderedTiles.unshift(kt)):this.renderedTiles.push(kt),this.updateUsedTiles(e.usedTiles,u,kt)}}return this.renderedRevision=f,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Ds(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=c,this.renderedProjection=r,this.manageTilePyramid(e,u,p,c,r,_,g,d.getPreload()),this.scheduleExpireCache(e,u),this.postRender(this.context,e),i.extent&&L.restore(),L.imageSmoothingEnabled=!0,z!==j.style.transform&&(j.style.transform=z),this.container}drawTileImage(e,t,i,s,r,o,a,l){const c=this.getTileImage(e);if(!c)return;const d=this.getRenderContext(t),u=xe(this),f=t.layerStatesArray[t.layerIndex],p=f.opacity*(l?e.getAlpha(u,t.time):1),g=p!==d.globalAlpha;g&&(d.save(),d.globalAlpha=p),d.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,s,r,o),g&&d.restore(),p!==f.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(s,r,o){const a=xe(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const s=xe(t);s in e||(e[s]={}),e[s][i.getKey()]=!0}manageTilePyramid(e,t,i,s,r,o,a,l,c){const d=xe(t);d in e.wantedTiles||(e.wantedTiles[d]={});const u=e.wantedTiles[d],f=e.tileQueue,p=i.getMinZoom(),g=e.viewState.rotation,m=g?Ha(e.viewState.center,e.viewState.resolution,g,e.size):void 0;let y,x,C,v,b,w,_=0;for(w=p;w<=a;++w)for(x=i.getTileRangeForExtentAndZ(o,w,x),C=i.getResolution(w),v=x.minX;v<=x.maxX;++v)for(b=x.minY;b<=x.maxY;++b)g&&!i.tileCoordIntersectsViewport([w,v,b],m)||(a-w<=l?(++_,y=t.getTile(w,v,b,s,r),0==y.getState()&&(u[y.getKey()]=!0,f.isKeyQueued(y.getKey())||f.enqueue([y,d,i.getTileCoordCenter(y.tileCoord),C])),void 0!==c&&c(y)):t.useTile(w,v,b,r));t.updateCacheSize(_,r)}},nM=class iM extends KE{constructor(e){super(e)}createRenderer(){return new tM(this)}},rM=class sM{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return he(void 0!==i,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return he(void 0!==t,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){he(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}};function sp(n,e,t,i){return void 0!==i?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function rr(n,e,t){return n+"/"+e+"/"+t}function rp(n){return rr(n[0],n[1],n[2])}const op=class cM extends rM{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const i=function oM(n){return n.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(rp(s.tileCoord)),s.release())})}},ts=[0,0,0],ap=class hM{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,he(function R2(n,e,t){const i=e||pi;return n.every(function(s,r){if(0===r)return!0;const o=i(n[r-1],s);return!(o>0||t&&0===o)})}(this.resolutions_,(s,r)=>r-s,!0),"`resolutions` must be sorted in descending order"),!e.origins)for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(t){if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}else t=this.resolutions_[s]/this.resolutions_[s+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,he(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;void 0!==i&&!this.origin_&&!this.origins_&&(this.origin_=ln(i)),he(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,he(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:$a,he(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map((s,r)=>{const o=new np(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const s=this.getTileRangeForExtentAndZ(e,t);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)i([t,r,a])}forEachTileCoordParentTileRange(e,t,i,s){let r,o,a,l=null,c=e[0]-1;for(2===this.zoomFactor_?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,s);c>=this.minZoom;){if(void 0!==o&&void 0!==a?(o=Math.floor(o/2),a=Math.floor(a/2),r=es(o,o,a,a,i)):r=this.getTileRangeForExtentAndZ(l,c,i),t(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const r=2*e[1],o=2*e[2];return es(r,r+1,o,o+1,t)}const s=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(t===s)return es(r,o,r,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-s),c=Math.floor(r*l),d=Math.floor(o*l);return t<s?es(c,c,d,d,i):es(c,Math.floor(l*(r+1))-1,d,Math.floor(l*(o+1))-1,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,ts);const s=ts[1],r=ts[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,ts),es(s,ts[1],r,ts[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=xt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*i,t[1]-(e[2]+.5)*s[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=xt(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*r[0]*s,a=i[1]-(e[2]+1)*r[1]*s;return di(o,a,o+r[0]*s,a+r[1]*s,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,s,r){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=xt(this.getTileSize(o),this.tmpSize_);let d=a*(e-l[0])/i/c[0],u=a*(l[1]-t)/i/c[1];return s?(d=Qr(d,5)-1,u=Qr(u,5)-1):(d=Jr(d,5),u=Jr(u,5)),sp(o,d,u,r)}getTileCoordForXYAndZ_(e,t,i,s,r){const o=this.getOrigin(i),a=this.getResolution(i),l=xt(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],d=(o[1]-t)/a/l[1];return s?(c=Qr(c,5)-1,d=Qr(d,5)-1):(c=Jr(c,5),d=Jr(d,5)),sp(i,c,d,r)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){return Ve(Ua(this.resolutions_,e,t||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Eu(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let s=this.minZoom;s<t;++s)i[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=i}};function lp(n){let e=n.getDefaultTileGrid();return e||(e=function pM(n,e,t,i){return function uM(n,e,t,i){i=void 0!==i?i:"top-left";const s=cp(n,e,t);return new ap({extent:n,origin:s2(n,i),resolutions:s,tileSize:t})}(ic(n),e,t,i)}(n),n.setDefaultTileGrid(e)),e}function cp(n,e,t,i){e=void 0!==e?e:V2,t=xt(void 0!==t?t:$a);const s=Ue(n),r=ye(n);i=i>0?i:Math.max(r/t[0],s/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function ic(n){let e=(n=Ze(n)).getExtent();if(!e){const t=180*ks.degrees/n.getMetersPerUnit();e=di(-t,-t,t,t)}return e}class mM extends fi{constructor(e,t){super(e),this.tile=t}}const _M=class gM extends Bf{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&xt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new op(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,s){const r=this.getTileCacheForProjection(e);if(!r)return!1;let a,l,c,o=!0;for(let d=i.minX;d<=i.maxX;++d)for(let u=i.minY;u<=i.maxY;++u)l=rr(t,d,u),c=!1,r.containsKey(l)&&(a=r.get(l),c=2===a.getState(),c&&(c=!1!==s(a))),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,s,r){return pe()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:lp(e)}getTileCacheForProjection(e){const t=this.getProjection();return he(null===t||An(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(t),o=xt(s.getTileSize(e),this.tmpSize);return 1==r?o:function _I(n,e,t){return void 0===t&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=void 0!==t?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=function dM(n,e,t){const i=e[0],s=n.getTileCoordCenter(e),r=ic(t);if(!Rn(r,s)){const o=ye(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,n.getTileCoordForCoordAndZ(s,i)}return e}(i,e,t)),function lM(n,e){const t=n[0],i=n[1],s=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const r=e.getFullTileRange(t);return!r||r.containsXY(i,s)}(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,s){}};function yM(n,e){const t=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const d=e.getFullTileRange(o[0]);if(!d)throw new Error("The {-y} placeholder requires a tile grid with extent");return(d.getHeight()-o[2]-1).toString()})}}class nc extends _M{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===nc.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=xe(t),s=t.getState();let r;1==s?(this.tileLoadingKeys_[i]=!0,r="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=3==s?"tileloaderror":2==s?"tileloadend":void 0),null!=r&&this.dispatchEvent(new mM(r,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=function bM(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let r;for(r=i;r<=s;++r)e.push(n.replace(t[0],String.fromCharCode(r)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=i;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function xM(n,e){const t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=yM(n[s],e);return function vM(n){return 1===n.length?n[0]:function(e,t,i){if(!e)return;const s=function aM(n){return(n[1]<<n[0])+n[2]}(e),r=Fn(s,n.length);return n[r](e,t,i)}}(i)}(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const s=rr(e,t,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const CM=nc;function IM(n,e){n.getImage().src=e}const TM=class wM extends CM{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:IM,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:Jf,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!An(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!An(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||An(t,e)))return this.tileGrid;const i=xe(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=lp(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||An(t,e))return this.tileCache;const i=xe(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new op(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,s,r,o){const a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,d=new this.tileClass(a,void 0!==c?0:4,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=o,d.addEventListener("change",this.handleTileChange.bind(this)),d}getTile(e,t,i,s,r){const o=this.getProjection();if(!o||!r||An(o,r))return this.getTileInternal(e,t,i,s,o||r);const a=this.getTileCacheForProjection(r),l=[e,t,i];let c;const d=rp(l);a.containsKey(d)&&(c=a.get(d));const u=this.getKey();if(c&&c.key==u)return c;const f=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),m=new ec(o,f,r,p,l,g,this.getTilePixelRatio(s),this.getGutter(),(_,y,x,C)=>this.getTileInternal(_,y,x,C,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return m.key=u,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(d,m)):a.set(d,m),m}getTileInternal(e,t,i,s,r){let o=null;const a=rr(e,t,i),l=this.getKey();if(this.tileCache.containsKey(a)){if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,i,s,r,l),o.interimTile=0==c.getState()?c.interimTile:c,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(e,t,i,s,r,l),this.tileCache.set(a,o);return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=Ze(e);if(i){const s=xe(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}},EM=class SM extends TM{constructor(e){const t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:function fM(n){const e=n||{},t=e.extent||Ze("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:cp(t,e.maxZoom,e.tileSize,e.maxResolution)};return new ap(i)}({extent:ic(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}},RM=class kM extends EM{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX,zDirection:e.zDirection})}};var DM=Q(3584),OM=Q(3859);let LM=(()=>{class n{constructor(t,i,s){this._worksService=t,this.layoutService=i,this.messageService=s,this.subs=[]}ngOnInit(){const t=this._worksService.getWorks().subscribe({next:i=>{this._works=i.map(s=>new PS(s)),this._vectorPoints=this._works.map(s=>s.getVectorPoint()),this.initiateMap()},error:i=>{this.messageService.add({detail:i.message,severity:"error"})}});this.subs.push(t)}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe)}initiateMap(){this._map=null,setTimeout(()=>{(function w2(){!function C2(n){at=Ze(n)}("EPSG:4326")})(),this.layoutService.initializeMapWidth(),this._map=new NE({target:"map",layers:[new nM({source:new RM}),...this._vectorPoints],view:new Zt({center:[55.9678,54.7431],zoom:11,minZoom:10})})})}static#e=this.\u0275fac=function(i){return new(i||n)(h.Y36(DM.h),h.Y36(OM.P),h.Y36(Re.ez))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,consts:[["id","map",1,"map"]],template:function(i,s){1&i&&h._UZ(0,"div",0)},styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}"]})}return n})(),PM=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=h.oAB({type:n});static#i=this.\u0275inj=h.cJS({imports:[En.Bz.forChild([{path:"",component:LM}]),En.Bz]})}return n})(),FM=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=h.oAB({type:n});static#i=this.\u0275inj=h.cJS({imports:[Me.ez,me.u5,r1,H1,FC,AC,Bw,Ms.hJ,PM]})}return n})()},1414:function(hc){hc.exports=function(){"use strict";function rs(I,M,O,N,V){!function H(B,se,ue,ae,_e){for(;ae>ue;){if(ae-ue>600){var Ce=ae-ue+1,ze=se-ue+1,ni=Math.log(Ce),He=.5*Math.exp(2*ni/3),ot=.5*Math.sqrt(ni*He*(Ce-He)/Ce)*(ze-Ce/2<0?-1:1);H(B,se,Math.max(ue,Math.floor(se-ze*He/Ce+ot)),Math.min(ae,Math.floor(se+(Ce-ze)*He/Ce+ot)),_e)}var we=B[se],le=ue,_t=ae;for(Q(B,ue,se),_e(B[ae],we)>0&&Q(B,ue,ae);le<_t;){for(Q(B,le,_t),le++,_t--;_e(B[le],we)<0;)le++;for(;_e(B[_t],we)>0;)_t--}0===_e(B[ue],we)?Q(B,ue,_t):Q(B,++_t,ae),_t<=se&&(ue=_t+1),se<=_t&&(ae=_t-1)}}(I,M,O||0,N||I.length-1,V||Me)}function Q(I,M,O){var N=I[M];I[M]=I[O],I[O]=N}function Me(I,M){return I<M?-1:I>M?1:0}var me=function(I){void 0===I&&(I=9),this._maxEntries=Math.max(4,I),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function h(I,M,O){if(!O)return M.indexOf(I);for(var N=0;N<M.length;N++)if(O(I,M[N]))return N;return-1}function qe(I,M){Zi(I,0,I.children.length,M,I)}function Zi(I,M,O,N,V){V||(V=ii(null)),V.minX=1/0,V.minY=1/0,V.maxX=-1/0,V.maxY=-1/0;for(var H=M;H<O;H++){var B=I.children[H];ee(V,I.leaf?N(B):B)}return V}function ee(I,M){return I.minX=Math.min(I.minX,M.minX),I.minY=Math.min(I.minY,M.minY),I.maxX=Math.max(I.maxX,M.maxX),I.maxY=Math.max(I.maxY,M.maxY),I}function Te(I,M){return I.minX-M.minX}function ne(I,M){return I.minY-M.minY}function ke(I){return(I.maxX-I.minX)*(I.maxY-I.minY)}function Ye(I){return I.maxX-I.minX+(I.maxY-I.minY)}function Z(I,M){return I.minX<=M.minX&&I.minY<=M.minY&&M.maxX<=I.maxX&&M.maxY<=I.maxY}function vn(I,M){return M.minX<=I.maxX&&M.minY<=I.maxY&&M.maxX>=I.minX&&M.maxY>=I.minY}function ii(I){return{children:I,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function be(I,M,O,N,V){for(var H=[M,O];H.length;)if(!((O=H.pop())-(M=H.pop())<=N)){var B=M+Math.ceil((O-M)/N/2)*N;rs(I,B,M,O,V),H.push(M,B,B,O)}}return me.prototype.all=function(){return this._all(this.data,[])},me.prototype.search=function(I){var M=this.data,O=[];if(!vn(I,M))return O;for(var N=this.toBBox,V=[];M;){for(var H=0;H<M.children.length;H++){var B=M.children[H],se=M.leaf?N(B):B;vn(I,se)&&(M.leaf?O.push(B):Z(I,se)?this._all(B,O):V.push(B))}M=V.pop()}return O},me.prototype.collides=function(I){var M=this.data;if(!vn(I,M))return!1;for(var O=[];M;){for(var N=0;N<M.children.length;N++){var V=M.children[N],H=M.leaf?this.toBBox(V):V;if(vn(I,H)){if(M.leaf||Z(I,H))return!0;O.push(V)}}M=O.pop()}return!1},me.prototype.load=function(I){if(!I||!I.length)return this;if(I.length<this._minEntries){for(var M=0;M<I.length;M++)this.insert(I[M]);return this}var O=this._build(I.slice(),0,I.length-1,0);if(this.data.children.length)if(this.data.height===O.height)this._splitRoot(this.data,O);else{if(this.data.height<O.height){var N=this.data;this.data=O,O=N}this._insert(O,this.data.height-O.height-1,!0)}else this.data=O;return this},me.prototype.insert=function(I){return I&&this._insert(I,this.data.height-1),this},me.prototype.clear=function(){return this.data=ii([]),this},me.prototype.remove=function(I,M){if(!I)return this;for(var O,N,V,H=this.data,B=this.toBBox(I),se=[],ue=[];H||se.length;){if(H||(H=se.pop(),N=se[se.length-1],O=ue.pop(),V=!0),H.leaf){var ae=h(I,H.children,M);if(-1!==ae)return H.children.splice(ae,1),se.push(H),this._condense(se),this}V||H.leaf||!Z(H,B)?N?(O++,H=N.children[O],V=!1):H=null:(se.push(H),ue.push(O),O=0,N=H,H=H.children[0])}return this},me.prototype.toBBox=function(I){return I},me.prototype.compareMinX=function(I,M){return I.minX-M.minX},me.prototype.compareMinY=function(I,M){return I.minY-M.minY},me.prototype.toJSON=function(){return this.data},me.prototype.fromJSON=function(I){return this.data=I,this},me.prototype._all=function(I,M){for(var O=[];I;)I.leaf?M.push.apply(M,I.children):O.push.apply(O,I.children),I=O.pop();return M},me.prototype._build=function(I,M,O,N){var V,H=O-M+1,B=this._maxEntries;if(H<=B)return qe(V=ii(I.slice(M,O+1)),this.toBBox),V;N||(N=Math.ceil(Math.log(H)/Math.log(B)),B=Math.ceil(H/Math.pow(B,N-1))),(V=ii([])).leaf=!1,V.height=N;var se=Math.ceil(H/B),ue=se*Math.ceil(Math.sqrt(B));be(I,M,O,ue,this.compareMinX);for(var ae=M;ae<=O;ae+=ue){var _e=Math.min(ae+ue-1,O);be(I,ae,_e,se,this.compareMinY);for(var Ce=ae;Ce<=_e;Ce+=se){var ze=Math.min(Ce+se-1,_e);V.children.push(this._build(I,Ce,ze,N-1))}}return qe(V,this.toBBox),V},me.prototype._chooseSubtree=function(I,M,O,N){for(;N.push(M),!M.leaf&&N.length-1!==O;){for(var V=1/0,H=1/0,B=void 0,se=0;se<M.children.length;se++){var ue=M.children[se],ae=ke(ue),_e=(Ce=I,ze=ue,(Math.max(ze.maxX,Ce.maxX)-Math.min(ze.minX,Ce.minX))*(Math.max(ze.maxY,Ce.maxY)-Math.min(ze.minY,Ce.minY))-ae);_e<H?(H=_e,V=ae<V?ae:V,B=ue):_e===H&&ae<V&&(V=ae,B=ue)}M=B||M.children[0]}var Ce,ze;return M},me.prototype._insert=function(I,M,O){var N=O?I:this.toBBox(I),V=[],H=this._chooseSubtree(N,this.data,M,V);for(H.children.push(I),ee(H,N);M>=0&&V[M].children.length>this._maxEntries;)this._split(V,M),M--;this._adjustParentBBoxes(N,V,M)},me.prototype._split=function(I,M){var O=I[M],N=O.children.length,V=this._minEntries;this._chooseSplitAxis(O,V,N);var H=this._chooseSplitIndex(O,V,N),B=ii(O.children.splice(H,O.children.length-H));B.height=O.height,B.leaf=O.leaf,qe(O,this.toBBox),qe(B,this.toBBox),M?I[M-1].children.push(B):this._splitRoot(O,B)},me.prototype._splitRoot=function(I,M){this.data=ii([I,M]),this.data.height=I.height+1,this.data.leaf=!1,qe(this.data,this.toBBox)},me.prototype._chooseSplitIndex=function(I,M,O){for(var N,V,H,B,se,ue,ae,_e=1/0,Ce=1/0,ze=M;ze<=O-M;ze++){var ni=Zi(I,0,ze,this.toBBox),He=Zi(I,ze,O,this.toBBox),ot=(V=ni,H=He,void 0,void 0,void 0,void 0,B=Math.max(V.minX,H.minX),se=Math.max(V.minY,H.minY),ue=Math.min(V.maxX,H.maxX),ae=Math.min(V.maxY,H.maxY),Math.max(0,ue-B)*Math.max(0,ae-se)),si=ke(ni)+ke(He);ot<_e?(_e=ot,N=ze,Ce=si<Ce?si:Ce):ot===_e&&si<Ce&&(Ce=si,N=ze)}return N||O-M},me.prototype._chooseSplitAxis=function(I,M,O){var N=I.leaf?this.compareMinX:Te,V=I.leaf?this.compareMinY:ne;this._allDistMargin(I,M,O,N)<this._allDistMargin(I,M,O,V)&&I.children.sort(N)},me.prototype._allDistMargin=function(I,M,O,N){I.children.sort(N);for(var V=this.toBBox,H=Zi(I,0,M,V),B=Zi(I,O-M,O,V),se=Ye(H)+Ye(B),ue=M;ue<O-M;ue++){var ae=I.children[ue];ee(H,I.leaf?V(ae):ae),se+=Ye(H)}for(var _e=O-M-1;_e>=M;_e--){var Ce=I.children[_e];ee(B,I.leaf?V(Ce):Ce),se+=Ye(B)}return se},me.prototype._adjustParentBBoxes=function(I,M,O){for(var N=O;N>=0;N--)ee(M[N],I)},me.prototype._condense=function(I){for(var M=I.length-1,O=void 0;M>=0;M--)0===I[M].children.length?M>0?(O=I[M-1].children).splice(O.indexOf(I[M]),1):this.clear():qe(I[M],this.toBBox)},me}()}}]);